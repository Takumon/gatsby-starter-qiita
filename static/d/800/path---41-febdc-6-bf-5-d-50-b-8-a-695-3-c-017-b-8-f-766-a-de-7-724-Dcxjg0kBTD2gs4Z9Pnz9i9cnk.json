{"data":{"site":{"siteMetadata":{"title":"Gatsby Starter Qiita","author":"Takumon"}},"qiitaPost":{"rendered_body":"\n<h2>\n<span id=\"なにこれ\" class=\"fragment\"></span><a href=\"#%E3%81%AA%E3%81%AB%E3%81%93%E3%82%8C\"><i class=\"fa fa-link\"></i></a>なにこれ</h2>\n\n<p>Angularで状態管理する方法をざっくり把握するためのチュートリアルです。<a href=\"http://ngrx.github.io/\" rel=\"nofollow noopener\" target=\"_blank\">@ngrx/store</a>ベースの簡単なアプリ（数をカウントするアプリ）を作成します。作るだけなら10分程度で出来上がるので、とりあえず手を動かしてngrxを最低限を把握したい人向けです。ソースコードも<a href=\"https://github.com/Takumon/ngrx-tutorial/tree/with-ngrx\" rel=\"nofollow noopener\" target=\"_blank\">GitHub</a>に置いているので参考にしてください。<br>\nngrxを使うとボイラープレートが非常に多くなりますが、今回のチュートリアルでは<a href=\"https://github.com/ngrx/platform/tree/master/docs/schematics\" rel=\"nofollow noopener\" target=\"_blank\">@ngrx/schematics</a> を使い、ボイラープレートを自動生成することで極力手間を省いています。</p>\n\n<h2>\n<span id=\"アプリの完成イメージ\" class=\"fragment\"></span><a href=\"#%E3%82%A2%E3%83%97%E3%83%AA%E3%81%AE%E5%AE%8C%E6%88%90%E3%82%A4%E3%83%A1%E3%83%BC%E3%82%B8\"><i class=\"fa fa-link\"></i></a>アプリの完成イメージ</h2>\n\n<ul>\n<li>\n<code>+</code>ボタンをクリックするとCountが+1される</li>\n<li>\n<code>-</code> ボタンをクリックするとCountが- 1される\n<a href=\"https://camo.qiitausercontent.com/b480b8a4f23b0ad498a61f36f69be9fae9cef250/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f34393931352f38653666363435652d613733342d646238642d656336622d3134346330666465653162302e676966\" target=\"_blank\" rel=\"nofollow noopener\"><img src=\"https://camo.qiitausercontent.com/b480b8a4f23b0ad498a61f36f69be9fae9cef250/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f34393931352f38653666363435652d613733342d646238642d656336622d3134346330666465653162302e676966\" alt=\"counterapp.gif\" data-canonical-src=\"https://qiita-image-store.s3.amazonaws.com/0/49915/8e6f645e-a734-db8d-ec6b-144c0fdee1b0.gif\"></a>\n</li>\n</ul>\n\n<h2>\n<span id=\"やることやらないこと\" class=\"fragment\"></span><a href=\"#%E3%82%84%E3%82%8B%E3%81%93%E3%81%A8%E3%82%84%E3%82%89%E3%81%AA%E3%81%84%E3%81%93%E3%81%A8\"><i class=\"fa fa-link\"></i></a>やること/やらないこと</h2>\n\n<ul>\n<li>やる\n\n<ul>\n<li>\n<a href=\"https://github.com/ngrx/platform/blob/master/docs/store/README.md\" rel=\"nofollow noopener\" target=\"_blank\">@ngrx/store</a>の使い方\n\n<ul>\n<li>Storeの作り方</li>\n<li>Stateの作り方</li>\n<li>Reducerの作り方</li>\n<li>Actionsの作り方</li>\n</ul>\n</li>\n<li>\n<a href=\"https://github.com/ngrx/platform/blob/master/docs/schematics/README.md\" rel=\"nofollow noopener\" target=\"_blank\">@ngrx/schematics</a>の使い方\n\n<ul>\n<li>オプションなどを使い極力手間を減らす方法</li>\n</ul>\n</li>\n</ul>\n</li>\n<li>やらない （下記を理解するには<a href=\"#%E5%8F%82%E8%80%83\">参考</a>のQiitaの記事を見てください。）\n\n<ul>\n<li>状態管理の説明</li>\n<li>Reduxの説明</li>\n<li>\n<a href=\"https://github.com/ngrx/platform/blob/master/docs/router-store/README.md\" rel=\"nofollow noopener\" target=\"_blank\">@ngrx/router-store</a>の使い方</li>\n<li>\n<a href=\"https://github.com/ngrx/platform/blob/master/docs/entity/README.md\" rel=\"nofollow noopener\" target=\"_blank\">@ngrx/entity</a>の使い方</li>\n<li>\n<a href=\"https://github.com/ngrx/platform/blob/master/docs/effects/README.md\" rel=\"nofollow noopener\" target=\"_blank\">@ngrx/effect</a>の使い方<br>\n</li>\n</ul>\n</li>\n</ul>\n\n<h2>\n<span id=\"チュートリアル概要\" class=\"fragment\"></span><a href=\"#%E3%83%81%E3%83%A5%E3%83%BC%E3%83%88%E3%83%AA%E3%82%A2%E3%83%AB%E6%A6%82%E8%A6%81\"><i class=\"fa fa-link\"></i></a>チュートリアル概要</h2>\n\n<p>段階を踏んで、ステップごとに動作確認しながら作成していきます。<br>\n各ステップ終了時点のソースコードはGitHubに用意しています。参考にしてください。<br>\n大部分はSchematicsを使ってngコマンドでボイラープレートを自動生成し、メイン部分のみ実装という感じです。</p>\n\n<ol>\n<li>Angularアプリを生成（1分）  ※<a href=\"https://github.com/Takumon/ngrx-tutorial/tree/generated-with-angualr-cli\" rel=\"nofollow noopener\" target=\"_blank\">終了時点のソース</a>\n</li>\n<li>ngrxを使わずにカウント処理実装（2分）※<a href=\"https://github.com/Takumon/ngrx-tutorial/tree/no-ngrx\" rel=\"nofollow noopener\" target=\"_blank\">終了時点のソース</a>\n</li>\n<li>ngrxインストール、初期設定（2分） ※<a href=\"https://github.com/Takumon/ngrx-tutorial/tree/after-ngrx-setting\" rel=\"nofollow noopener\" target=\"_blank\">終了時点のソース</a>\n</li>\n<li>ngrxを使ってカウント処理実装（5分） ※<a href=\"https://github.com/Takumon/ngrx-tutorial/tree/with-ngrx\" rel=\"nofollow noopener\" target=\"_blank\">終了時点のソース</a>\n</li>\n</ol>\n\n<h2>\n<span id=\"前提条件\" class=\"fragment\"></span><a href=\"#%E5%89%8D%E6%8F%90%E6%9D%A1%E4%BB%B6\"><i class=\"fa fa-link\"></i></a>前提条件</h2>\n\n<ul>\n<li>\n<a href=\"https://nodejs.org/ja/\" rel=\"nofollow noopener\" target=\"_blank\">Node.js</a>インストール済み</li>\n<li>\n<a href=\"https://cli.angular.io/\" rel=\"nofollow noopener\" target=\"_blank\">Angular CLI</a>グローバルインストール済み</li>\n</ul>\n\n<div class=\"code-frame\" data-lang=\"terminal\"><div class=\"highlight\"><pre><span class=\"gp\">$</span> npm i <span class=\"nt\">-g</span> @angular/cli\n</pre></div></div>\n\n<ul>\n<li>\n<a href=\"https://cli.angular.io/\" rel=\"nofollow noopener\" target=\"_blank\">@ngrx/schematics</a>グローバルインストール済み</li>\n</ul>\n\n<div class=\"code-frame\" data-lang=\"terminal\"><div class=\"highlight\"><pre><span class=\"gp\">$</span> npm i <span class=\"nt\">-g</span> @ngrx/schematics\n</pre></div></div>\n\n<h2>\n<span id=\"1-angularアプリを生成1分\" class=\"fragment\"></span><a href=\"#1-angular%E3%82%A2%E3%83%97%E3%83%AA%E3%82%92%E7%94%9F%E6%88%901%E5%88%86\"><i class=\"fa fa-link\"></i></a>1. Angularアプリを生成（1分）</h2>\n\n<ul>\n<li>ng newコマンドを実行します。</li>\n</ul>\n\n<div class=\"code-frame\" data-lang=\"terminal\"><div class=\"highlight\"><pre><span class=\"gp\">$</span> ng new ngrx-tutorial\n</pre></div></div>\n\n<ul>\n<li>生成されたアプリ配下に移動し、一旦Webアプリを立ち上げてみます。</li>\n</ul>\n\n<div class=\"code-frame\" data-lang=\"terminal\"><div class=\"highlight\"><pre><span class=\"gp\">$</span> <span class=\"nb\">cd </span>ngrx-tutorial\n<span class=\"gp\">$</span> ng serve <span class=\"nt\">-o</span>\n</pre></div></div>\n\n<ul>\n<li>ブラウザが起動し下記のような画面が表示されたら成功です。\n<a href=\"https://camo.qiitausercontent.com/f46653279a0efbe1432919aa808f440fc6eb1ede/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f34393931352f35633139633366302d313034612d336566322d613333642d3331356330663061336639662e706e67\" target=\"_blank\" rel=\"nofollow noopener\"><img src=\"https://camo.qiitausercontent.com/f46653279a0efbe1432919aa808f440fc6eb1ede/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f34393931352f35633139633366302d313034612d336566322d613333642d3331356330663061336639662e706e67\" alt=\"スクリーンショット 2018-07-30 1.03.59.png\" data-canonical-src=\"https://qiita-image-store.s3.amazonaws.com/0/49915/5c19c3f0-104a-3ef2-a33d-315c0f0a3f9f.png\"></a>\n</li>\n</ul>\n\n<h2>\n<span id=\"2-ngrxを使わずにカウント処理実装2分\" class=\"fragment\"></span><a href=\"#2-ngrx%E3%82%92%E4%BD%BF%E3%82%8F%E3%81%9A%E3%81%AB%E3%82%AB%E3%82%A6%E3%83%B3%E3%83%88%E5%87%A6%E7%90%86%E5%AE%9F%E8%A3%852%E5%88%86\"><i class=\"fa fa-link\"></i></a>2. ngrxを使わずにカウント処理実装（2分）</h2>\n\n<p>カウント処理の資産は全て<code>src/app/counter</code>フォルダ配下に作成します。<br>\nまずはコマンドラインからボイラープレートを作成し、その後カウント処理を実装します。</p>\n\n<h3>\n<span id=\"ボイラープレート作成\" class=\"fragment\"></span><a href=\"#%E3%83%9C%E3%82%A4%E3%83%A9%E3%83%BC%E3%83%97%E3%83%AC%E3%83%BC%E3%83%88%E4%BD%9C%E6%88%90\"><i class=\"fa fa-link\"></i></a>ボイラープレート作成</h3>\n\n<ul>\n<li>カウント処理関連資産をまとめるモジュールを作成します。\n\n<ul>\n<li>このモジュールをアプリ全体のモジュールに登録するため<code>--module</code>オプションを指定します。</li>\n</ul>\n</li>\n</ul>\n\n<div class=\"code-frame\" data-lang=\"terminal\"><div class=\"highlight\"><pre><span class=\"gp\">$</span> ng g module counter <span class=\"nt\">--module</span><span class=\"o\">=</span>app.module.ts\n</pre></div></div>\n\n<ul>\n<li>カウント処理用のコンポーネントを作成します。\n\n<ul>\n<li>上記で作成したモジュールにコンポーネントを登録するため<code>--module</code>オプションを指定します。</li>\n<li>最終的にアプリ全体のモジュールにコンポーネントを登録するため<code>--export</code>オプションを指定します。</li>\n</ul>\n</li>\n</ul>\n\n<div class=\"code-frame\" data-lang=\"terminal\"><div class=\"highlight\"><pre><span class=\"gp\">$</span> ng g component counter <span class=\"nt\">--module</span><span class=\"o\">=</span>counter/counter.module.ts <span class=\"nt\">--export</span>\n</pre></div></div>\n\n<ul>\n<li>\n<code>app.component.html</code>修正し、作成したカウント処理用のコンポーネントを呼び出すようにします。</li>\n</ul>\n\n<div class=\"code-frame\" data-lang=\"html\">\n<div class=\"code-lang\"><span class=\"bold\">app.component.html</span></div>\n<div class=\"highlight\"><pre><span class=\"nt\">&lt;app-counter&gt;&lt;/app-counter&gt;</span>\n</pre></div>\n</div>\n\n<ul>\n<li>一旦ここまででWebアプリを立ち上げてみます。</li>\n</ul>\n\n<div class=\"code-frame\" data-lang=\"terminal\"><div class=\"highlight\"><pre><span class=\"gp\">$</span> ng serve <span class=\"nt\">-o</span>\n</pre></div></div>\n\n<ul>\n<li>ブラウザが起動し、下記画面が表示されます。開発者ツールでエラーがなければ成功です。</li>\n</ul>\n\n<p><a href=\"https://camo.qiitausercontent.com/6ed3cc13498f56621ca94113a6eacdc34949e17f/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f34393931352f37373261373530312d333461372d336566312d363636362d6431336537393338326365362e706e67\" target=\"_blank\" rel=\"nofollow noopener\"><img src=\"https://camo.qiitausercontent.com/6ed3cc13498f56621ca94113a6eacdc34949e17f/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f34393931352f37373261373530312d333461372d336566312d363636362d6431336537393338326365362e706e67\" alt=\"スクリーンショット 2018-07-30 1.06.30.png\" data-canonical-src=\"https://qiita-image-store.s3.amazonaws.com/0/49915/772a7501-34a7-3ef1-6666-d13e79382ce6.png\"></a></p>\n\n<h3>\n<span id=\"処理実装\" class=\"fragment\"></span><a href=\"#%E5%87%A6%E7%90%86%E5%AE%9F%E8%A3%85\"><i class=\"fa fa-link\"></i></a>処理実装</h3>\n\n<ul>\n<li>カウント用コンポーネントで実際の処理を記述します。</li>\n</ul>\n\n<div class=\"code-frame\" data-lang=\"ts\">\n<div class=\"code-lang\"><span class=\"bold\">src/app/counter/counter.component.ts</span></div>\n<div class=\"highlight\"><pre><span class=\"k\">import</span> <span class=\"p\">{</span> <span class=\"nx\">Component</span><span class=\"p\">,</span> <span class=\"nx\">OnInit</span> <span class=\"p\">}</span> <span class=\"k\">from</span> <span class=\"s1\">'@angular/core'</span><span class=\"p\">;</span>\n\n<span class=\"p\">@</span><span class=\"nd\">Component</span><span class=\"p\">({</span>\n  <span class=\"na\">selector</span><span class=\"p\">:</span> <span class=\"s1\">'app-counter'</span><span class=\"p\">,</span>\n  <span class=\"na\">templateUrl</span><span class=\"p\">:</span> <span class=\"s1\">'./counter.component.html'</span><span class=\"p\">,</span>\n  <span class=\"na\">styleUrls</span><span class=\"p\">:</span> <span class=\"p\">[</span><span class=\"s1\">'./counter.component.css'</span><span class=\"p\">]</span>\n<span class=\"p\">})</span>\n<span class=\"k\">export</span> <span class=\"kd\">class</span> <span class=\"nx\">CounterComponent</span> <span class=\"kr\">implements</span> <span class=\"nx\">OnInit</span> <span class=\"p\">{</span>\n  <span class=\"nx\">count</span> <span class=\"o\">=</span> <span class=\"mi\">0</span><span class=\"p\">;</span>\n\n  <span class=\"kd\">constructor</span><span class=\"p\">()</span> <span class=\"p\">{</span> <span class=\"p\">}</span>\n\n  <span class=\"nx\">ngOnInit</span><span class=\"p\">()</span> <span class=\"p\">{</span>\n  <span class=\"p\">}</span>\n\n  <span class=\"nx\">increment</span><span class=\"p\">()</span> <span class=\"p\">{</span>\n    <span class=\"k\">this</span><span class=\"p\">.</span><span class=\"nx\">count</span> <span class=\"o\">=</span> <span class=\"k\">this</span><span class=\"p\">.</span><span class=\"nx\">count</span> <span class=\"o\">+</span> <span class=\"mi\">1</span><span class=\"p\">;</span>\n  <span class=\"p\">}</span>\n\n  <span class=\"nx\">decrement</span><span class=\"p\">()</span> <span class=\"p\">{</span>\n    <span class=\"k\">this</span><span class=\"p\">.</span><span class=\"nx\">count</span> <span class=\"o\">=</span> <span class=\"k\">this</span><span class=\"p\">.</span><span class=\"nx\">count</span> <span class=\"o\">-</span> <span class=\"mi\">1</span><span class=\"p\">;</span>\n  <span class=\"p\">}</span>\n\n<span class=\"p\">}</span>\n\n</pre></div>\n</div>\n\n<div class=\"code-frame\" data-lang=\"html\">\n<div class=\"code-lang\"><span class=\"bold\">src/app/counter/counter.component.html</span></div>\n<div class=\"highlight\"><pre><span class=\"nt\">&lt;button</span> <span class=\"err\">(</span><span class=\"na\">click</span><span class=\"err\">)=\"</span><span class=\"na\">increment</span><span class=\"err\">()\"</span><span class=\"nt\">&gt;</span>+<span class=\"nt\">&lt;/button&gt;</span>\n<span class=\"nt\">&lt;button</span> <span class=\"err\">(</span><span class=\"na\">click</span><span class=\"err\">)=\"</span><span class=\"na\">decrement</span><span class=\"err\">()\"</span><span class=\"nt\">&gt;</span>-<span class=\"nt\">&lt;/button&gt;</span>\n<span class=\"nt\">&lt;div&gt;</span>Count: {{count}}<span class=\"nt\">&lt;/div&gt;</span>\n</pre></div>\n</div>\n\n<ul>\n<li>ここまででWebアプリを立ち上げてみます。</li>\n</ul>\n\n<div class=\"code-frame\" data-lang=\"terminal\"><div class=\"highlight\"><pre><span class=\"gp\">$</span> ng serve <span class=\"nt\">-o</span>\n</pre></div></div>\n\n<ul>\n<li>ブラウザが起動し下記画面が表示されます。<code>+</code>,<code>-</code>ボタンをクリックすると数字が増えたり減ったりした、開発者ツールでもエラーがなければ成功です。</li>\n</ul>\n\n<p><a href=\"https://camo.qiitausercontent.com/e4f3b6b6888e2f7e618fc6587c88775f7b161624/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f34393931352f64353036626336652d636463652d346430302d313130392d3261663966343738303636332e706e67\" target=\"_blank\" rel=\"nofollow noopener\"><img src=\"https://camo.qiitausercontent.com/e4f3b6b6888e2f7e618fc6587c88775f7b161624/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f34393931352f64353036626336652d636463652d346430302d313130392d3261663966343738303636332e706e67\" alt=\"スクリーンショット 2018-07-30 0.59.12.png\" data-canonical-src=\"https://qiita-image-store.s3.amazonaws.com/0/49915/d506bc6e-cdce-4d00-1109-2af9f4780663.png\"></a></p>\n\n<h2>\n<span id=\"3-ngrxインストール初期設定2分\" class=\"fragment\"></span><a href=\"#3-ngrx%E3%82%A4%E3%83%B3%E3%82%B9%E3%83%88%E3%83%BC%E3%83%AB%E5%88%9D%E6%9C%9F%E8%A8%AD%E5%AE%9A2%E5%88%86\"><i class=\"fa fa-link\"></i></a>3. ngrxインストール、初期設定（2分）</h2>\n\n<p>@ngrx/storeをアプリに導入し、初期設定をします。</p>\n\n<ul>\n<li>下記ライブラリをインストールします。\n\n<ul>\n<li>\n<code>@ngrx/schematics</code>\n\n<ul>\n<li>Angualr CLIでngrxの雛形を作るためのライブラリ</li>\n</ul>\n</li>\n<li>\n<code>@ngrx/store</code>\n\n<ul>\n<li>ngrxでStore,Reducer,Actionを使うためのライブラリ</li>\n</ul>\n</li>\n<li>\n<code>@ngrx/store-devtools</code>\n\n<ul>\n<li>強力なデバッカを使えるようにするためのライブラリ</li>\n</ul>\n</li>\n</ul>\n</li>\n</ul>\n\n<div class=\"code-frame\" data-lang=\"terminal\"><div class=\"highlight\"><pre><span class=\"gp\">$</span> npm i <span class=\"nt\">-D</span> @ngrx/schematics\n<span class=\"gp\">$</span> npm i <span class=\"nt\">-s</span> @ngrx/store\n<span class=\"gp\">$</span> npm i <span class=\"nt\">-s</span> @ngrx/store-devtools\n</pre></div></div>\n\n<p>*<code>@ngrx/schematics</code>をデフォルトのSchematicsに追加します（コマンドラインでngrxのボイラープレート生成時に<code>@ngrx/schematics</code>の指定を省略できるようにするためです。）</p>\n\n<div class=\"code-frame\" data-lang=\"terminal\"><div class=\"highlight\"><pre><span class=\"gp\">$</span> ng config cli.defaultCollection @ngrx/schematics\n</pre></div></div>\n\n<ul>\n<li>上記を実行すると、<code>angular.json</code>にこのような設定が追加されます。</li>\n</ul>\n\n<div class=\"code-frame\" data-lang=\"json\">\n<div class=\"code-lang\"><span class=\"bold\">angular.json</span></div>\n<div class=\"highlight\"><pre><span class=\"w\">  </span><span class=\"s2\">\"defaultProject\"</span><span class=\"p\">:</span><span class=\"w\"> </span><span class=\"s2\">\"ngrx-tutorial\"</span><span class=\"p\">,</span><span class=\"w\">\n  </span><span class=\"s2\">\"cli\"</span><span class=\"p\">:</span><span class=\"w\"> </span><span class=\"p\">{</span><span class=\"w\">\n    </span><span class=\"s2\">\"defaultCollection\"</span><span class=\"p\">:</span><span class=\"w\"> </span><span class=\"s2\">\"@ngrx/schematics\"</span><span class=\"w\">\n  </span><span class=\"p\">}</span><span class=\"w\">\n</span></pre></div>\n</div>\n\n<ul>\n<li>ルートのStoreを作成します。\n\n<ul>\n<li>\n<code>src/app/state</code>配下に生成したいので<code>--statePath</code>オプションを指定します。</li>\n<li>アプリ全体のモジュールに登録したいので<code>--module</code>オプションを指定します。</li>\n</ul>\n</li>\n</ul>\n\n<div class=\"code-frame\" data-lang=\"terminal\"><div class=\"highlight\"><pre><span class=\"gp\">$</span> ng g store state <span class=\"nt\">--statePath</span> state <span class=\"nt\">--root</span> <span class=\"nt\">--module</span> app.module.ts\n</pre></div></div>\n\n<ul>\n<li>上記コマンドで更新した<code>src/app/app.module.ts</code>で<code>environment</code>のimport文のパスでエラーが出ている場合は修正してください。</li>\n</ul>\n\n<div class=\"code-frame\" data-lang=\"diff\">\n<div class=\"code-lang\"><span class=\"bold\">app/src/app.module.ts</span></div>\n<div class=\"highlight\"><pre><span class=\"gd\">- import { environment } from '../../environments/environment';\n</span><span class=\"gi\">+ import { environment } from '../environments/environment';\n</span></pre></div>\n</div>\n\n<ul>\n<li>ここまででWebアプリを立ち上げてみます。</li>\n</ul>\n\n<div class=\"code-frame\" data-lang=\"terminal\"><div class=\"highlight\"><pre><span class=\"gp\">$</span> ng serve <span class=\"nt\">-o</span>\n</pre></div></div>\n\n<ul>\n<li>手順2の動作確認時と同様の挙動になります、開発者ツールでもエラーがなければ成功です。</li>\n</ul>\n\n<p><a href=\"https://camo.qiitausercontent.com/e4f3b6b6888e2f7e618fc6587c88775f7b161624/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f34393931352f64353036626336652d636463652d346430302d313130392d3261663966343738303636332e706e67\" target=\"_blank\" rel=\"nofollow noopener\"><img src=\"https://camo.qiitausercontent.com/e4f3b6b6888e2f7e618fc6587c88775f7b161624/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f34393931352f64353036626336652d636463652d346430302d313130392d3261663966343738303636332e706e67\" alt=\"スクリーンショット 2018-07-30 0.59.12.png\" data-canonical-src=\"https://qiita-image-store.s3.amazonaws.com/0/49915/d506bc6e-cdce-4d00-1109-2af9f4780663.png\"></a></p>\n\n<h2>\n<span id=\"4-ngrxを使ってカウント処理実装5分\" class=\"fragment\"></span><a href=\"#4-ngrx%E3%82%92%E4%BD%BF%E3%81%A3%E3%81%A6%E3%82%AB%E3%82%A6%E3%83%B3%E3%83%88%E5%87%A6%E7%90%86%E5%AE%9F%E8%A3%855%E5%88%86\"><i class=\"fa fa-link\"></i></a>4. ngrxを使ってカウント処理実装（5分）</h2>\n\n<p>ここからは実際にStore、Reducer、Actionを作成し、カウント処理の値をStoreに移行します。<br>\nここで作成する資産はカウンター処理に閉じたものなので、<code>src/app/counter/state</code>配下に作成します。<br>\nまた<code>@ngrx/schemetics</code>のデフォルトではReducer、Actionなどの資産が、役割ごとにフォルダ分けされてしまいますが、１フォルダに集約したほうがソースが修正しやすいので、今回は全て<code>src/app/counter/state</code>の直下に作成します。</p>\n\n<h3>\n<span id=\"ボイラープレート生成\" class=\"fragment\"></span><a href=\"#%E3%83%9C%E3%82%A4%E3%83%A9%E3%83%BC%E3%83%97%E3%83%AC%E3%83%BC%E3%83%88%E7%94%9F%E6%88%90\"><i class=\"fa fa-link\"></i></a>ボイラープレート生成</h3>\n\n<ul>\n<li>Store\n\n<ul>\n<li>\n<code>src/app/counter/state</code>直下に作成するため<code>--statePath</code>オプションを指定します。</li>\n<li>カウント処理関連モジュールに登録したいので<code>--module</code>オプションを指定します。</li>\n</ul>\n</li>\n</ul>\n\n<div class=\"code-frame\" data-lang=\"terminal\"><div class=\"highlight\"><pre><span class=\"gp\">$</span> ng g store counter/counter <span class=\"nt\">--statePath</span> state <span class=\"nt\">--module</span> counter.module.ts\n</pre></div></div>\n\n<ul>\n<li>Reducer\n\n<ul>\n<li>上記で作成したStoreに本Reducerを登録したいため<code>--reducers</code>オプションを指定します。</li>\n</ul>\n</li>\n</ul>\n\n<div class=\"code-frame\" data-lang=\"terminal\"><div class=\"highlight\"><pre><span class=\"gp\">$</span> ng g reducer counter/state/counter <span class=\"nt\">--reducers</span> index.ts\n</pre></div></div>\n\n<ul>\n<li>Action\n\n<ul>\n<li>\n<code>src/app/counter/state</code>直下に作成するため<code>--flat</code>オプションを登録します。</li>\n</ul>\n</li>\n</ul>\n\n<div class=\"code-frame\" data-lang=\"terminal\"><div class=\"highlight\"><pre><span class=\"gp\">$</span> ng g action counter/state/counter <span class=\"nt\">--flat</span>\n</pre></div></div>\n\n<p>※この時点ではコンパイルエラーがでますので、動作確認はできません。そのまま次に進みます。</p>\n\n<h2>\n<span id=\"処理実装-1\" class=\"fragment\"></span><a href=\"#%E5%87%A6%E7%90%86%E5%AE%9F%E8%A3%85-1\"><i class=\"fa fa-link\"></i></a>処理実装</h2>\n\n<p>依存関係の都合でボイラープレートとは逆順で実装していきます。</p>\n\n<h3>\n<span id=\"action\" class=\"fragment\"></span><a href=\"#action\"><i class=\"fa fa-link\"></i></a>Action</h3>\n\n<p>ボイラープレート生成時から下記のように修正します。<br>\n※コメントはコードの説明なので無視して実装してください。</p>\n\n<div class=\"code-frame\" data-lang=\"diff\">\n<div class=\"code-lang\"><span class=\"bold\">src/app/counter/state/counter.actions.ts</span></div>\n<div class=\"highlight\"><pre>import { Action } from '@ngrx/store';\n\nexport enum CounterActionTypes {\n// Actionごとに型を定義します。\n<span class=\"gd\">-  LoadCounters = '[Counter] Load Counters'\n</span><span class=\"gi\">+  CountIncrement = '[Counter] Increment Count',\n+  CountDecrement = '[Counter] Decrement Count'\n</span>}\n\n// Actionごとに@ngrx.storeのActionをインプリしたクラスを作成します。\n// 複雑な処理をする場合はコンストラクタ引数をとりますが、\n// 本チュートリアルでは簡単のため引数なしにしています。\n<span class=\"gd\">- export class Counter implements Action {\n-   readonly type = CounterActionTypes.LoadCounters;\n- }\n</span><span class=\"gi\">+ export class CountIncrement implements Action {\n+   readonly type = CounterActionTypes.CountIncrement;\n+   public constructor() {}\n+ }\n+ \n+ export class CountDecrement implements Action {\n+   readonly type = CounterActionTypes.CountDecrement;\n+   public constructor() {}\n+ }\n</span>\n\n// 上記で定義したActionクラスを集約した型を定義します。Reducerで使うためです。\n<span class=\"gd\">- export type CounterActions = LoadCounters;\n</span><span class=\"gi\">+ export type CounterActions = CountIncrement | CountDecrement;\n</span></pre></div>\n</div>\n\n<h2>\n<span id=\"reducer作成\" class=\"fragment\"></span><a href=\"#reducer%E4%BD%9C%E6%88%90\"><i class=\"fa fa-link\"></i></a>Reducer作成</h2>\n\n<div class=\"code-frame\" data-lang=\"diff\">\n<div class=\"code-lang\"><span class=\"bold\">src/app/counter/state/counter.reducer.ts</span></div>\n<div class=\"highlight\"><pre>import { Action } from '@ngrx/store';\n<span class=\"gi\">+ import { CounterActionTypes } from './counter.actions';\n</span>\n\nexport interface State {\n// カウンター処理に置けるStateを定義します。\n<span class=\"gi\">+   count: number;\n</span>}\n\nexport const initialState: State = {\n// カウンター処理に置けるStateの初期値を定義します。\n<span class=\"gi\">+   count: 0\n</span>};\n\n\nexport function reducer(state = initialState, action: Action): State {\n  switch (action.type) {\n// 引数として受け取ったActionの型に応じて処理を振り分けます\n// ここではカウンター処理に関連するアクションのみ拾って、他はStateをそのまま返します。\n<span class=\"gi\">+     case CounterActionTypes.CountIncrement:\n</span>// Stateを変更する場合は、Stateがイミュータブルになるように元のStateには変更を加えず\n// Object.assingで新規オブジェクトを作るようにします。\n<span class=\"gi\">+       return Object.assign({}, { ...state, count : state.count + 1 });\n+     case CounterActionTypes.CountDecrement:\n+       return Object.assign({}, { ...state, count : state.count - 1 });\n</span>    default:\n      return state;\n  }\n}\n\n// コンポーネントでStateのCountを取得するための関数を定義します。\n// Storeの方にも定義しますが、ここでは本ファイルで定義している\n// Stateのプロパティに関連する処理のみ定義します。\n<span class=\"gi\">+ export const getCount = (state: State) =&gt; state.count;\n</span></pre></div>\n</div>\n\n<ul>\n<li>Store</li>\n</ul>\n\n<div class=\"code-frame\" data-lang=\"diff\">\n<div class=\"code-lang\"><span class=\"bold\">src/app/counter/state/index.ts</span></div>\n<div class=\"highlight\"><pre>import {\n  ActionReducerMap,\n  createFeatureSelector,\n  createSelector,\n  MetaReducer\n} from '@ngrx/store';\n// ng gコマンド生成時は相対パスがずれている可能性があるため\n// その場合は修正する\n<span class=\"gd\">- import { environment } from '../../environments/environment';\n</span><span class=\"gi\">+ import { environment } from '../../../environments/environment';\n</span>import * as fromCounter from './counter.reducer';\n\nexport interface State {\n\n  counter: fromCounter.State;\n}\n\nexport const reducers: ActionReducerMap&lt;State&gt; = {\n\n  counter: fromCounter.reducer,\n};\n\n\nexport const metaReducers: MetaReducer&lt;State&gt;[] = !environment.production ? [] : [];\n\n// コンポーネントでStateのプロパティを取得するための関数を定義します。\n// 複数コンポーネントで使う度に定義するのは冗長なのでココで共通的に定義します。\n<span class=\"gi\">+ export const getCounterFeatureState = createFeatureSelector&lt;State&gt;('counter');\n+ export const getCounter = createSelector(getCounterFeatureState, s =&gt; s.counter);\n+ export const getCount = createSelector(getCounter, fromCounter.getCount);\n</span></pre></div>\n</div>\n\n<ul>\n<li>Component</li>\n</ul>\n\n<div class=\"code-frame\" data-lang=\"diff\">\n<div class=\"code-lang\"><span class=\"bold\">src/app/counter/counter.component.ts</span></div>\n<div class=\"highlight\"><pre>import { Component, OnInit } from '@angular/core';\n<span class=\"gi\">+ import { Observable } from 'rxjs';\n+ import { Store } from '@ngrx/store';\n</span>\n<span class=\"gi\">+ import * as CounterReducer from './state/counter.reducer';\n+ import * as CounterActions from './state/counter.actions';\n+ import { getCount } from './state';\n</span>\n<span class=\"gu\">@Component({\n</span>  selector: 'app-counter',\n  templateUrl: './counter.component.html',\n  styleUrls: ['./counter.component.css']\n})\nexport class CounterComponent implements OnInit {\n// Storeでの値変更を順次受け付けれるように型をObservableに変更します\n<span class=\"gd\">-   count = 0;\n</span><span class=\"gi\">+   count$: Observable&lt;number&gt;;\n</span>\n// Storeをインジェクションします\n<span class=\"gd\">-   constructor() { }\n</span><span class=\"gi\">+   constructor(private store: Store&lt;CounterReducer.State&gt;) {\n</span>// Storeからカウンタを取得します\n<span class=\"gi\">+     this.count$ = store.select(getCount);\n+  }\n</span>\n  ngOnInit() {\n  }\n\n  increment() {\n// インクリメントの実処理はカウンタのReducerに任せるので\n// ここではActionをdispatchするだけです。\n<span class=\"gd\">-     this.count = this.count + 1;\n</span><span class=\"gi\">+     this.store.dispatch(new CounterActions.CountIncrement());\n</span>  }\n\n  decrement() {\n<span class=\"gd\">-     this.count = this.count - 1;\n</span><span class=\"gi\">+     this.store.dispatch(new CounterActions.CountDecrement());\n</span>  }\n\n}\n</pre></div>\n</div>\n\n<ul>\n<li>ConponentのHTML</li>\n</ul>\n\n<div class=\"code-frame\" data-lang=\"diff\">\n<div class=\"code-lang\"><span class=\"bold\">src/app/counter/counter.component.html</span></div>\n<div class=\"highlight\"><pre>&lt;button (click)=\"increment()\"&gt;+&lt;/button&gt;\n&lt;button (click)=\"decrement()\"&gt;-&lt;/button&gt;\n&lt;!-- 変数名と型が変わったのでHTMLも若干修正します --&gt;\n<span class=\"gd\">- &lt;div&gt;Count: {{count }}&lt;/div&gt;\n</span><span class=\"gi\">+ &lt;div&gt;Count: {{count$ | async }}&lt;/div&gt;\n</span></pre></div>\n</div>\n\n<ul>\n<li>Webアプリを立ち上げてみます。</li>\n</ul>\n\n<div class=\"code-frame\" data-lang=\"terminal\"><div class=\"highlight\"><pre><span class=\"gp\">$</span> ng serve <span class=\"nt\">-o</span>\n</pre></div></div>\n\n<ul>\n<li>開発者ツールなどで全くエラーが出ていなければ成功です。見た目は変わっていませんが、Countは<code>@ngrx/store</code>で管理されるようになっています。</li>\n</ul>\n\n<p><a href=\"https://camo.qiitausercontent.com/e4f3b6b6888e2f7e618fc6587c88775f7b161624/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f34393931352f64353036626336652d636463652d346430302d313130392d3261663966343738303636332e706e67\" target=\"_blank\" rel=\"nofollow noopener\"><img src=\"https://camo.qiitausercontent.com/e4f3b6b6888e2f7e618fc6587c88775f7b161624/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f34393931352f64353036626336652d636463652d346430302d313130392d3261663966343738303636332e706e67\" alt=\"スクリーンショット 2018-07-30 0.59.12.png\" data-canonical-src=\"https://qiita-image-store.s3.amazonaws.com/0/49915/d506bc6e-cdce-4d00-1109-2af9f4780663.png\"></a></p>\n\n<h2>\n<span id=\"補足ストアとストア登録方法\" class=\"fragment\"></span><a href=\"#%E8%A3%9C%E8%B6%B3%E3%82%B9%E3%83%88%E3%82%A2%E3%81%A8%E3%82%B9%E3%83%88%E3%82%A2%E7%99%BB%E9%8C%B2%E6%96%B9%E6%B3%95\"><i class=\"fa fa-link\"></i></a>補足：ストアとストア登録方法</h2>\n\n<p>ストアとストア登録処理はボイラープレートで生成するのでココで改めて説明します。</p>\n\n<p><strong>まずはルートのストアです。</strong><br>\nストアは<code>src/app/state/index.ts</code>に作成されます。<br>\n中身を見るとわかりますが、実態はReducerを集約したActionReducerMapです。<br>\nReducerを新しく作成した時は、このマップにどんどん追加していきます。</p>\n\n<div class=\"code-frame\" data-lang=\"ts\">\n<div class=\"code-lang\"><span class=\"bold\">src/app/state/index.ts</span></div>\n<div class=\"highlight\"><pre><span class=\"k\">import</span> <span class=\"p\">{</span>\n  <span class=\"nx\">ActionReducer</span><span class=\"p\">,</span>\n  <span class=\"nx\">ActionReducerMap</span><span class=\"p\">,</span>\n  <span class=\"nx\">createFeatureSelector</span><span class=\"p\">,</span>\n  <span class=\"nx\">createSelector</span><span class=\"p\">,</span>\n  <span class=\"nx\">MetaReducer</span>\n<span class=\"p\">}</span> <span class=\"k\">from</span> <span class=\"s1\">'@ngrx/store'</span><span class=\"p\">;</span>\n<span class=\"k\">import</span> <span class=\"p\">{</span> <span class=\"nx\">environment</span> <span class=\"p\">}</span> <span class=\"k\">from</span> <span class=\"s1\">'../../environments/environment'</span><span class=\"p\">;</span>\n\n<span class=\"k\">export</span> <span class=\"kr\">interface</span> <span class=\"nx\">State</span> <span class=\"p\">{</span>\n\n<span class=\"p\">}</span>\n\n<span class=\"k\">export</span> <span class=\"kd\">const</span> <span class=\"nx\">reducers</span><span class=\"p\">:</span> <span class=\"nx\">ActionReducerMap</span><span class=\"o\">&lt;</span><span class=\"nx\">State</span><span class=\"o\">&gt;</span> <span class=\"o\">=</span> <span class=\"p\">{</span>\n  <span class=\"c1\">// ココにReducerが追加されていきます。</span>\n  <span class=\"c1\">// 今回のチュートリアルではルートのストアに１つもReducerを定義していないので空っぽです。</span>\n<span class=\"p\">};</span>\n\n\n<span class=\"k\">export</span> <span class=\"kd\">const</span> <span class=\"nx\">metaReducers</span><span class=\"p\">:</span> <span class=\"nx\">MetaReducer</span><span class=\"o\">&lt;</span><span class=\"nx\">State</span><span class=\"o\">&gt;</span><span class=\"p\">[]</span> <span class=\"o\">=</span> <span class=\"o\">!</span><span class=\"nx\">environment</span><span class=\"p\">.</span><span class=\"nx\">production</span> <span class=\"p\">?</span> <span class=\"p\">[]</span> <span class=\"p\">:</span> <span class=\"p\">[];</span>\n\n</pre></div>\n</div>\n\n<p>ストアをモジュールに登録するには下記のように<code>StoreModule.forRoot</code>を使います(ボイラープレートでやってくれます)</p>\n\n<div class=\"code-frame\" data-lang=\"ts\">\n<div class=\"code-lang\"><span class=\"bold\">src/app/app.module.ts</span></div>\n<div class=\"highlight\"><pre><span class=\"p\">@</span><span class=\"nd\">NgModule</span><span class=\"p\">({</span>\n  <span class=\"c1\">// ・・・</span>\n  <span class=\"na\">imports</span><span class=\"p\">:</span> <span class=\"p\">[</span>\n    <span class=\"c1\">// ・・・</span>\n    <span class=\"nx\">StoreModule</span><span class=\"p\">.</span><span class=\"nx\">forRoot</span><span class=\"p\">(</span><span class=\"nx\">reducers</span><span class=\"p\">,</span> <span class=\"p\">{</span> <span class=\"nx\">metaReducers</span> <span class=\"p\">}),</span>\n    <span class=\"o\">!</span><span class=\"nx\">environment</span><span class=\"p\">.</span><span class=\"nx\">production</span> <span class=\"p\">?</span> <span class=\"nx\">StoreDevtoolsModule</span><span class=\"p\">.</span><span class=\"nx\">instrument</span><span class=\"p\">()</span> <span class=\"p\">:</span> <span class=\"p\">[]</span>\n    <span class=\"c1\">// ・・・</span>\n  <span class=\"p\">],</span>\n  <span class=\"c1\">// ・・・</span>\n<span class=\"p\">})</span>\n<span class=\"k\">export</span> <span class=\"kd\">class</span> <span class=\"nx\">AppModule</span> <span class=\"p\">{</span> <span class=\"p\">}</span>\n\n</pre></div>\n</div>\n\n<p><strong>次にカウンタのストアに関してです。</strong><br>\nこちらもルートの場合とほぼ同じです。</p>\n\n<div class=\"code-frame\" data-lang=\"ts\">\n<div class=\"code-lang\"><span class=\"bold\">src/app/counter/state/index.ts</span></div>\n<div class=\"highlight\"><pre><span class=\"c1\">// ・・・</span>\n<span class=\"k\">export</span> <span class=\"kd\">const</span> <span class=\"nx\">reducers</span><span class=\"p\">:</span> <span class=\"nx\">ActionReducerMap</span><span class=\"o\">&lt;</span><span class=\"nx\">State</span><span class=\"o\">&gt;</span> <span class=\"o\">=</span> <span class=\"p\">{</span>\n  <span class=\"c1\">// カウンタのReducerをマップに登録しています。</span>\n  <span class=\"na\">counter</span><span class=\"p\">:</span> <span class=\"nx\">fromCounter</span><span class=\"p\">.</span><span class=\"nx\">reducer</span><span class=\"p\">,</span>\n<span class=\"p\">};</span>\n\n<span class=\"k\">export</span> <span class=\"kd\">const</span> <span class=\"nx\">metaReducers</span><span class=\"p\">:</span> <span class=\"nx\">MetaReducer</span><span class=\"o\">&lt;</span><span class=\"nx\">State</span><span class=\"o\">&gt;</span><span class=\"p\">[]</span> <span class=\"o\">=</span> <span class=\"o\">!</span><span class=\"nx\">environment</span><span class=\"p\">.</span><span class=\"nx\">production</span> <span class=\"p\">?</span> <span class=\"p\">[]</span> <span class=\"p\">:</span> <span class=\"p\">[];</span>\n<span class=\"c1\">// ・・・</span>\n</pre></div>\n</div>\n\n<p>ただ登録は<code>StoreModule.forFeature</code>を使います。<br>\nこのメソッドは、機能毎に状態管理する時に使うもので、ルートのストアに指定した名前で登録されます。使う時になったら遅延ロードしてくれる機能を持っています。</p>\n\n<div class=\"code-frame\" data-lang=\"ts\">\n<div class=\"code-lang\"><span class=\"bold\">src/app/counter/counter.module.ts</span></div>\n<div class=\"highlight\"><pre><span class=\"c1\">// ・・・</span>\n<span class=\"k\">import</span> <span class=\"o\">*</span> <span class=\"k\">as</span> <span class=\"nx\">fromCounter</span> <span class=\"k\">from</span> <span class=\"s1\">'./state'</span><span class=\"p\">;</span>\n<span class=\"c1\">// ・・・</span>\n<span class=\"p\">@</span><span class=\"nd\">NgModule</span><span class=\"p\">({</span>\n  <span class=\"na\">imports</span><span class=\"p\">:</span> <span class=\"p\">[</span>\n    <span class=\"c1\">// ・・・</span>\n    <span class=\"c1\">// アプリ全体のストアにcounterという名前で登録します</span>\n    <span class=\"nx\">StoreModule</span><span class=\"p\">.</span><span class=\"nx\">forFeature</span><span class=\"p\">(</span><span class=\"s1\">'counter'</span><span class=\"p\">,</span> <span class=\"nx\">fromCounter</span><span class=\"p\">.</span><span class=\"nx\">reducers</span><span class=\"p\">,</span> <span class=\"p\">{</span> <span class=\"na\">metaReducers</span><span class=\"p\">:</span> <span class=\"nx\">fromCounter</span><span class=\"p\">.</span><span class=\"nx\">metaReducers</span> <span class=\"p\">})</span>\n    <span class=\"c1\">// ・・・</span>\n  <span class=\"p\">],</span>\n  <span class=\"c1\">// ・・・</span>\n<span class=\"p\">})</span>\n<span class=\"k\">export</span> <span class=\"kd\">class</span> <span class=\"nx\">CounterModule</span> <span class=\"p\">{</span> <span class=\"p\">}</span>\n\n</pre></div>\n</div>\n\n<h2>\n<span id=\"まとめ\" class=\"fragment\"></span><a href=\"#%E3%81%BE%E3%81%A8%E3%82%81\"><i class=\"fa fa-link\"></i></a>まとめ</h2>\n\n<p>以上で<code>@ngrx/schematics</code>を使った<code>@ngrx/store</code>のチュートリアルは終了です。<br>\n<code>ngrx</code>ライブラリは他にも<code>@ngrx/router-store</code>、<code>@ngrx/entity</code>、<code>@ngrx/effect</code>があるので、<br>\n今回のアプリをベースに拡張し、理解を深めてみるのも良いかもしれません。</p>\n\n<p>AngularはVue.jsなどと比較するとボイラープレートが多くなってしまいます。<br>\nしかし、ソースコード自動生成機能が充実しているので、けっこう便利なフレームワークです！<br>\nあまり周りでAngular使ってる人がいなくて寂しいのですが、、、、皆さん是非Angular使いましょう！</p>\n\n<h2>\n<span id=\"参考\" class=\"fragment\"></span><a href=\"#%E5%8F%82%E8%80%83\"><i class=\"fa fa-link\"></i></a>参考</h2>\n\n<ul>\n<li>GitHub\n\n<ul>\n<li>\n<a href=\"https://github.com/ngrx/platform/blob/master/docs/store/README.md#ngrxstore\" rel=\"nofollow noopener\" target=\"_blank\">@ngrx/store</a>\n\n<ul>\n<li>公式ページ。サンプルは少し古いですが、ドキュメントは充実しています。</li>\n</ul>\n</li>\n<li>\n<a href=\"https://github.com/ngrx/platform/blob/master/docs/schematics/README.md\" rel=\"nofollow noopener\" target=\"_blank\">@ngrx/schematics</a>\n\n<ul>\n<li>各リンクに行くと、コマンドのオプションの説明などが記載されています。</li>\n</ul>\n</li>\n</ul>\n</li>\n<li>Medium\n\n<ul>\n<li>\n<a href=\"https://blog.nrwl.io/managing-state-in-angular-applications-22b75ef5625f\" rel=\"nofollow noopener\" target=\"_blank\">Managing State in Angular Applications</a>\n\n<ul>\n<li>Angularで状態管理する時のベストプラクティスを検討し、最終的に@ngrx/storeを紹介している記事です。ソースコードもGitHubにあり、大変参考になります。</li>\n</ul>\n</li>\n</ul>\n</li>\n<li>Qiita\n\n<ul>\n<li>\n<a href=\"https://qiita.com/puku0x/items/0a8e7224761dc549bd06\" id=\"reference-55d4d1f3588dbe22005a\">@ngrx/storeと@ngrx/effectsの使い方</a>\n\n<ul>\n<li>GitHubに<a href=\"https://github.com/puku0x/ngrx-todo\" rel=\"nofollow noopener\" target=\"_blank\">サンプル</a>もありコード例が多く大変参考になりました。</li>\n</ul>\n</li>\n<li>\n<a href=\"https://qiita.com/musou1500/items/8003c4a3f2b2e80d919f\" id=\"reference-0b88f55e95af744439cc\">@ngrx/schematicsを触ってみる</a>\n\n<ul>\n<li>\n<code>@ngrx/schematics</code>の使い方が網羅されており参考になりました。</li>\n</ul>\n</li>\n<li>\n<a href=\"https://qiita.com/gen2-gk/items/5e5c5b81243def8edc2c#ngrx-%E9%96%A2%E9%80%A3%E3%81%AE%E3%83%95%E3%82%A1%E3%82%A4%E3%83%AB%E3%81%AF1%E3%81%A4%E3%81%AE%E3%83%87%E3%82%A3%E3%83%AC%E3%82%AF%E3%83%88%E3%83%AA%E3%81%AB%E3%81%BE%E3%81%A8%E3%82%81%E3%82%8B\" id=\"reference-00af0c3c5f2c814f6e6e\">ngrxでハマったポイント</a>\n\n<ul>\n<li>ngrx関連資産をstoreフォルダ配下に集約するという知見はココを参考にさせていただきました。</li>\n</ul>\n</li>\n<li>\n<a href=\"https://qiita.com/kouMatsumoto/items/c8297466c1824953632f\" id=\"reference-2bdc06375583d7c16351\">ngrx紹介</a>\n\n<ul>\n<li>ngrxを知るきっかけになった記事です。</li>\n</ul>\n</li>\n</ul>\n</li>\n</ul>\n","fields":{"title":"10分でできる！ @ngrx/storeチュートリアル with @ngrx/schematics","excerpt":"なにこれAngularで状態管理する方法をざっくり把握するためのチュートリアルです。@ngrx/storeベースの簡単なアプリ（数をカウントするアプリ）を作成します。作るだけなら10分程度で出来上がるので、とりあえず手を動かしてngrxを最...","date":"2018-07-30T18:01:02+09:00"},"user":{"id":"Takumon","profile_image_url":"https://qiita-image-store.s3.amazonaws.com/0/49915/profile-images/1488080194","description":"SIer"}}},"pageContext":{"slug":"/41febdc6-bf5d-50b8-a695-3c017b8f766a/","previous":{"fields":{"slug":"/7780e313-8bda-5534-99aa-37bf47e9deb3/","title":"GitBucketのissueで作業量を設定できるプラグイン","date":"2017-12-31T23:49:04+09:00","excerpt":"== 2018/4/7 追記 ==========================================本記事ではChrome拡張とDockerによって実現していましたが、その後GitBucket Plugin化しました。gitb..."},"id":"7780e313-8bda-5534-99aa-37bf47e9deb3","title":"GitBucketのissueで作業量を設定できるプラグイン","rendered_body":"<p>== 2018/4/7 追記 ==========================================<br>\n本記事ではChrome拡張とDockerによって実現していましたが、<br>\nその後GitBucket Plugin化しました。</p>\n\n<p><a href=\"https://github.com/Takumon/gitbucket-issue-estimation-plugin\" rel=\"nofollow noopener\" target=\"_blank\">gitbucket-issue-estimation-plugin</a></p>\n\n<p><a href=\"https://github.com/Takumon/gitbucket-issue-estimation-plugin/releases/tag/0.1\" rel=\"nofollow noopener\" target=\"_blank\">リリースページ</a>からjarファイルをダウンロードして<code>&lt;GITBUCKET_HOME&gt;/plugins/</code>に置くだけで導入可能です。<br>\n== =======================================================</p>\n\n<p>Git Advent Calendarが埋まっていなかったので、大晦日ですが代わりに投稿させていただきました。</p>\n\n<h2>\n<span id=\"はじめに\" class=\"fragment\"></span><a href=\"#%E3%81%AF%E3%81%98%E3%82%81%E3%81%AB\"><i class=\"fa fa-link\"></i></a>はじめに</h2>\n\n<p><a href=\"https://gitbucket.github.io/\" rel=\"nofollow noopener\" target=\"_blank\">GitBucket</a>のマイルストーンの進捗率はissueの件数ベースなので、issueごとに作業量のバラつきがあったりすると現実的な進捗率と乖離してしまいます。</p>\n\n<p>そこで今回はChrome拡張とDockerイメージを作成して、<br>\nissueに作業量を設定できるようにして、マイルストーンで作業量ベースの進捗率を確認できるようにしました。</p>\n\n<p>Chrome拡張とDockerイメージはどちらも公開しているので簡単に導入できます。是非試してみてください。</p>\n\n<ul>\n<li>\n<em>Chrome拡張</em>\n\n<ul>\n<li><a href=\"https://chrome.google.com/webstore/detail/gitbucket-issue-estimatio/hfnjaoikgpephpfbniemgfpkcbafgidj?hl=ja\" rel=\"nofollow noopener\" target=\"_blank\">gitbucket-issue-estimation-client</a></li>\n</ul>\n</li>\n<li>\n<em>Dockerイメージ</em>\n\n<ul>\n<li><a href=\"https://hub.docker.com/r/takumon/gitbucket-issue-estimation-server/\" rel=\"nofollow noopener\" target=\"_blank\">gitbucket-issue-estimation-server</a></li>\n</ul>\n</li>\n</ul>\n\n<h2>\n<span id=\"導入すると\" class=\"fragment\"></span><a href=\"#%E5%B0%8E%E5%85%A5%E3%81%99%E3%82%8B%E3%81%A8\"><i class=\"fa fa-link\"></i></a>導入すると</h2>\n\n<p><a href=\"https://gitbucket.github.io/\" rel=\"nofollow noopener\" target=\"_blank\">GitBucket</a>のissueで作業量が設定できるようになり、<br>\n<a href=\"https://camo.qiitausercontent.com/f13706aedeb42c177c1f4f57975596b5ff002407/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f34393931352f36313030366263392d326438322d663062302d363461322d3037393233633737333963372e706e67\" target=\"_blank\" rel=\"nofollow noopener\"><img src=\"https://camo.qiitausercontent.com/f13706aedeb42c177c1f4f57975596b5ff002407/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f34393931352f36313030366263392d326438322d663062302d363461322d3037393233633737333963372e706e67\" alt=\"導入後_イシュー画面.png\" data-canonical-src=\"https://qiita-image-store.s3.amazonaws.com/0/49915/61006bc9-2d82-f0b0-64a2-07923c7739c7.png\"></a></p>\n\n<p>マイルストーンで作業量ベースの進捗率が見れるようになります。<br>\n<a href=\"https://camo.qiitausercontent.com/b86e2b23bc0f4b9fae45b07bfd568b11bc005121/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f34393931352f36613462383664382d323937332d656338342d383662632d3632383965343262643636362e706e67\" target=\"_blank\" rel=\"nofollow noopener\"><img src=\"https://camo.qiitausercontent.com/b86e2b23bc0f4b9fae45b07bfd568b11bc005121/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f34393931352f36613462383664382d323937332d656338342d383662632d3632383965343262643636362e706e67\" alt=\"導入後_マイルストーン画面.png\" data-canonical-src=\"https://qiita-image-store.s3.amazonaws.com/0/49915/6a4b86d8-2973-ec84-86bc-6289e42bd666.png\"></a></p>\n\n<p>またissue一覧画面でも作業量を設定できるようになります。<br>\n<a href=\"https://camo.qiitausercontent.com/7c2ee31427698b7fe01b30f25b8e31b7e3115e2d/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f34393931352f39633835386533622d356463312d313432342d663334662d3562323661633665323066642e706e67\" target=\"_blank\" rel=\"nofollow noopener\"><img src=\"https://camo.qiitausercontent.com/7c2ee31427698b7fe01b30f25b8e31b7e3115e2d/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f34393931352f39633835386533622d356463312d313432342d663334662d3562323661633665323066642e706e67\" alt=\"導入後_イシュー一覧画面.png\" data-canonical-src=\"https://qiita-image-store.s3.amazonaws.com/0/49915/9c858e3b-5dc1-1424-f34f-5b26ac6e20fd.png\"></a></p>\n\n<h2>\n<span id=\"導入手順\" class=\"fragment\"></span><a href=\"#%E5%B0%8E%E5%85%A5%E6%89%8B%E9%A0%86\"><i class=\"fa fa-link\"></i></a>導入手順</h2>\n\n<h3>\n<span id=\"1-docker側\" class=\"fragment\"></span><a href=\"#1-docker%E5%81%B4\"><i class=\"fa fa-link\"></i></a>1. Docker側</h3>\n\n<p>GitBucketと同じネットワーク環境に作業量保存用のサーバを立てます。Dockerが導入されていることが前提です。</p>\n\n<ul>\n<li>docker-compose.ymlを作成（MongoDBのボリューム用にdocker-compose.ymlファイルと同階層にdbフォルダを作成してください）</li>\n</ul>\n\n<div class=\"code-frame\" data-lang=\"docker\">\n<div class=\"code-lang\"><span class=\"bold\">docker-compose.yml</span></div>\n<div class=\"highlight\"><pre>version: \"3.3\"\nservices:\n  server:\n    image: takumon/gitbucket-issue-estimation-server\n    ports:\n      - 3000:3000\n    depends_on:\n      - mongo\n    links:\n      - mongo\n    environment:\n      MONGO_URL: mongodb://mongo:27017/test\n  mongo:\n    image: mongo:3.5.12\n    ports:\n      - 27017:27017\n    volumes:\n      - ./db:/data/db\n</pre></div>\n</div>\n\n<ul>\n<li>docker-conpose.ymlがあるフォルダで下記を実行</li>\n</ul>\n\n<div class=\"code-frame\" data-lang=\"bash\"><div class=\"highlight\"><pre><span class=\"nv\">$ </span>docker-compose up <span class=\"nt\">-d</span>\n</pre></div></div>\n\n<h3>\n<span id=\"2-gitbucket側\" class=\"fragment\"></span><a href=\"#2-gitbucket%E5%81%B4\"><i class=\"fa fa-link\"></i></a>2. GitBucket側</h3>\n\n<p>Chrome拡張をインストールする前に、GitBucketのトークンを発行してメモしておきます。</p>\n\n<ul>\n<li><p>GitBucketヘッダー右上アイコン &gt; Account Setting を選択<br>\n<a href=\"https://camo.qiitausercontent.com/b06f383ce5768cc2c9b84b7bcd92537cbd0f94ef/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f34393931352f34323637363166372d633139392d653139652d633631392d6131383264643035623065612e706e67\" target=\"_blank\" rel=\"nofollow noopener\"><img src=\"https://camo.qiitausercontent.com/b06f383ce5768cc2c9b84b7bcd92537cbd0f94ef/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f34393931352f34323637363166372d633139392d653139652d633631392d6131383264643035623065612e706e67\" alt=\"導入手順_GitBucketトークン発行_1.png\" data-canonical-src=\"https://qiita-image-store.s3.amazonaws.com/0/49915/426761f7-c199-e19e-c619-a182dd05b0ea.png\"></a><br>\n<br></p></li>\n<li><p>左メニュー Applicationsを選択し、Generate new tokenのToken descriptionにトークンの概要を記載、その後<code>Generate token</code>ボタンをクリック<br>\n<a href=\"https://camo.qiitausercontent.com/e21ff3f5214f3833cc66ed4d9cf2037b31c6d02f/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f34393931352f64313836663730322d663764622d353231652d366436642d6564636133313836643931352e706e67\" target=\"_blank\" rel=\"nofollow noopener\"><img src=\"https://camo.qiitausercontent.com/e21ff3f5214f3833cc66ed4d9cf2037b31c6d02f/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f34393931352f64313836663730322d663764622d353231652d366436642d6564636133313836643931352e706e67\" alt=\"導入手順_GitBucketトークン発行_2.png\" data-canonical-src=\"https://qiita-image-store.s3.amazonaws.com/0/49915/d186f702-f7db-521e-6d6d-edca3186d915.png\"></a><br>\n<br></p></li>\n<li><p>発行されたトークンをコピー（後の手順で使います）<br>\n<a href=\"https://camo.qiitausercontent.com/d46de4cb3222a8304001bbc2f89abc1e14b2cba8/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f34393931352f30633830346661662d666431332d383064322d386365392d6535303439323262623534612e706e67\" target=\"_blank\" rel=\"nofollow noopener\"><img src=\"https://camo.qiitausercontent.com/d46de4cb3222a8304001bbc2f89abc1e14b2cba8/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f34393931352f30633830346661662d666431332d383064322d386365392d6535303439323262623534612e706e67\" alt=\"導入手順_GitBucketトークン発行_３.png\" data-canonical-src=\"https://qiita-image-store.s3.amazonaws.com/0/49915/0c804faf-fd13-80d2-8ce9-e504922bb54a.png\"></a></p></li>\n</ul>\n\n<h3>\n<span id=\"3-chrome-extension側\" class=\"fragment\"></span><a href=\"#3-chrome-extension%E5%81%B4\"><i class=\"fa fa-link\"></i></a>3. Chrome Extension側</h3>\n\n<ul>\n<li><p>Chromeを開きChromeウェブストアで<a href=\"https://chrome.google.com/webstore/detail/gitbucket-issue-estimatio/hfnjaoikgpephpfbniemgfpkcbafgidj?hl=ja\" rel=\"nofollow noopener\" target=\"_blank\">gitbucket-issue-estimation-client</a>をインストール<br>\n<a href=\"https://camo.qiitausercontent.com/b7b7e21c6391cd1436ad73eb356bdec6f93bb3b4/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f34393931352f63336365666639382d313731372d626566302d306465392d3836313736303638613635632e706e67\" target=\"_blank\" rel=\"nofollow noopener\"><img src=\"https://camo.qiitausercontent.com/b7b7e21c6391cd1436ad73eb356bdec6f93bb3b4/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f34393931352f63336365666639382d313731372d626566302d306465392d3836313736303638613635632e706e67\" alt=\"導入手順_GitBucket_拡張インストール_4.png\" data-canonical-src=\"https://qiita-image-store.s3.amazonaws.com/0/49915/c3ceff98-1717-bef0-0de9-86176068a65c.png\"></a><br>\n<br></p></li>\n<li>\n<p>右上の「E」アイコンをクリック、下記情報を入力し<code>Save</code>ボタンクリック</p>\n\n<ul>\n<li>\n<strong>gitbucket-issue-estimation-server URL</strong>\n\n<ul>\n<li>サーバ側の手順で立てたサーバのURL 例： <code>http://127.0.0.1:3000</code> </li>\n</ul>\n</li>\n<li>\n<strong>GitBucket Token</strong>\n\n<ul>\n<li>GitBucket側の手順でメモしたトークン\n<a href=\"https://camo.qiitausercontent.com/be5ab7568b1a4eee506be3546cae994189e34d15/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f34393931352f66366162333739622d613835322d366562342d663634382d6131346437353139663365622e706e67\" target=\"_blank\" rel=\"nofollow noopener\"><img src=\"https://camo.qiitausercontent.com/be5ab7568b1a4eee506be3546cae994189e34d15/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f34393931352f66366162333739622d613835322d366562342d663634382d6131346437353139663365622e706e67\" alt=\"導入手順_GitBucketトークン発行_4.png\" data-canonical-src=\"https://qiita-image-store.s3.amazonaws.com/0/49915/f6ab379b-a852-6eb4-f648-a14d7519f3eb.png\"></a>\n<br>\n</li>\n</ul>\n</li>\n</ul>\n</li>\n</ul>\n\n<h2>\n<span id=\"具体的な仕組み\" class=\"fragment\"></span><a href=\"#%E5%85%B7%E4%BD%93%E7%9A%84%E3%81%AA%E4%BB%95%E7%B5%84%E3%81%BF\"><i class=\"fa fa-link\"></i></a>具体的な仕組み</h2>\n\n<p>Docker側はMongoDBとNode.jsを使っていて、issueの作業量の検索登録・更新・削除APIを提供しているだけです。<br>\nChrome拡張側で下記のように全体をコントロールしています。</p>\n\n<p><strong>(1)</strong> ・・・　GitBucketの画面からissueとマイルストーンの情報を取得、issueの作業量、作業量ベースの進捗率を画面に挿入<br>\n<strong>(2)</strong> ・・・　画面から取得したissueの情報をもとに詳細情報を取得<br>\n<strong>(3)</strong> ・・・　issueの作業量を検索・登録・更新・削除</p>\n\n<p><a href=\"https://camo.qiitausercontent.com/d5736e48c469204a17566c6cfb4003420add2c8e/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f34393931352f63616435323063332d376439632d666134372d326262302d3732633534663638383233362e706e67\" target=\"_blank\" rel=\"nofollow noopener\"><img src=\"https://camo.qiitausercontent.com/d5736e48c469204a17566c6cfb4003420add2c8e/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f34393931352f63616435323063332d376439632d666134372d326262302d3732633534663638383233362e706e67\" alt=\"全体像.png\" data-canonical-src=\"https://qiita-image-store.s3.amazonaws.com/0/49915/cad520c3-7d9c-fa47-2bb0-72c54f688236.png\"></a></p>\n\n<h2>\n<span id=\"chrome拡張作成時にgitbucket-apiまわりで躓いたこと\" class=\"fragment\"></span><a href=\"#chrome%E6%8B%A1%E5%BC%B5%E4%BD%9C%E6%88%90%E6%99%82%E3%81%ABgitbucket-api%E3%81%BE%E3%82%8F%E3%82%8A%E3%81%A7%E8%BA%93%E3%81%84%E3%81%9F%E3%81%93%E3%81%A8\"><i class=\"fa fa-link\"></i></a>Chrome拡張作成時にGitBucket APIまわりで躓いたこと</h2>\n\n<p><a href=\"https://github.com/gitbucket/gitbucket/wiki/API-WebHook\" rel=\"nofollow noopener\" target=\"_blank\">GitBucketのAPI</a>は<a href=\"https://developer.github.com/v3/\" rel=\"nofollow noopener\" target=\"_blank\">GithubのREST API v3</a>に準拠していますが、一部実装されていない部分があったので、Chrome拡張作成時に躓きました。</p>\n\n<h3>\n<span id=\"stateallが効かない\" class=\"fragment\"></span><a href=\"#stateall%E3%81%8C%E5%8A%B9%E3%81%8B%E3%81%AA%E3%81%84\"><i class=\"fa fa-link\"></i></a><code>state=all</code>が効かない</h3>\n\n<p>未解決issueと解決済issue両方をいっぺんに取得したかったのですが、GitBucketのAPIでは<code>state=all</code>が効きません。そのため<code>state=open</code>と<code>state=closed</code>を指定して２回に分けて取得する実装にしました。</p>\n\n<h4>\n<span id=\"per_pageが効かない1度に25件が最大\" class=\"fragment\"></span><a href=\"#per_page%E3%81%8C%E5%8A%B9%E3%81%8B%E3%81%AA%E3%81%841%E5%BA%A6%E3%81%AB25%E4%BB%B6%E3%81%8C%E6%9C%80%E5%A4%A7\"><i class=\"fa fa-link\"></i></a><code>per_page</code>が効かない（1度に25件が最大）</h4>\n\n<p>GitBucketのAPIでは<code>per_page</code>（検索時の１ページあたりの件数）が実装されていません。<br>\nそのためマイルストーンに紐づくissue取得時は、１ページ目を検索して取得結果が25件の場合は次のページも検索するような実装にしました。</p>\n\n<h4>\n<span id=\"closed_atクローズ日が取得できない\" class=\"fragment\"></span><a href=\"#closed_at%E3%82%AF%E3%83%AD%E3%83%BC%E3%82%BA%E6%97%A5%E3%81%8C%E5%8F%96%E5%BE%97%E3%81%A7%E3%81%8D%E3%81%AA%E3%81%84\"><i class=\"fa fa-link\"></i></a><code>closed_at</code>（クローズ日）が取得できない</h4>\n\n<p>Chrome拡張作成当初は、バーンダウンチャートを表示しようと思っていたのですが、issueのクローズ日が取得出来ないので断念しました。</p>\n\n<h4>\n<span id=\"-参考にさせていただいたサイト\" class=\"fragment\"></span><a href=\"#-%E5%8F%82%E8%80%83%E3%81%AB%E3%81%95%E3%81%9B%E3%81%A6%E3%81%84%E3%81%9F%E3%81%A0%E3%81%84%E3%81%9F%E3%82%B5%E3%82%A4%E3%83%88\"><i class=\"fa fa-link\"></i></a>※ 参考にさせていただいたサイト</h4>\n\n<ul>\n<li><a href=\"https://qiita.com/5zm/items/b0b620cdeb9596108418#1%E3%83%9A%E3%83%BC%E3%82%B8%E3%81%8C%E6%9C%80%E5%A4%A725%E4%BB%B6%E3%81%A7%E5%85%A8issue%E3%81%8C%E5%8F%96%E5%BE%97%E3%81%A7%E3%81%8D%E3%81%AA%E3%81%84\" id=\"reference-1c197ca99a2ee070efac\">PythonでGitBucketのIssueをExcel出力する（その後）</a></li>\n<li><a href=\"https://qiita.com/5zm/items/57d7abca8e0d447e326d#2-gitbucket%E3%81%AEapi%E3%82%92%E5%88%A9%E7%94%A8%E3%81%97%E3%81%A6issues%E3%82%92%E5%8F%96%E5%BE%97%E3%81%99%E3%82%8B%E3%83%97%E3%83%AD%E3%82%B0%E3%83%A9%E3%83%A0\" id=\"reference-7d56ea50a58cb24addc5\">PythonでGitBucketのIssueをExcel出力する（API呼び出し編）</a></li>\n</ul>\n\n<h2>\n<span id=\"まとめ\" class=\"fragment\"></span><a href=\"#%E3%81%BE%E3%81%A8%E3%82%81\"><i class=\"fa fa-link\"></i></a>まとめ</h2>\n\n<p>本来こういう追加機能はGitBucketプラグインで作るべきなのかもしれませんが、今回はChrome拡張とDockerイメージで実現してみました。<br>\nChrome拡張は任意の画面にJavaScriptやCSSを差し込めるので、既存のWebサービスををちょっと便利にするのにはうってつけですね。</p>\n","body":"== 2018/4/7 追記 ==========================================\n本記事ではChrome拡張とDockerによって実現していましたが、\nその後GitBucket Plugin化しました。\n\n[gitbucket-issue-estimation-plugin](https://github.com/Takumon/gitbucket-issue-estimation-plugin)\n\n[リリースページ](https://github.com/Takumon/gitbucket-issue-estimation-plugin/releases/tag/0.1)からjarファイルをダウンロードして`<GITBUCKET_HOME>/plugins/`に置くだけで導入可能です。\n== =======================================================\n\n\nGit Advent Calendarが埋まっていなかったので、大晦日ですが代わりに投稿させていただきました。\n\n## はじめに\n[GitBucket](https://gitbucket.github.io/)のマイルストーンの進捗率はissueの件数ベースなので、issueごとに作業量のバラつきがあったりすると現実的な進捗率と乖離してしまいます。\n\nそこで今回は\bChrome拡張とDockerイメージを作成して、\nissueに作業量を設定できるようにして、マイルストーンで作業量ベースの進捗率を確認できるようにしました。\n\nChrome拡張とDockerイメージはどちらも公開しているので簡単に導入できます。是非試してみてください。\n\n\n* *Chrome拡張*\n    * [gitbucket-issue-estimation-client](https://chrome.google.com/webstore/detail/gitbucket-issue-estimatio/hfnjaoikgpephpfbniemgfpkcbafgidj?hl=ja)\n* *Dockerイメージ*\n    * [gitbucket-issue-estimation-server](https://hub.docker.com/r/takumon/gitbucket-issue-estimation-server/)\n\n## 導入すると\n[GitBucket](https://gitbucket.github.io/)のissueで作業量が設定できるようになり、\n![導入後_イシュー画面.png](https://qiita-image-store.s3.amazonaws.com/0/49915/61006bc9-2d82-f0b0-64a2-07923c7739c7.png)\n\n\bマイルストーンで作業量ベースの進捗率が見れるようになります。\n![導入後_マイルストーン画面.png](https://qiita-image-store.s3.amazonaws.com/0/49915/6a4b86d8-2973-ec84-86bc-6289e42bd666.png)\n\nまた\bissue\b一覧画面でも作業量を設定できるようになります。\n![導入後_イシュー一覧画面.png](https://qiita-image-store.s3.amazonaws.com/0/49915/9c858e3b-5dc1-1424-f34f-5b26ac6e20fd.png)\n\n\n\n\n## 導入手順\n### 1. Docker側\nGitBucketと同じネットワーク環境に作業量\b保存用のサーバを立てます。Dockerが導入されていることが前提です。\n\n* \u001edocker-compose\b.ymlを作成（MongoDBのボリューム用にdocker-compose.ymlファイルと同階層にdbフォルダを作成してください）\n\n```docker:docker-compose.yml\nversion: \"3.3\"\nservices:\n  server:\n    image: takumon/gitbucket-issue-estimation-server\n    ports:\n      - 3000:3000\n    depends_on:\n      - mongo\n    links:\n      - mongo\n    environment:\n      MONGO_URL: mongodb://mongo:27017/test\n  mongo:\n    image: mongo:3.5.12\n    ports:\n      - 27017:27017\n    volumes:\n      - ./db:/data/db\n```\n\n* docker-conpose.ymlがあるフォルダで下記を実行\n\n```bash:\n$ docker-compose up -d\n```\n\n\n### 2. GitBucket側\nChrome拡張をインストールする前に、GitBucketの\bトークンを発行してメモしておきます。\n\n* GitBucketヘッダー右上アイコン > Account Setting\b を選択\n![導入手順_GitBucketトークン発行_1.png](https://qiita-image-store.s3.amazonaws.com/0/49915/426761f7-c199-e19e-c619-a182dd05b0ea.png)\n<br>\n\n* 左メニュー Applicationsを選択し、Generate new tokenのToken descriptionにトークンの概要を記載、その後`Generate token`ボタンをクリック\n![導入手順_GitBucketトークン発行_2.png](https://qiita-image-store.s3.amazonaws.com/0/49915/d186f702-f7db-521e-6d6d-edca3186d915.png)\n<br>\n\n* 発行されたトークンをコピー（後の手順で使います）\n![導入手順_GitBucketトークン発行_３.png](https://qiita-image-store.s3.amazonaws.com/0/49915/0c804faf-fd13-80d2-8ce9-e504922bb54a.png)\n\n\n### 3. Chrome Extension側\n* Chromeを開きChromeウェブストアで[gitbucket-issue-estimation-client](https://chrome.google.com/webstore/detail/gitbucket-issue-estimatio/hfnjaoikgpephpfbniemgfpkcbafgidj?hl=ja)をインストール\n![導入手順_GitBucket_拡張インストール_4.png](https://qiita-image-store.s3.amazonaws.com/0/49915/c3ceff98-1717-bef0-0de9-86176068a65c.png)\n<br>\n\n* \b右上の「E」アイコンをクリック、下記情報を入力し`Save`ボタンクリック\n    * **gitbucket-issue-estimation-server URL**\n        * サーバ側の手順で立てたサーバのURL 例： `http://127.0.0.1:3000` \n    * **GitBucket Token**\n        * GitBucket側の手順でメモしたトークン\n![導入手順_GitBucketトークン発行_4.png](https://qiita-image-store.s3.amazonaws.com/0/49915/f6ab379b-a852-6eb4-f648-a14d7519f3eb.png)\n<br>\n\n## 具体的な仕組み\nDocker側はMongoDBとNode.jsを使っていて、issueの作業量の検索登録・更新・削除APIを提供しているだけです。\nChrome拡張側で下記のように全体をコントロールしています。\n\n**(1)** ・・・　GitBucketの画面からissueとマイルストーンの情報を取得、issueの作業量、作業量ベースの進捗率を画面に挿入\n**(2)** ・・・　画面から取得したissueの情報をもとに詳細情報を取得\n**(3)** ・・・　issueの作業量を検索・登録・更新・削除\n\n![全体像.png](https://qiita-image-store.s3.amazonaws.com/0/49915/cad520c3-7d9c-fa47-2bb0-72c54f688236.png)\n\n\n\n## Chrome拡張作成時にGitBucket APIまわりで躓いたこと\n[GitBucketのAPI](https://github.com/gitbucket/gitbucket/wiki/API-WebHook)は[GithubのREST API v3](https://developer.github.com/v3/)に準拠していますが、一部実装されていない部分があったので、Chrome拡張作成時に躓きました。\n\n### `state=all`が効かない\n未解決issueと解決済issue両方をいっぺんに取得したかったのですが、GitBucketのAPIでは`state=all`が効きません。そのため`state=open`と`state=closed`を指定して２回に分けて取得する実装にしました。\n\n#### `per_page`が効かない（\b1度に25件が最大）\nGitBucketのAPIでは`per_page`（検索時の１ページあたりの件数）が実装されていません。\nそのためマイルストーンに紐づくissue取得時は、１ページ目を検索して取得結果が25件の場合は次のページも検索するような実装にしました。\n\n#### `closed_at`（クローズ日）が取得できない\nChrome拡張作成当初は、バーンダウンチャートを表示しようと思っていたのですが、issueのクローズ日が取得出来ないので断念しました。\n\n#### ※ 参考にさせていただいたサイト\n* [PythonでGitBucketのIssueをExcel出力する（その後）](https://qiita.com/5zm/items/b0b620cdeb9596108418#1%E3%83%9A%E3%83%BC%E3%82%B8%E3%81%8C%E6%9C%80%E5%A4%A725%E4%BB%B6%E3%81%A7%E5%85%A8issue%E3%81%8C%E5%8F%96%E5%BE%97%E3%81%A7%E3%81%8D%E3%81%AA%E3%81%84)\n* [PythonでGitBucketのIssueをExcel出力する（API呼び出し編）](https://qiita.com/5zm/items/57d7abca8e0d447e326d#2-gitbucket%E3%81%AEapi%E3%82%92%E5%88%A9%E7%94%A8%E3%81%97%E3%81%A6issues%E3%82%92%E5%8F%96%E5%BE%97%E3%81%99%E3%82%8B%E3%83%97%E3%83%AD%E3%82%B0%E3%83%A9%E3%83%A0)\n\n\n## まとめ\n本来こういう追加機能はGitBucketプラグインで作るべきなのかもしれませんが、今回はChrome拡張とDockerイメージで実現してみました。\nChrome拡張は任意の画面にJavaScriptやCSSを差し込めるので、既存のWebサービスををちょっと便利にするのにはうってつけですね。\n\n","comments_count":0,"created_at":"2017-12-31T23:49:04+09:00","likes_count":5,"reactions_count":0,"tags":[{"name":"JavaScript"},{"name":"chrome-extension"},{"name":"docker"},{"name":"GitBucket"}],"updated_at":"2018-04-07T17:56:04+09:00","url":"https://qiita.com/Takumon/items/25e19501192623165407","user":{"id":"Takumon"}},"next":{"fields":{"slug":"/f18d04ac-9b1a-5ac8-8d43-8aa3d8f746a7/","title":"Gatsbyプラグイン45選","date":"2018-10-23T08:48:23+09:00","excerpt":"なにこれReact.js製の静的サイトジェネレーター Gatsbyは、プラグインを使って簡単に機能拡張できる仕組みを持っています。公式プラグインとコミュニティ提供のものをあわせると、なんと502個もあるそうです。今回はその中でも、おすすめ4..."},"id":"f18d04ac-9b1a-5ac8-8d43-8aa3d8f746a7","title":"Gatsbyプラグイン45選","rendered_body":"\n<h2>\n<span id=\"なにこれ\" class=\"fragment\"></span><a href=\"#%E3%81%AA%E3%81%AB%E3%81%93%E3%82%8C\"><i class=\"fa fa-link\"></i></a>なにこれ</h2>\n\n<p>React.js製の静的サイトジェネレーター <a href=\"https://www.gatsbyjs.org/\" rel=\"nofollow noopener\" target=\"_blank\">Gatsby</a>は、<a href=\"https://www.gatsbyjs.org/plugins/\" rel=\"nofollow noopener\" target=\"_blank\">プラグイン</a>を使って簡単に機能拡張できる仕組みを持っています。<a href=\"https://github.com/gatsbyjs/gatsby/tree/master/packages\" rel=\"nofollow noopener\" target=\"_blank\">公式プラグイン</a>とコミュニティ提供のものをあわせると、なんと502個もあるそうです。今回はその中でも、おすすめ45個をユースケース別にご紹介します。</p>\n\n<p>※ 本記事は<a href=\"https://takumon.com/2018/10/21/\" rel=\"nofollow noopener\" target=\"_blank\">ブログ</a>の転記です。Qiitaで使えない機能（コードブロックの指定行強調表示など）の表示結果はスクリーンキャプチャにしています。HTMLでの表示結果を見たい場合は<a href=\"https://takumon.com/2018/10/21/\" rel=\"nofollow noopener\" target=\"_blank\">ブログ</a>をご覧ください。</p>\n\n<h2>\n<span id=\"ユースケース別目次\" class=\"fragment\"></span><a href=\"#%E3%83%A6%E3%83%BC%E3%82%B9%E3%82%B1%E3%83%BC%E3%82%B9%E5%88%A5%E7%9B%AE%E6%AC%A1\"><i class=\"fa fa-link\"></i></a>ユースケース別目次</h2>\n\n<p>※クリックすると説明セクションにとべます。</p>\n\n<p><strong><a href=\"#%E3%83%9E%E3%83%BC%E3%82%AF%E3%83%80%E3%82%A6%E3%83%B3%E7%B3%BB\">マークダウン系</a></strong></p>\n\n<ul>\n<li><a href=\"#gatsby-remark-prismjs\">コードブロックでシンタックスハイライトする</a></li>\n<li><a href=\"#gatsby-remark-code-titles\">コードブロックにタイトルを追加する</a></li>\n<li><a href=\"#gatsby-remark-autolink-headers\">見出しにGitHub風ホバーリンクをつける</a></li>\n<li><a href=\"#gatsby-remark-emojis\">絵文字を使う</a></li>\n<li><a href=\"#gatsby-remark-graphviz\">Graphvizでグラフを描画する</a></li>\n<li><a href=\"#gatsby-remark-katex\">数式を使う</a></li>\n<li><a href=\"#gatsby-remark-embed-snippet\">コードブロックにJavaSriptファイルなどを埋め込む</a></li>\n<li><a href=\"#gatsby-remark-copy-linked-files\">リンクされているPDFや動画などをビルド時にpublicフォルダにコピーする</a></li>\n<li><a href=\"#gatsby-remark-images\">画像をスマートに表示する</a></li>\n<li><a href=\"#gatsby-remark-responsive-iframe\">iframeタグを縦横比固定でレスポンシブ化する</a></li>\n<li><a href=\"#gatsby-remark-embed-youtube\">Youtubeを埋め込む</a></li>\n<li><a href=\"#gatsby-plugin-twitter\">Twitterの埋め込む</a></li>\n</ul>\n\n<p><strong><a href=\"#seo%E7%B3%BB\">SEO系</a></strong></p>\n\n<ul>\n<li><a href=\"#gatsby-plugin-react-helmet\">React Helmetを使う</a></li>\n<li><a href=\"#gatsby-plugin-offline\">オフライン環境でもWebサイトをスムーズに見れるようにする</a></li>\n<li><a href=\"#gatsby-plugin-manifest\">PWA対応する（manifest.webmanifestを生成する）</a></li>\n<li><a href=\"#gatsby-plugin-sitemap\">サイトマップを生成する</a></li>\n<li><a href=\"#gatsby-plugin-canonical-urls\">canonical linksを追加する</a></li>\n<li><a href=\"#gatsby-plugin-feed\">RSSフィードを生成する</a></li>\n<li><a href=\"#gatsby-plugin-robots-txt\">robots.txtを生成する</a></li>\n</ul>\n\n<p><strong><a href=\"#%E9%96%8B%E8%A3%9C%E8%A3%9C%E5%8A%A9%E7%B3%BB\">開補補助系</a></strong></p>\n\n<ul>\n<li><a href=\"#gatsby-plugin-lodash\">ビルド資産（bundle.js）のlodashのサイズ削減する</a></li>\n<li><a href=\"#gatsby-plugin-webpack-bundle-analyzer\">ビルド資産（bundle.js）の中身のサイズを可視化する</a></li>\n<li><a href=\"#gatsby-plugin-google-analytics\">Google Analyticsを使う</a></li>\n<li><a href=\"#gatsby-plugin-facebook-analytics\">Facebook Analyticsを使う</a></li>\n</ul>\n\n<p><strong><a href=\"#ui%E7%B3%BB\">UI系</a></strong></p>\n\n<ul>\n<li><a href=\"#gatsby-plugin-nprogress\">ローディング中にプログレスバー表示</a></li>\n<li><a href=\"#gatsby-plugin-catch-links\">aタグでローカル遷移時にリロードではなくヒストリーAPIで遷移</a></li>\n<li><a href=\"#gatsby-plugin-layout\">1系のレイアウト機能を2系で使う</a></li>\n</ul>\n\n<p><strong><a href=\"#%E3%83%95%E3%82%A1%E3%82%A4%E3%83%AB%E7%B3%BB\">ファイル系</a></strong></p>\n\n<ul>\n<li><a href=\"#%E3%83%95%E3%82%A1%E3%82%A4%E3%83%AB%E7%B3%BB\">JSONファイルをパースする</a></li>\n<li><a href=\"#%E3%83%95%E3%82%A1%E3%82%A4%E3%83%AB%E7%B3%BB\">XMLファイルをパースする</a></li>\n<li><a href=\"#%E3%83%95%E3%82%A1%E3%82%A4%E3%83%AB%E7%B3%BB\">Yamlファイルをパースする</a></li>\n<li><a href=\"#%E3%83%95%E3%82%A1%E3%82%A4%E3%83%AB%E7%B3%BB\">CSVファイルをパースする</a></li>\n<li><a href=\"#gatsby-source-filesystem\">ファイルを読み取んでノードを生成する</a></li>\n<li><a href=\"#gatsby-transformer-remark\">Markdownファイルをパースする</a></li>\n<li><a href=\"#gatsby-image\">画像読み込みを最適化する</a></li>\n<li><a href=\"#gatsby-transformer-sharp\">画像読み込みでImageSharpノードを生成する</a></li>\n<li><a href=\"#gatsby-plugin-sharp\">Sharp(画像圧縮ライブラリ)を使う</a></li>\n</ul>\n\n<p><strong><a href=\"#css%E7%B3%BB\">CSS系</a></strong></p>\n\n<ul>\n<li>SASS/SCSSを使う</li>\n<li>Styled Componentsを使う</li>\n<li>Glamorとglamorousを使う</li>\n<li>Emotionを使う</li>\n<li>PostCSSを使う</li>\n<li><a href=\"#gatsby-plugin-typography\">Typography.js(文章のスタイルを設定するライブラリ)を使う</a></li>\n</ul>\n\n<p><strong><a href=\"#%E5%A4%96%E9%83%A8%E9%80%A3%E6%90%BA%E7%B3%BB\">外部連携系</a></strong></p>\n\n<ul>\n<li>Mediumのデータを取得する</li>\n<li>WordPressのデータを取得する</li>\n<li>contentfulのデータを取得する</li>\n<li><a href=\"#gatsby-source-esa\">esa.ioのデータを取得する</a></li>\n</ul>\n\n<h2>\n<span id=\"プラグインの使い方\" class=\"fragment\"></span><a href=\"#%E3%83%97%E3%83%A9%E3%82%B0%E3%82%A4%E3%83%B3%E3%81%AE%E4%BD%BF%E3%81%84%E6%96%B9\"><i class=\"fa fa-link\"></i></a>プラグインの使い方</h2>\n\n<p>※知ってる人は読み飛ばしてください。</p>\n\n<ul>\n<li>プラグインはnpmパッケージで公開されているのでnpmインストールする</li>\n<li>\n<code>gatsby-config.js</code>のpluginsに定義を追加する</li>\n<li>下記のようにオプションも指定できる</li>\n</ul>\n\n<div class=\"code-frame\" data-lang=\"javascript\">\n<div class=\"code-lang\"><span class=\"bold\">gatsby-config.jsの一部</span></div>\n<div class=\"highlight\"><pre><span class=\"nx\">module</span><span class=\"p\">.</span><span class=\"nx\">exports</span> <span class=\"o\">=</span> <span class=\"p\">{</span>\n  <span class=\"na\">plugins</span><span class=\"p\">:</span> <span class=\"p\">[</span>\n    <span class=\"c1\">// オプションなしで指定する場合は下記のようにプラグイン名を文字列で指定しましょう。</span>\n    <span class=\"s2\">\"gatsby-plugin-react-helmet\"</span><span class=\"p\">,</span>\n    <span class=\"c1\">// オプションありの場合は、オブジェクトで指定します。</span>\n    <span class=\"p\">{</span>\n      <span class=\"na\">resolve</span><span class=\"p\">:</span> <span class=\"s2\">`gatsby-source-filesystem`</span><span class=\"p\">,</span>\n      <span class=\"c1\">// オプションはさらにオブジェクトで指定します。</span>\n      <span class=\"na\">options</span><span class=\"p\">:</span> <span class=\"p\">{</span>\n        <span class=\"na\">path</span><span class=\"p\">:</span> <span class=\"s2\">`</span><span class=\"p\">${</span><span class=\"nx\">__dirname</span><span class=\"p\">}</span><span class=\"s2\">/src/data/`</span><span class=\"p\">,</span>\n        <span class=\"na\">name</span><span class=\"p\">:</span> <span class=\"s2\">\"data\"</span><span class=\"p\">,</span>\n      <span class=\"p\">},</span>\n    <span class=\"p\">},</span>\n    <span class=\"p\">{</span>\n      <span class=\"na\">resolve</span><span class=\"p\">:</span> <span class=\"s2\">`gatsby-transformer-remark`</span><span class=\"p\">,</span>\n      <span class=\"na\">options</span><span class=\"p\">:</span> <span class=\"p\">{</span>\n        <span class=\"c1\">// プラグイン自体を拡張するプラグインを指定できます。</span>\n        <span class=\"c1\">// その場合はオプションのpluginsにプラグインを定義しましょう。</span>\n        <span class=\"na\">plugins</span><span class=\"p\">:</span> <span class=\"p\">[</span><span class=\"s2\">`gatsby-remark-smartypants`</span><span class=\"p\">],</span>\n      <span class=\"p\">},</span>\n    <span class=\"p\">},</span>\n    <span class=\"p\">{</span>\n      <span class=\"na\">resolve</span><span class=\"p\">:</span> <span class=\"s2\">\"gatsby-plugin-offline\"</span><span class=\"p\">,</span>\n      <span class=\"c1\">// 下記のように空オプションの場合は、プラグイン名を文字列で指定した場合と同じです。</span>\n      <span class=\"na\">options</span><span class=\"p\">:</span> <span class=\"p\">{</span>\n        <span class=\"na\">plugins</span><span class=\"p\">:</span> <span class=\"p\">[],</span>\n      <span class=\"p\">},</span>\n    <span class=\"p\">},</span>\n  <span class=\"p\">],</span>\n<span class=\"p\">}</span>\n</pre></div>\n</div>\n\n<p>※ 詳細は<a href=\"https://takumon.com/2018/10/20/#%E3%83%97%E3%83%A9%E3%82%B0%E3%82%A4%E3%83%B3%E3%81%AE%E4%BD%BF%E3%81%84%E6%96%B9\" rel=\"nofollow noopener\" target=\"_blank\">Gatsbyプラグインの使い方･作り方･公開方法 | Takumon Blog</a>を参照してください。</p>\n\n<h2>\n<span id=\"マークダウン系\" class=\"fragment\"></span><a href=\"#%E3%83%9E%E3%83%BC%E3%82%AF%E3%83%80%E3%82%A6%E3%83%B3%E7%B3%BB\"><i class=\"fa fa-link\"></i></a>マークダウン系</h2>\n\n<p>ここで紹介するプラグインは<a href=\"gatsby-transformer-remark\">gatsby-transformer-remark</a>の拡張です。<br><br>\nそのためプラグインを使う時は、<code>gatsby-config.js</code>ではgatsby-transformer-remarkのオプションとして定義します。</p>\n\n<div class=\"code-frame\" data-lang=\"javascript\">\n<div class=\"code-lang\"><span class=\"bold\">gatsby-config.jsの一部</span></div>\n<div class=\"highlight\"><pre><span class=\"nx\">plugins</span><span class=\"p\">:</span> <span class=\"p\">[</span>\n  <span class=\"p\">{</span>\n    <span class=\"na\">resolve</span><span class=\"p\">:</span> <span class=\"s2\">`gatsby-transformer-remark`</span><span class=\"p\">,</span>\n    <span class=\"na\">options</span><span class=\"p\">:</span> <span class=\"p\">{</span>\n      <span class=\"na\">plugins</span><span class=\"p\">:</span> <span class=\"p\">[</span>\n        <span class=\"p\">{</span>\n          <span class=\"na\">resolve</span><span class=\"p\">:</span> <span class=\"s2\">`gatsby-remark-prismjs`</span><span class=\"p\">,</span>\n          <span class=\"na\">options</span><span class=\"p\">:</span> <span class=\"p\">{</span>\n            <span class=\"na\">classPrefix</span><span class=\"p\">:</span> <span class=\"s2\">\"language-\"</span><span class=\"p\">,</span>\n            <span class=\"na\">inlineCodeMarker</span><span class=\"p\">:</span> <span class=\"kc\">null</span><span class=\"p\">,</span>\n            <span class=\"na\">aliases</span><span class=\"p\">:</span> <span class=\"p\">{},</span>\n            <span class=\"na\">showLineNumbers</span><span class=\"p\">:</span> <span class=\"kc\">true</span><span class=\"p\">,</span>\n            <span class=\"na\">noInlineHighlight</span><span class=\"p\">:</span> <span class=\"kc\">false</span><span class=\"p\">,</span>\n          <span class=\"p\">},</span>\n        <span class=\"p\">},</span>\n      <span class=\"p\">],</span>\n    <span class=\"p\">},</span>\n  <span class=\"p\">},</span>\n<span class=\"p\">]</span>\n</pre></div>\n</div>\n\n<p><br></p><hr>\n\n<h3>\n<span id=\"gatsby-remark-prismjs\" class=\"fragment\"></span><a href=\"#gatsby-remark-prismjs\"><i class=\"fa fa-link\"></i></a><a href=\"https://www.gatsbyjs.org/packages/gatsby-remark-prismjs\" rel=\"nofollow noopener\" target=\"_blank\">gatsby-remark-prismjs</a>\n</h3>\n\n<p><strong>マークダウンのコードブロックでシンタックスハイライトできるようにする</strong><br>\n* <a href=\"https://prismjs.com/\" rel=\"nofollow noopener\" target=\"_blank\">Prism.js</a>を使ってシンタックスハイライトします。他にも行数表示や指定行強調といった機能が使えます。<br>\n* Gatsbyで技術系ブログを作るなら、このプラグインが一番重要でしょう。使い方の詳細も含めてご紹介します。</p>\n\n<h4>\n<span id=\"設定\" class=\"fragment\"></span><a href=\"#%E8%A8%AD%E5%AE%9A\"><i class=\"fa fa-link\"></i></a>設定</h4>\n\n<p><code>gatsby-config.js</code>で下記のように定義します。<br>\nオプションが複数ありあますが重要なのは<code>showLineNumbers</code>だけです。<code>true</code>だとコードブロックの行数表示機能が使えるようになります。</p>\n\n<div class=\"code-frame\" data-lang=\"javascript\">\n<div class=\"code-lang\"><span class=\"bold\">gatsby-config.jsの一部</span></div>\n<div class=\"highlight\"><pre><span class=\"nx\">plugins</span><span class=\"p\">:</span> <span class=\"p\">[</span>\n  <span class=\"p\">{</span>\n    <span class=\"na\">resolve</span><span class=\"p\">:</span> <span class=\"s2\">`gatsby-transformer-remark`</span><span class=\"p\">,</span>\n    <span class=\"na\">options</span><span class=\"p\">:</span> <span class=\"p\">{</span>\n      <span class=\"na\">plugins</span><span class=\"p\">:</span> <span class=\"p\">[</span>\n        <span class=\"p\">{</span>\n          <span class=\"na\">resolve</span><span class=\"p\">:</span> <span class=\"s2\">`gatsby-remark-prismjs`</span><span class=\"p\">,</span>\n          <span class=\"na\">options</span><span class=\"p\">:</span> <span class=\"p\">{</span>\n            <span class=\"na\">classPrefix</span><span class=\"p\">:</span> <span class=\"s2\">\"language-\"</span><span class=\"p\">,</span>\n            <span class=\"na\">inlineCodeMarker</span><span class=\"p\">:</span> <span class=\"kc\">null</span><span class=\"p\">,</span>\n            <span class=\"na\">aliases</span><span class=\"p\">:</span> <span class=\"p\">{},</span>\n            <span class=\"na\">showLineNumbers</span><span class=\"p\">:</span> <span class=\"kc\">true</span><span class=\"p\">,</span>\n            <span class=\"na\">noInlineHighlight</span><span class=\"p\">:</span> <span class=\"kc\">false</span><span class=\"p\">,</span>\n          <span class=\"p\">},</span>\n        <span class=\"p\">},</span>\n      <span class=\"p\">],</span>\n    <span class=\"p\">},</span>\n  <span class=\"p\">},</span>\n<span class=\"p\">]</span>\n</pre></div>\n</div>\n\n<p><br></p>\n\n<p>若干めんどくさいですが、<code>gatsby-config.js</code>以外にもやることがあります。<br><br>\n<code>gatsby-browser.js</code>でPrismJSのテーマを読み込みます。<br><br>\n<code>gatsby-browser.js</code>は、なければプロジェクトのルートフォルダ直下に作成してください。</p>\n\n<div class=\"code-frame\" data-lang=\"javascript\">\n<div class=\"code-lang\"><span class=\"bold\">gatsby-browser.js</span></div>\n<div class=\"highlight\"><pre><span class=\"nx\">require</span><span class=\"p\">(</span><span class=\"s2\">\"prismjs/themes/prism-solarizedlight.css\"</span><span class=\"p\">)</span>\n</pre></div>\n</div>\n\n<p><br><br>\n行数を表示するには、専用のCSSを読み込みます。<br></p>\n\n<div class=\"code-frame\" data-lang=\"js\">\n<div class=\"code-lang\"><span class=\"bold\">src/components/layout.jsの一部</span></div>\n<div class=\"highlight\"><pre><span class=\"k\">import</span> <span class=\"s1\">'prismjs/plugins/line-numbers/prism-line-numbers.css'</span><span class=\"p\">;</span>\n\n</pre></div>\n</div>\n\n<p><br></p>\n\n<p>指定行を強調表示させるにはCSSを定義してください。</p>\n\n<div class=\"code-frame\" data-lang=\"css\"><div class=\"highlight\"><pre><span class=\"nc\">.gatsby-highlight-code-line</span> <span class=\"p\">{</span>\n  <span class=\"nl\">background-color</span><span class=\"p\">:</span> <span class=\"m\">#feb</span><span class=\"p\">;</span>\n  <span class=\"nl\">display</span><span class=\"p\">:</span> <span class=\"nb\">block</span><span class=\"p\">;</span>\n  <span class=\"nl\">margin-right</span><span class=\"p\">:</span> <span class=\"m\">-1em</span><span class=\"p\">;</span>\n  <span class=\"nl\">margin-left</span><span class=\"p\">:</span> <span class=\"m\">-1em</span><span class=\"p\">;</span>\n  <span class=\"nl\">padding-right</span><span class=\"p\">:</span> <span class=\"m\">1em</span><span class=\"p\">;</span>\n  <span class=\"nl\">padding-left</span><span class=\"p\">:</span> <span class=\"m\">0.75em</span><span class=\"p\">;</span>\n  <span class=\"nl\">border-left</span><span class=\"p\">:</span> <span class=\"m\">0.25em</span> <span class=\"nb\">solid</span> <span class=\"m\">#f99</span><span class=\"p\">;</span>\n<span class=\"p\">}</span>\n\n<span class=\"nc\">.gatsby-highlight</span> <span class=\"p\">{</span>\n  <span class=\"nl\">background-color</span><span class=\"p\">:</span> <span class=\"m\">#fdf6e3</span><span class=\"p\">;</span>\n  <span class=\"nl\">border-radius</span><span class=\"p\">:</span> <span class=\"m\">0.3em</span><span class=\"p\">;</span>\n  <span class=\"nl\">margin</span><span class=\"p\">:</span> <span class=\"m\">0.5em</span> <span class=\"m\">0</span><span class=\"p\">;</span>\n  <span class=\"nl\">padding</span><span class=\"p\">:</span> <span class=\"m\">1em</span><span class=\"p\">;</span>\n  <span class=\"nl\">overflow</span><span class=\"p\">:</span> <span class=\"nb\">auto</span><span class=\"p\">;</span>\n<span class=\"p\">}</span>\n\n<span class=\"nc\">.gatsby-highlight</span> <span class=\"nt\">pre</span><span class=\"o\">[</span><span class=\"nt\">class</span><span class=\"o\">*=</span><span class=\"s1\">\"language-\"</span><span class=\"o\">]</span> <span class=\"p\">{</span>\n  <span class=\"nl\">background-color</span><span class=\"p\">:</span> <span class=\"nb\">transparent</span><span class=\"p\">;</span>\n  <span class=\"nl\">margin</span><span class=\"p\">:</span> <span class=\"m\">0</span><span class=\"p\">;</span>\n  <span class=\"nl\">padding</span><span class=\"p\">:</span> <span class=\"m\">0</span><span class=\"p\">;</span>\n  <span class=\"nl\">overflow</span><span class=\"p\">:</span> <span class=\"n\">initial</span><span class=\"p\">;</span>\n  <span class=\"nl\">float</span><span class=\"p\">:</span> <span class=\"nb\">left</span><span class=\"p\">;</span> <span class=\"c\">/* 1 */</span>\n  <span class=\"nl\">min-width</span><span class=\"p\">:</span> <span class=\"m\">100%</span><span class=\"p\">;</span> <span class=\"c\">/* 2 */</span>\n<span class=\"p\">}</span>\n<span class=\"nc\">.gatsby-highlight</span> <span class=\"nt\">pre</span><span class=\"o\">[</span><span class=\"nt\">class</span><span class=\"o\">*=</span><span class=\"s1\">\"language-\"</span><span class=\"o\">]</span><span class=\"nc\">.line-numbers</span> <span class=\"p\">{</span>\n  <span class=\"nl\">padding-left</span><span class=\"p\">:</span> <span class=\"m\">2.8em</span><span class=\"p\">;</span> <span class=\"c\">/* 3 */</span>\n<span class=\"p\">}</span>\n</pre></div></div>\n\n<p><br></p>\n\n<h4>\n<span id=\"使い方\" class=\"fragment\"></span><a href=\"#%E4%BD%BF%E3%81%84%E6%96%B9\"><i class=\"fa fa-link\"></i></a>使い方</h4>\n\n<p>シンタックスハイライトだけなら下記のように記述します。</p>\n\n<ul>\n<li>記述方法</li>\n</ul>\n\n<div class=\"code-frame\" data-lang=\"text\"><div class=\"highlight\"><pre>\n```javascript\nplugins:[\n  {\n    resolve: `gatsby-transformer-remark`,\n      options: {\n        plugins: [\n          `gatsby-remark-prismjs`,\n        ]\n      }\n    }\n  } \n]\n```\n</pre></div></div>\n\n<p><br></p>\n\n<ul>\n<li>表示結果</li>\n</ul>\n\n<p><a href=\"https://camo.qiitausercontent.com/02b666af653df603b518bbc431fc8238a9101df3/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f34393931352f66343238346434392d626461642d373865302d613764322d3563323931373563646635652e706e67\" target=\"_blank\" rel=\"nofollow noopener\"><img src=\"https://camo.qiitausercontent.com/02b666af653df603b518bbc431fc8238a9101df3/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f34393931352f66343238346434392d626461642d373865302d613764322d3563323931373563646635652e706e67\" alt=\"スクリーンショット 2018-10-22 22.46.27.png\" data-canonical-src=\"https://qiita-image-store.s3.amazonaws.com/0/49915/f4284d49-bdad-78e0-a7d2-5c29175cdf5e.png\"></a></p>\n\n<p>行数表示や指定行強調を使う場合コードブロックの1行目(```の部分)にそれらの情報を記載します。以降に詳細を示します。</p>\n\n<h5>\n<span id=\"行数表示する場合\" class=\"fragment\"></span><a href=\"#%E8%A1%8C%E6%95%B0%E8%A1%A8%E7%A4%BA%E3%81%99%E3%82%8B%E5%A0%B4%E5%90%88\"><i class=\"fa fa-link\"></i></a>行数表示する場合</h5>\n\n<ul>\n<li>記述方法</li>\n</ul>\n\n<div class=\"code-frame\" data-lang=\"text\"><div class=\"highlight\"><pre>\n```javascript{numberLines: true}\n// In your gatsby-config.js\nplugins: [\n  {\n    resolve: `gatsby-transformer-remark`,\n    options: {\n      plugins: [\n        `gatsby-remark-prismjs`,\n      ]\n    }\n  }\n]\n```\n</pre></div></div>\n\n<ul>\n<li>表示結果</li>\n</ul>\n\n<p><a href=\"https://camo.qiitausercontent.com/d260ef23960977cde69e9ec062180fee82ac8707/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f34393931352f65613863326630642d653034352d346332662d326636302d3531383233626232613361652e706e67\" target=\"_blank\" rel=\"nofollow noopener\"><img src=\"https://camo.qiitausercontent.com/d260ef23960977cde69e9ec062180fee82ac8707/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f34393931352f65613863326630642d653034352d346332662d326636302d3531383233626232613361652e706e67\" alt=\"スクリーンショット 2018-10-22 22.46.41.png\" data-canonical-src=\"https://qiita-image-store.s3.amazonaws.com/0/49915/ea8c2f0d-e045-4c2f-2f60-51823bb2a3ae.png\"></a></p>\n\n<h5>\n<span id=\"行数表示する場合開始行数指定あり\" class=\"fragment\"></span><a href=\"#%E8%A1%8C%E6%95%B0%E8%A1%A8%E7%A4%BA%E3%81%99%E3%82%8B%E5%A0%B4%E5%90%88%E9%96%8B%E5%A7%8B%E8%A1%8C%E6%95%B0%E6%8C%87%E5%AE%9A%E3%81%82%E3%82%8A\"><i class=\"fa fa-link\"></i></a>行数表示する場合（開始行数指定あり）</h5>\n\n<ul>\n<li>記述方法</li>\n</ul>\n\n<div class=\"code-frame\" data-lang=\"text\"><div class=\"highlight\"><pre>\n```javascript{numberLines: 5}\n// In your gatsby-config.js\nplugins: [\n  {\n    resolve: `gatsby-transformer-remark`,\n    options: {\n      plugins: [\n        `gatsby-remark-prismjs`,\n      ]\n    }\n  }\n]\n```\n</pre></div></div>\n\n<p><br></p>\n\n<ul>\n<li>表示結果</li>\n</ul>\n\n<p><a href=\"https://camo.qiitausercontent.com/0493012e1f6a73e67a66c2fb7d07ad09caa99e14/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f34393931352f36613635343132632d356430642d386364352d616566362d6265303264616563633231392e706e67\" target=\"_blank\" rel=\"nofollow noopener\"><img src=\"https://camo.qiitausercontent.com/0493012e1f6a73e67a66c2fb7d07ad09caa99e14/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f34393931352f36613635343132632d356430642d386364352d616566362d6265303264616563633231392e706e67\" alt=\"スクリーンショット 2018-10-22 22.47.00.png\" data-canonical-src=\"https://qiita-image-store.s3.amazonaws.com/0/49915/6a65412c-5d0d-8cd5-aef6-be02daecc219.png\"></a></p>\n\n<h5>\n<span id=\"指定行数を強調する場合\" class=\"fragment\"></span><a href=\"#%E6%8C%87%E5%AE%9A%E8%A1%8C%E6%95%B0%E3%82%92%E5%BC%B7%E8%AA%BF%E3%81%99%E3%82%8B%E5%A0%B4%E5%90%88\"><i class=\"fa fa-link\"></i></a>指定行数を強調する場合</h5>\n\n<ul>\n<li>記述方法</li>\n</ul>\n\n<div class=\"code-frame\" data-lang=\"text\"><div class=\"highlight\"><pre>\n```javascript{1,5-9}\n// In your gatsby-config.js\nplugins: [\n  {\n    resolve: `gatsby-transformer-remark`,\n    options: {\n      plugins: [\n        `gatsby-remark-prismjs`,\n      ]\n    }\n  }\n]\n```\n</pre></div></div>\n\n<p><br></p>\n\n<ul>\n<li>表示結果</li>\n</ul>\n\n<p><a href=\"https://camo.qiitausercontent.com/3ab7eae120380a79128489b8af36699d65b79d9d/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f34393931352f61643938313762342d396130652d306133352d643566642d3561623634633033353464312e706e67\" target=\"_blank\" rel=\"nofollow noopener\"><img src=\"https://camo.qiitausercontent.com/3ab7eae120380a79128489b8af36699d65b79d9d/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f34393931352f61643938313762342d396130652d306133352d643566642d3561623634633033353464312e706e67\" alt=\"スクリーンショット 2018-10-22 22.47.08.png\" data-canonical-src=\"https://qiita-image-store.s3.amazonaws.com/0/49915/ad9817b4-9a0e-0a35-d5fd-5ab64c0354d1.png\"></a></p>\n\n<h5>\n<span id=\"全部の組み合わせ指定行数を強調かつ行数表示\" class=\"fragment\"></span><a href=\"#%E5%85%A8%E9%83%A8%E3%81%AE%E7%B5%84%E3%81%BF%E5%90%88%E3%82%8F%E3%81%9B%E6%8C%87%E5%AE%9A%E8%A1%8C%E6%95%B0%E3%82%92%E5%BC%B7%E8%AA%BF%E3%81%8B%E3%81%A4%E8%A1%8C%E6%95%B0%E8%A1%A8%E7%A4%BA\"><i class=\"fa fa-link\"></i></a>全部の組み合わせ（指定行数を強調かつ行数表示）</h5>\n\n<ul>\n<li>記述方法（2つの括弧を定義します）</li>\n</ul>\n\n<div class=\"code-frame\" data-lang=\"text\"><div class=\"highlight\"><pre>\n```javascript{numberLines: 5}{1,5-9}\n// In your gatsby-config.js\nplugins: [\n  {\n    resolve: `gatsby-transformer-remark`,\n    options: {\n      plugins: [\n        `gatsby-remark-prismjs`,\n      ]\n    }\n  }\n]\n```\n</pre></div></div>\n\n<p><br></p>\n\n<ul>\n<li>表示結果</li>\n</ul>\n\n<p><a href=\"https://camo.qiitausercontent.com/c58a55c9c942a073fe7b66943cf7b3a9f606d687/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f34393931352f63383636383930622d323232662d636566632d636133392d6232383762356534313833392e706e67\" target=\"_blank\" rel=\"nofollow noopener\"><img src=\"https://camo.qiitausercontent.com/c58a55c9c942a073fe7b66943cf7b3a9f606d687/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f34393931352f63383636383930622d323232662d636566632d636133392d6232383762356534313833392e706e67\" alt=\"スクリーンショット 2018-10-22 22.47.17.png\" data-canonical-src=\"https://qiita-image-store.s3.amazonaws.com/0/49915/c866890b-222f-cefc-ca39-b287b5e41839.png\"></a></p>\n\n<p><br></p><hr>\n\n<h3>\n<span id=\"gatsby-remark-code-titles\" class=\"fragment\"></span><a href=\"#gatsby-remark-code-titles\"><i class=\"fa fa-link\"></i></a><a href=\"https://www.gatsbyjs.org/packages/gatsby-remark-code-titles/?=gatsby-remark-code-titles\" rel=\"nofollow noopener\" target=\"_blank\">gatsby-remark-code-titles</a>\n</h3>\n\n<p><strong>マークダウンでコードブロックにタイトルを表示できるようにする</strong></p>\n\n<h4>\n<span id=\"設定-1\" class=\"fragment\"></span><a href=\"#%E8%A8%AD%E5%AE%9A-1\"><i class=\"fa fa-link\"></i></a>設定</h4>\n\n<ul>\n<li>前述のgatsby-remark-prismjsとあわせて使います。</li>\n</ul>\n\n<p><code>gatsby-config.js</code>で<code>gatsby-transformer-remark</code>オプションとして一番最初に定義する必要があります。</p>\n\n<div class=\"code-frame\" data-lang=\"javascript\">\n<div class=\"code-lang\"><span class=\"bold\">gatsby-config.jsの一部</span></div>\n<div class=\"highlight\"><pre>  <span class=\"nx\">plugins</span><span class=\"p\">:</span> <span class=\"p\">[</span>\n    <span class=\"p\">{</span>\n      <span class=\"na\">resolve</span><span class=\"p\">:</span> <span class=\"s2\">`gatsby-transformer-remark`</span><span class=\"p\">,</span>\n      <span class=\"na\">options</span><span class=\"p\">:</span> <span class=\"p\">{</span>\n        <span class=\"na\">plugins</span><span class=\"p\">:</span> <span class=\"p\">[</span>\n          <span class=\"s2\">`gatsby-remark-code-titles`</span><span class=\"p\">,</span>\n          <span class=\"p\">{</span>\n            <span class=\"na\">resolve</span><span class=\"p\">:</span> <span class=\"s2\">`gatsby-remark-prismjs`</span><span class=\"p\">,</span>\n            <span class=\"na\">options</span><span class=\"p\">:</span> <span class=\"p\">{</span>\n              <span class=\"na\">classPrefix</span><span class=\"p\">:</span> <span class=\"s2\">\"language-\"</span><span class=\"p\">,</span>\n              <span class=\"na\">inlineCodeMarker</span><span class=\"p\">:</span> <span class=\"kc\">null</span><span class=\"p\">,</span>\n              <span class=\"na\">aliases</span><span class=\"p\">:</span> <span class=\"p\">{},</span>\n              <span class=\"na\">showLineNumbers</span><span class=\"p\">:</span> <span class=\"kc\">true</span><span class=\"p\">,</span>\n            <span class=\"p\">},</span>\n          <span class=\"p\">},</span>\n        <span class=\"p\">],</span>\n      <span class=\"p\">},</span>\n    <span class=\"p\">},</span>\n  <span class=\"p\">]</span>\n</pre></div>\n</div>\n\n<p><br><br>\nさらにCSSでスタイルを追加しましょう。</p>\n\n<div class=\"code-frame\" data-lang=\"css\"><div class=\"highlight\"><pre><span class=\"nc\">.gatsby-code-title</span> <span class=\"p\">{</span>\n  <span class=\"nl\">background</span><span class=\"p\">:</span> <span class=\"m\">#f3e3b9</span><span class=\"p\">;</span>\n  <span class=\"nl\">color</span><span class=\"p\">:</span> <span class=\"m\">#b38383</span><span class=\"p\">;</span>\n  <span class=\"nl\">margin-bottom</span><span class=\"p\">:</span> <span class=\"m\">-0.65em</span><span class=\"p\">;</span>\n  <span class=\"nl\">padding</span><span class=\"p\">:</span> <span class=\"m\">0.7rem</span> <span class=\"m\">1.05rem</span><span class=\"p\">;</span>\n  <span class=\"nl\">font-size</span><span class=\"p\">:</span> <span class=\"m\">0.8em</span><span class=\"p\">;</span>\n  <span class=\"nl\">line-height</span><span class=\"p\">:</span> <span class=\"m\">0.2</span><span class=\"p\">;</span>\n  <span class=\"nl\">font-family</span><span class=\"p\">:</span> <span class=\"n\">SFMono-Regular</span><span class=\"p\">,</span><span class=\"n\">Menlo</span><span class=\"p\">,</span><span class=\"n\">Monaco</span><span class=\"p\">,</span><span class=\"n\">Consolas</span><span class=\"p\">,</span><span class=\"n\">Liberation</span> <span class=\"n\">Mono</span><span class=\"p\">,</span><span class=\"n\">Courier</span> <span class=\"n\">New</span><span class=\"p\">,</span><span class=\"nb\">monospace</span><span class=\"p\">;</span>\n  <span class=\"nl\">font-weight</span><span class=\"p\">:</span> <span class=\"m\">600</span><span class=\"p\">;</span>\n  <span class=\"nl\">border-radius</span><span class=\"p\">:</span> <span class=\"m\">8px</span> <span class=\"m\">8px</span> <span class=\"m\">0</span> <span class=\"m\">0</span><span class=\"p\">;</span>\n  <span class=\"nl\">display</span><span class=\"p\">:</span> <span class=\"n\">table</span><span class=\"p\">;</span>\n<span class=\"p\">}</span>\n</pre></div></div>\n\n<h4>\n<span id=\"使い方-1\" class=\"fragment\"></span><a href=\"#%E4%BD%BF%E3%81%84%E6%96%B9-1\"><i class=\"fa fa-link\"></i></a>使い方</h4>\n\n<ul>\n<li>マークダウンでコードブロックの一行目に<code>:title=タイトル名</code>と記述します。</li>\n</ul>\n\n<div class=\"code-frame\" data-lang=\"text\"><div class=\"highlight\"><pre>\n```javascript:title=gatsby-config.js\n// In your gatsby-config.js\nplugins: [\n  {\n    resolve: `gatsby-transformer-remark`,\n    options: {\n      plugins: [\n        `gatsby-remark-prismjs`,\n      ]\n    }\n  }\n]\n```\n</pre></div></div>\n\n<p><br></p>\n\n<ul>\n<li>表示結果</li>\n</ul>\n\n<p><a href=\"https://camo.qiitausercontent.com/0a3fdf6e1f69f1409342c7fe2ee2f736ef3270f3/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f34393931352f64386365343631362d373335652d343134392d623264332d3330373531306337613531642e706e67\" target=\"_blank\" rel=\"nofollow noopener\"><img src=\"https://camo.qiitausercontent.com/0a3fdf6e1f69f1409342c7fe2ee2f736ef3270f3/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f34393931352f64386365343631362d373335652d343134392d623264332d3330373531306337613531642e706e67\" alt=\"スクリーンショット 2018-10-22 23.20.45.png\" data-canonical-src=\"https://qiita-image-store.s3.amazonaws.com/0/49915/d8ce4616-735e-4149-b2d3-307510c7a51d.png\"></a></p>\n\n<h5>\n<span id=\"強調行指定との組み合わせ\" class=\"fragment\"></span><a href=\"#%E5%BC%B7%E8%AA%BF%E8%A1%8C%E6%8C%87%E5%AE%9A%E3%81%A8%E3%81%AE%E7%B5%84%E3%81%BF%E5%90%88%E3%82%8F%E3%81%9B\"><i class=\"fa fa-link\"></i></a>強調行指定との組み合わせ</h5>\n\n<ul>\n<li>強調行の後にタイトルを記述します。</li>\n</ul>\n\n<div class=\"code-frame\" data-lang=\"text\"><div class=\"highlight\"><pre>\n```javascript{1, 5-9}:gatsby-config.js\n// In your gatsby-config.js\nplugins: [\n  {\n    resolve: `gatsby-transformer-remark`,\n    options: {\n      plugins: [\n        `gatsby-remark-prismjs`,\n      ]\n    }\n  }\n]\n```\n</pre></div></div>\n\n<p><br></p>\n\n<ul>\n<li>表示結果</li>\n</ul>\n\n<p><a href=\"https://camo.qiitausercontent.com/d4f812f1ccb4479e2b9cdc9fa72d3d599155fe52/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f34393931352f35383535313732662d666663632d633062632d323336322d6330363865323063386337372e706e67\" target=\"_blank\" rel=\"nofollow noopener\"><img src=\"https://camo.qiitausercontent.com/d4f812f1ccb4479e2b9cdc9fa72d3d599155fe52/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f34393931352f35383535313732662d666663632d633062632d323336322d6330363865323063386337372e706e67\" alt=\"スクリーンショット 2018-10-22 23.20.56.png\" data-canonical-src=\"https://qiita-image-store.s3.amazonaws.com/0/49915/5855172f-ffcc-c0bc-2362-c068e20c8c77.png\"></a></p>\n\n<h5>\n<span id=\"行数表示との組み合わせ\" class=\"fragment\"></span><a href=\"#%E8%A1%8C%E6%95%B0%E8%A1%A8%E7%A4%BA%E3%81%A8%E3%81%AE%E7%B5%84%E3%81%BF%E5%90%88%E3%82%8F%E3%81%9B\"><i class=\"fa fa-link\"></i></a>行数表示との組み合わせ</h5>\n\n<p>なぜかできませんでした...プラグインの相性が悪いのかもしれません。</p>\n\n<p><br></p><hr>\n\n<h3>\n<span id=\"gatsby-remark-autolink-headers\" class=\"fragment\"></span><a href=\"#gatsby-remark-autolink-headers\"><i class=\"fa fa-link\"></i></a><a href=\"https://www.gatsbyjs.org/packages/gatsby-remark-autolink-headers\" rel=\"nofollow noopener\" target=\"_blank\">gatsby-remark-autolink-headers</a>\n</h3>\n\n<p><strong>マークダウンで見出しにGitHub風ホバーリンクをつける</strong></p>\n\n<p>見出しホバー時に鎖アイコンリンクが表示されます。<br>\nリンクを指定して初期表示すると見出しまでスクロースしてくれるので便利です。</p>\n\n<p><a href=\"https://camo.qiitausercontent.com/45489494a718ac4d508bd05a61db4d47aed9729a/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f34393931352f33616365386363342d313337662d653937372d653432332d3635323739643332326231302e706e67\" target=\"_blank\" rel=\"nofollow noopener\"><img src=\"https://camo.qiitausercontent.com/45489494a718ac4d508bd05a61db4d47aed9729a/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f34393931352f33616365386363342d313337662d653937372d653432332d3635323739643332326231302e706e67\" alt=\"スクリーンショット 2018-10-22 23.22.56.png\" data-canonical-src=\"https://qiita-image-store.s3.amazonaws.com/0/49915/3ace8cc4-137f-e977-e423-65279d322b10.png\"></a></p>\n\n<h4>\n<span id=\"設定-2\" class=\"fragment\"></span><a href=\"#%E8%A8%AD%E5%AE%9A-2\"><i class=\"fa fa-link\"></i></a>設定</h4>\n\n<p>オプションでアイコン、アイコンの位置、アイコンのクラス名を指定できます。</p>\n\n<div class=\"code-frame\" data-lang=\"javascript\">\n<div class=\"code-lang\"><span class=\"bold\">gatsby-config.jsの一部</span></div>\n<div class=\"highlight\"><pre>  <span class=\"nx\">plugins</span><span class=\"p\">:</span> <span class=\"p\">[</span>\n    <span class=\"p\">{</span>\n      <span class=\"na\">resolve</span><span class=\"p\">:</span> <span class=\"s2\">`gatsby-transformer-remark`</span><span class=\"p\">,</span>\n      <span class=\"na\">options</span><span class=\"p\">:</span> <span class=\"p\">{</span>\n        <span class=\"na\">plugins</span><span class=\"p\">:</span> <span class=\"p\">[</span>\n          <span class=\"p\">{</span>\n            <span class=\"na\">resolve</span><span class=\"p\">:</span> <span class=\"s2\">`gatsby-remark-autolink-headers`</span><span class=\"p\">,</span>\n            <span class=\"na\">options</span><span class=\"p\">:</span> <span class=\"p\">{</span>\n              <span class=\"na\">offsetY</span><span class=\"p\">:</span> <span class=\"s2\">`100`</span><span class=\"p\">,</span>\n              <span class=\"na\">icon</span><span class=\"p\">:</span> <span class=\"s2\">`&lt;svg aria-hidden=\"true\" height=\"20\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"20\"&gt;&lt;path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"&gt;&lt;/path&gt;&lt;/svg&gt;`</span><span class=\"p\">,</span>\n              <span class=\"na\">className</span><span class=\"p\">:</span> <span class=\"s2\">`custom-class`</span><span class=\"p\">,</span>\n            <span class=\"p\">},</span>\n          <span class=\"p\">},</span>\n        <span class=\"p\">],</span>\n      <span class=\"p\">},</span>\n    <span class=\"p\">},</span>\n  <span class=\"p\">],</span>\n</pre></div>\n</div>\n\n<h4>\n<span id=\"補足\" class=\"fragment\"></span><a href=\"#%E8%A3%9C%E8%B6%B3\"><i class=\"fa fa-link\"></i></a>補足</h4>\n\n<p><a href=\"https://www.gatsbyjs.org/packages/gatsby-remark-autolink-headers/#how-to-use\" rel=\"nofollow noopener\" target=\"_blank\">公式サイト</a>には下記記述がありますが<br>\n起因となった<a href=\"https://github.com/gatsbyjs/gatsby/issues/5764\" rel=\"nofollow noopener\" target=\"_blank\">issue 5764</a>はもう解決済みたいなので、定義順は特に気にする必要なさそうです。</p>\n\n<blockquote>\n<p>gatsby-remark-prismjsと一緒に使う場合は必ず後に定義してください。</p>\n</blockquote>\n\n<p><br></p><hr>\n\n<h3>\n<span id=\"gatsby-remark-emojis\" class=\"fragment\"></span><a href=\"#gatsby-remark-emojis\"><i class=\"fa fa-link\"></i></a><a href=\"https://www.gatsbyjs.org/packages/gatsby-remark-emojis\" rel=\"nofollow noopener\" target=\"_blank\">gatsby-remark-emojis</a>\n</h3>\n\n<p><strong>マークダウンで絵文字が使えるようにする</strong><br></p>\n\n<ul>\n<li>絵文字は画像ファイルではなく、base64形式で埋め込みます。全ての絵文字をドカッとインポートするわけではないのでデプロイ資産のサイズが最小限で済むのがメリットです。</li>\n</ul>\n\n<div class=\"code-frame\" data-lang=\"html\">\n<div class=\"code-lang\"><span class=\"bold\">HTMLファイル中に埋め込まれる絵文字</span></div>\n<div class=\"highlight\"><pre><span class=\"nt\">&lt;img</span>\n  <span class=\"na\">class=</span><span class=\"s\">\"emoji-icon\"</span>\n  <span class=\"na\">data-icon=</span><span class=\"s\">\"emoji-100\"</span>\n  <span class=\"na\">style=</span><span class=\"s\">\"display: inline; margin: 0; margin-top: 1px; position: relative; top: 5px; width: 25px\"</span>\n  <span class=\"na\">src=</span><span class=\"s\">\"data:image/png;base64, iVBORw0KGgoAAAANSUhEUgAAAEAAAABACAYAAACqaXHeAAAMMUlEQVR4Ae3YhXtcx90o4HfOnhVZlpntkMN0nTK3TsrMzPdjZmZmvh8zM5SZuQ04zInMsiVb0kq7e2jmPnBRj11t5HLy/gcz88Px4PaQhwRf5Q6xJQFTViAc9OWV2FVyVc6tq5hEZXlj0zylxxNKzkr0hng7/nMdo6OkQIFkGXnbl95mwn1c1mFvyWWBqxpuq/k13Oz0bOeyeZ5Z8eKaR9a0ARtyPpy4aophfBhdywj7fOGt5ZySrTUziQPoAwyxteDJJc+teXnBUAQEvnML78BQn5M4ArCGUHPhAt9d8LKS9RGBMjCVeMsovz3KD3cZrvkeTFlG3vWFs47xkkfP85zIwxpuj/wWbocxtvV4c8l39NgcgTrQCZzIaNW8MHFRw3vxz7CBrM+mgu/o8uqK1WgCdwf2tbg2510ZWY9rKhb6rDKAvOfMXUS2yLo+T6/4/YK1NVo8OvI23L6D8Q6vKPixPiNIgfnAvowbW3y2zTv7/Ejk+ZE7AXqM1Dx7kVfXrIaMycivXMff30WB9Houx9bIbM3orxKQOL38F52Zv6DVZUfJq0q+q8eaBIj0a9IjCEd4Rs3r+4xAoJPxlgV+LOPoBM0mth/hrJrViVHYSTbPtprvqhhPCFT4pxbveQT9R+AswmHaEYl2ZPhJg1zAk6zcq2iVnNfnG7t8Y8lYIgBSxoEhjvdZt8DVJVcAKuyb4+f6HELTwVb2JM5uCBkjEFnX4qXznJ/IkQKfyXgnDgNEVo9y1QIhUOU0Ocky8twZedI839Fjb814AgAEbsH0LC9oeFpFDoH7Mn43cv8QDUDFeYHNgdkWx6DDpoZXxv8nchr+YIHPIQKsZ0vimQ2txGgiRMvLo5V5Ga+e51t67ImsOsXh+yVvW82JeR5bcw4EOhmf6PG+EUoAmOfKhq2J+cjoYwn72F1wcSJDzHhn4LPj9ACgYSxxViIgS6Sjlpcf9cB8P5fO8aI5XlZyWUNuKZqMzzZcu55Lj3NJTRtwZ+IfRjhpiZK1kTbKRO8+zm7xmooRpECn4V8jBywRyRMTgGw1F7+Bu7Ho9ORvMJh15ImHH+fba66p2BoRaDLm0GpYAyga/jJw/yKvi1yaECgDtxR8whLnsesoayIC7YywwJaKpyWgCdzUsA89S+SUkWlA1mJ3xsiyF5AZTMFQ4vUFL60ZBtyaeG+L4cArGiBmHFvkExez4TiPaVgP2N/i42MsWIoGCTCacW6kU7ARUODtQ0w7hUATKAGpoQgky8gbg6lJiZPYH5hI3Jj4+1V8KOM5JV8PKPCREToFz6w5JwIxcH2bDziFjBMtOhENApdiy/97qTXvi3ScQs3amrMBqeTuPj3LyBcMZoh+4teHmKrZ2OMtuHYdj57juRUtwHzNPyZO9LkmsjWixULgpoK7ndpFGROAAltqzk1AHZhM7A/UlriMsaNcWLELAWWXyf+gbxn5PxhYwkn8LsBP0p7m4Q2PS0ATONjjhnMY6XBBZCwgcGiI+51GyeMj50VkzCXUnA2oA/cPUzmFDmdHri4ZRhOYyum+jGQZ+cusXM1ZFY8omIBAt8W+TfTa7K3ZFAGR2xtudgqbyDs8pWZ7RJteoFfTAnQi/xboOoVFzqt5RgKqFjePM2sA+biVK3gMHhuBhKmGt+Y0NY9NTECgjFzb5SZLnE2G3QXnR4YDArOJuQYQWFzk5i6VJR5Odow1NZsAZeBzgb4B5MHK9djdsDshY7bFuxven9FUXIhRCBxrc7BNbYlIhidENkQE6hbtwASgCUxH5kaIluKynGf1CICy4loUBpCXVuYcdkxxQU07AJMN/4xOzSpsSrQhcKTFcaewQNbieZHNgE7GIoYgULY4PE7hFGa5tOJJCUiBk13umaUygPyIldnOExJXNgjAzAL7YJiAjWj9PxcwY4kNtGseMcMVkREIHMw4FDkPkGE4d2oFGxu2A7oZn8uZ3kg0gHyjlVngUZHdCYF+xtQBClgHDCcCoMgoLFGRJ17YsDEhIPLhjLsjFwJakXEEANhJXvHoWa6pyQHTDX87TNeA8mEP3FlcfJQralYF4N7EO9s0kCylSFQAsJV2j0sWeGZiDAJTkY+1WahpQSJEhgtqAGiz6SQvq9gbESgDdxzlY/PUBpTf6YHbxEsjl0cgJm7t8Y4dVE5tKNACgFlW1XxdlwsTOeBDLfbl7EIDyLBuA/9tHSfaFInRBfYW7K1YCzgWeMduFpAMKL/K4NYQsHmWqyPbINAJ3D3GCQBAAMAliceM089oAqnDI0teWzMMGYcTb9nPPZsZTxwGBOwo+b45ZhKdjLU1j49cCIEC1y/wnwskg5MfM7hxQuA5BefUANyZ8SkAyEiJk9iBVs0VGd/S52osBpqG51WMA8rAf+R8cjfVRm6b5UMZeyMTibGCl9VoEJAAaHBrxr9+gANIBif8oMG9iaHI78zyipq1gSrxW9fzE+gDXM1w4rs7fGvDDgQkJABkgH7GtRXfPcnnkOBRXN7le3u8ODGODAAQUWTcE/jTm/lDFB6g8EcG81Syhp3z/GefPZGQcW2Ln8d/WGIVYxW/1OdlDRuQIwASInotPt3nJ2f5HAqAS2lVnF3yhj6vj2xAQEDKmM74eOLvT/JB9KxAeJvBXMhI4jtn+N6aTYGY+KVZfhWzTmEX6xPPqHh5zSMiGxPtQCfj9sB7Kv5ugftRWuJcWn3GF1nTZ11D3mZrw2xgZoSTLebQt0LhEwazitV4S4fHRYYC70z8/P/gE0hO4ycZX2RjwZqK8chIRtliZojjh5hBtIx9hDHCHoZmqFE7c8LfDRb+4Rg7e3ysYBcWEz+c8RdYNDi/Q0DyFSK83PJ+hXaXR83ynw0bMybxzXinM+c81k5QonuQx7U4F/2aNW3ua3PfOo7NcU6i3Ml9aJw5+T9Z3iRDOZdE8oTAVIt5K7CLbX1297m4oVWz5ijbJkmJ+RaPztiZKBLjOBw5eJSZwI5EdZybRvngBm5C1xnIj1texVDDJWhD5AZMWcZljMyys2BLl2012w9zduBS7Im0IusTrRpQIyEBAhdBCxHQ0K954hy/gfc7A+FTljfBxobfmeWFWEh8W8Vb0QOAKwld1lVsX2RLwzkZD09cUnNpzeYGEQnBaaVAjQBIaLCAk4HhRBH55U/z50hWKP+I5T2bVmIDQotPRG4dpgcAZ5PPsLPi+XhazeNK1tdIlpIySpTI0EGT6GMxcDLQQQCkQA+TQ9ycMVFzuMdnEc7oAgygZihyMVoZ+07zN7+m4SUL/GJFjgCAGiXKQC8wHTja4giG8NkW8wX3d7i7y3Sg2EwEQIJEQkAaJT3ZmcmfbHkZDaaxYYGPTzFtia2kSF3TABrEQDdjMnBTxh2RW6a5bgOziAhokBATsSQhHXBayRdIfq/lXUkv8IEWWWDm72ks8WRmI+8Z5dkl3RY3N0wW3Bo4MMxioApU91HcR/LlJ/y25T2bdsVli7yx4Tew3ykM08bOPrFNt6Y4SQ+VZVzCeEZ7DfOzjGPoLGYOMYYFgMTqnSwiOnNCMpi7GeqwM3AIhRXaQ+sgOyq2VuwNzCVGKi7qsjMxhKGGLKNAnugOcxCrarY0yJka4a5hPrmGT2PeCoQpXzwl2xLbe+zpc2XF+P/u/ZgI7E70kWN9wwQkJAQAZHQxlMgTAiljGpOBD67mb3CTByjc4gvjUlqHuKhmU5eLFtmOsxMbcWHi/EiWEJGQAAkQfH4B6GacwGxiBE3G+0b4A9ziAcoLK7ObdoftfXb12HoDuxJXYWvkipqtEc3nP2AM1IEmsIATWIgcQxMYbzgYqCHQD8zkTGVMR4YTZeSmD3OnFQi/aXAvJU9s6rG54OLEoxJX1VzcsK06zZQXKNELdBIFmsi9gZOBMqPb4jgOtJgpuKumGmPD9dxUUEACyi95F4BnkWNPyTMbHlfyiJJNjaXUgQL9xFxgJnAw52hgMnEiUNzDW2boRaDwZZIbUGQ48S3zvLRmNQAiKvQxnzGZcTjjvsinulw/x5GlX+a7Sbt9+YVPG8wqxvBzc7y2YQIlqoy5wF2BT0c+vMjnxilzYkOzSET0FSq812C2ESLrSn6sZqLPO/vcntPP6QzTayhQ+ioSPuaBGWNLRdZl7pP0EX0VC7/gwS3zIPfQBTx0AQ9yD12AB7mHLsCD3EMX4EHufwJIOEs9kLQJngAAAABJRU5ErkJggg==\"</span>\n<span class=\"nt\">&gt;</span>\n</pre></div>\n</div>\n\n<ul>\n<li>(注意点）コードブロック中の記述も絵文字に変換しようとするので気をつけてください。</li>\n</ul>\n\n<h4>\n<span id=\"設定-3\" class=\"fragment\"></span><a href=\"#%E8%A8%AD%E5%AE%9A-3\"><i class=\"fa fa-link\"></i></a>設定</h4>\n\n<p>オプションで色々指定できます。</p>\n\n<div class=\"code-frame\" data-lang=\"javascript\">\n<div class=\"code-lang\"><span class=\"bold\">gatsby-config.jsの一部</span></div>\n<div class=\"highlight\"><pre>  <span class=\"nx\">plugins</span><span class=\"p\">:</span> <span class=\"p\">[</span>\n    <span class=\"p\">{</span>\n      <span class=\"na\">resolve</span><span class=\"p\">:</span> <span class=\"s2\">`gatsby-transformer-remark`</span><span class=\"p\">,</span>\n      <span class=\"na\">options</span><span class=\"p\">:</span> <span class=\"p\">{</span>\n        <span class=\"na\">plugins</span><span class=\"p\">:</span> <span class=\"p\">[</span>\n          <span class=\"p\">{</span>\n            <span class=\"na\">resolve</span><span class=\"p\">:</span> <span class=\"s1\">'gatsby-remark-emojis'</span><span class=\"p\">,</span>\n            <span class=\"na\">options</span><span class=\"p\">:</span> <span class=\"p\">{</span>\n              <span class=\"c1\">// falseにすると絵文字機能をオフにできます</span>\n              <span class=\"na\">active</span> <span class=\"p\">:</span> <span class=\"kc\">true</span><span class=\"p\">,</span>\n              <span class=\"c1\">// サイズは16, 24, 32, 64から選べます</span>\n              <span class=\"na\">size</span>   <span class=\"p\">:</span> <span class=\"mi\">64</span><span class=\"p\">,</span>\n              <span class=\"c1\">// 独自クラスを追加できます</span>\n              <span class=\"na\">class</span>  <span class=\"p\">:</span> <span class=\"s1\">'emoji-icon'</span><span class=\"p\">,</span>\n              <span class=\"c1\">// 独自スタイルを追加できます</span>\n              <span class=\"na\">styles</span> <span class=\"p\">:</span> <span class=\"p\">{</span>\n                <span class=\"na\">display</span>      <span class=\"p\">:</span> <span class=\"s1\">'inline'</span><span class=\"p\">,</span>\n                <span class=\"na\">margin</span>       <span class=\"p\">:</span> <span class=\"s1\">'0'</span><span class=\"p\">,</span>\n                <span class=\"s1\">'margin-top'</span> <span class=\"p\">:</span> <span class=\"s1\">'1px'</span><span class=\"p\">,</span>\n                <span class=\"na\">position</span>     <span class=\"p\">:</span> <span class=\"s1\">'relative'</span><span class=\"p\">,</span>\n                <span class=\"na\">top</span>          <span class=\"p\">:</span> <span class=\"s1\">'5px'</span><span class=\"p\">,</span>\n                <span class=\"na\">width</span>        <span class=\"p\">:</span> <span class=\"s1\">'25px'</span>\n              <span class=\"p\">}</span>\n            <span class=\"p\">}</span>\n          <span class=\"p\">}</span>\n        <span class=\"p\">]</span>\n      <span class=\"p\">}</span>\n    <span class=\"p\">}</span>\n  <span class=\"p\">}</span>\n</pre></div>\n</div>\n\n<h4>\n<span id=\"使い方-2\" class=\"fragment\"></span><a href=\"#%E4%BD%BF%E3%81%84%E6%96%B9-2\"><i class=\"fa fa-link\"></i></a>使い方</h4>\n\n<p>マークダウンにて<code>:XXX:</code>のような形式で記述します。<br>\n例 <img alt=\":100:\" class=\"emoji\" height=\"20\" src=\"https://cdn.qiita.com/emoji/twemoji/unicode/1f4af.png\" title=\":100:\" width=\"20\"></p>\n\n<p><br></p><hr>\n\n<h3>\n<span id=\"gatsby-remark-graphviz\" class=\"fragment\"></span><a href=\"#gatsby-remark-graphviz\"><i class=\"fa fa-link\"></i></a><a href=\"https://www.gatsbyjs.org/packages/gatsby-remark-graphviz\" rel=\"nofollow noopener\" target=\"_blank\">gatsby-remark-graphviz</a>\n</h3>\n\n<p><strong>マークダウンで<a href=\"https://www.graphviz.org/\" rel=\"nofollow noopener\" target=\"_blank\">Graphviz</a>(dot言語で記述されたグラフ構造を任意のフォーマットの画像ファイルへ出力するツール)を使えるようにする</strong><br></p>\n\n<ul>\n<li>内部的には<a href=\"https://github.com/mdaines/viz.js/\" rel=\"nofollow noopener\" target=\"_blank\">viz.js</a>でコードブロックをSVGファイルに変換しています。</li>\n</ul>\n\n<h4>\n<span id=\"設定-4\" class=\"fragment\"></span><a href=\"#%E8%A8%AD%E5%AE%9A-4\"><i class=\"fa fa-link\"></i></a>設定</h4>\n\n<p><code>gatsby-remark-prismjs</code>のようなコードブロックを編集するプラグインより先に定義してください。</p>\n\n<div class=\"code-frame\" data-lang=\"javascript\">\n<div class=\"code-lang\"><span class=\"bold\">gatsby-config.jsの一部</span></div>\n<div class=\"highlight\"><pre><span class=\"nx\">plugins</span><span class=\"p\">:</span> <span class=\"p\">[</span>\n  <span class=\"p\">{</span>\n    <span class=\"na\">resolve</span><span class=\"p\">:</span> <span class=\"s1\">'gatsby-transformer-remark'</span><span class=\"p\">,</span>\n    <span class=\"na\">options</span><span class=\"p\">:</span> <span class=\"p\">{</span>\n      <span class=\"na\">plugins</span><span class=\"p\">:</span> <span class=\"p\">[</span>\n        <span class=\"s1\">'gatsby-remark-graphviz'</span>\n      <span class=\"p\">]</span>\n    <span class=\"p\">}</span>\n  <span class=\"p\">}</span>\n<span class=\"p\">],</span>\n</pre></div>\n</div>\n\n<h4>\n<span id=\"使い方-3\" class=\"fragment\"></span><a href=\"#%E4%BD%BF%E3%81%84%E6%96%B9-3\"><i class=\"fa fa-link\"></i></a>使い方</h4>\n\n<p>マークダウンで下記のように言語を<code>dot</code>としてコードブロックを記述します。</p>\n\n<div class=\"code-frame\" data-lang=\"text\"><div class=\"highlight\"><pre>\n```dot\ndigraph graphname {\n  a -&gt; b;\n  b -&gt; c;\n  a -&gt; c;\n}\n```\n</pre></div></div>\n\n<p>すると下記のように表示されます。</p>\n\n<p><a href=\"https://camo.qiitausercontent.com/a2b30c9c36ba82e0bbc0728ee541daa180c30f07/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f34393931352f34363931373735662d343735302d383263312d306664312d6638623932343032623139662e706e67\" target=\"_blank\" rel=\"nofollow noopener\"><img src=\"https://camo.qiitausercontent.com/a2b30c9c36ba82e0bbc0728ee541daa180c30f07/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f34393931352f34363931373735662d343735302d383263312d306664312d6638623932343032623139662e706e67\" alt=\"スクリーンショット 2018-10-22 23.26.08.png\" data-canonical-src=\"https://qiita-image-store.s3.amazonaws.com/0/49915/4691775f-4750-82c1-0fd1-f8b92402b19f.png\"></a></p>\n\n<p><br></p><hr>\n\n<h3>\n<span id=\"gatsby-remark-katex\" class=\"fragment\"></span><a href=\"#gatsby-remark-katex\"><i class=\"fa fa-link\"></i></a><a href=\"https://www.gatsbyjs.org/packages/gatsby-remark-katex\" rel=\"nofollow noopener\" target=\"_blank\">gatsby-remark-katex</a>\n</h3>\n\n<p><strong>マークダウンで数式が使えるようにする</strong><br></p>\n\n<h4>\n<span id=\"設定-5\" class=\"fragment\"></span><a href=\"#%E8%A8%AD%E5%AE%9A-5\"><i class=\"fa fa-link\"></i></a>設定</h4>\n\n<div class=\"code-frame\" data-lang=\"javascript\">\n<div class=\"code-lang\"><span class=\"bold\">gatsby-config.jsの一部</span></div>\n<div class=\"highlight\"><pre>  <span class=\"nx\">plugins</span><span class=\"p\">:</span> <span class=\"p\">[</span>\n    <span class=\"p\">{</span>\n      <span class=\"na\">resolve</span><span class=\"p\">:</span> <span class=\"s1\">'gatsby-transformer-remark'</span><span class=\"p\">,</span>\n      <span class=\"na\">options</span><span class=\"p\">:</span> <span class=\"p\">{</span>\n        <span class=\"na\">plugins</span><span class=\"p\">:</span> <span class=\"p\">[</span>\n          <span class=\"s2\">`gatsby-remark-katex`</span><span class=\"p\">,</span>\n        <span class=\"p\">]</span>\n      <span class=\"p\">}</span>\n    <span class=\"p\">}</span>\n  <span class=\"p\">],</span>\n</pre></div>\n</div>\n\n<p><br><br>\n追加でCSSをテンプレートで読み込んでください。</p>\n\n<div class=\"code-frame\" data-lang=\"javascript\">\n<div class=\"code-lang\"><span class=\"bold\">テンプレート</span></div>\n<div class=\"highlight\"><pre><span class=\"k\">import</span> <span class=\"s1\">'katex/dist/katex.min.css'</span><span class=\"p\">;</span>\n</pre></div>\n</div>\n\n<h4>\n<span id=\"使い方-4\" class=\"fragment\"></span><a href=\"#%E4%BD%BF%E3%81%84%E6%96%B9-4\"><i class=\"fa fa-link\"></i></a>使い方</h4>\n\n<p>方程式を '$'で囲みます。</p>\n\n<div class=\"code-frame\" data-lang=\"text\"><div class=\"highlight\"><pre>$\nf(x) = \\int_{-\\infty}^\\infty\\hat f(\\xi)\\,e^{2 \\pi i \\xi x}\\,d\\xi\n$\n</pre></div></div>\n\n<p>すると下記のように表示されます。</p>\n\n<p><a href=\"https://camo.qiitausercontent.com/b3424fcce7aadcffa5675ed4a549f65fbd639dca/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f34393931352f37626364643737352d313633332d623835372d303963622d3338626632393238363663362e706e67\" target=\"_blank\" rel=\"nofollow noopener\"><img src=\"https://camo.qiitausercontent.com/b3424fcce7aadcffa5675ed4a549f65fbd639dca/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f34393931352f37626364643737352d313633332d623835372d303963622d3338626632393238363663362e706e67\" alt=\"スクリーンショット 2018-10-22 23.29.41.png\" data-canonical-src=\"https://qiita-image-store.s3.amazonaws.com/0/49915/7bcdd775-1633-b857-09cb-38bf292866c6.png\"></a></p>\n\n<p><br></p><hr>\n\n<h3>\n<span id=\"gatsby-remark-embed-snippet\" class=\"fragment\"></span><a href=\"#gatsby-remark-embed-snippet\"><i class=\"fa fa-link\"></i></a><a href=\"https://www.gatsbyjs.org/packages/gatsby-remark-embed-snippet\" rel=\"nofollow noopener\" target=\"_blank\">gatsby-remark-embed-snippet</a>\n</h3>\n\n<p><strong>マークダウンでJavaSriptファイルなどを読み込んでコードブロックに埋め込む</strong><br></p>\n\n<h4>\n<span id=\"設定-6\" class=\"fragment\"></span><a href=\"#%E8%A8%AD%E5%AE%9A-6\"><i class=\"fa fa-link\"></i></a>設定</h4>\n\n<p><code>directory</code>は読み込み対象資産のフォルダを指定します。<br><br>\n必ず<code>gatsby-remark-prismjs</code>より前に指定してください。</p>\n\n<div class=\"code-frame\" data-lang=\"javascript\">\n<div class=\"code-lang\"><span class=\"bold\">gatsby-config.jsの一部</span></div>\n<div class=\"highlight\"><pre>  <span class=\"nx\">plugins</span><span class=\"p\">:</span> <span class=\"p\">[</span>\n    <span class=\"p\">{</span>\n      <span class=\"na\">resolve</span><span class=\"p\">:</span> <span class=\"s2\">`gatsby-transformer-remark`</span><span class=\"p\">,</span>\n      <span class=\"na\">options</span><span class=\"p\">:</span> <span class=\"p\">{</span>\n        <span class=\"na\">plugins</span><span class=\"p\">:</span> <span class=\"p\">[</span>\n          <span class=\"p\">{</span>\n            <span class=\"na\">resolve</span><span class=\"p\">:</span> <span class=\"s2\">\"gatsby-remark-embed-snippet\"</span><span class=\"p\">,</span>\n            <span class=\"na\">options</span><span class=\"p\">:</span> <span class=\"p\">{</span>\n              <span class=\"na\">classPrefix</span><span class=\"p\">:</span> <span class=\"s2\">\"language-\"</span><span class=\"p\">,</span>\n              <span class=\"na\">directory</span><span class=\"p\">:</span> <span class=\"s2\">`</span><span class=\"p\">${</span><span class=\"nx\">__dirname</span><span class=\"p\">}</span><span class=\"s2\">/examples/`</span><span class=\"p\">,</span>\n            <span class=\"p\">},</span>\n          <span class=\"p\">},</span>\n          <span class=\"p\">{</span>\n            <span class=\"na\">resolve</span><span class=\"p\">:</span> <span class=\"s2\">`gatsby-remark-prismjs`</span><span class=\"p\">,</span>\n            <span class=\"na\">options</span><span class=\"p\">:</span> <span class=\"p\">{</span>\n              <span class=\"na\">classPrefix</span><span class=\"p\">:</span> <span class=\"s2\">\"language-\"</span><span class=\"p\">,</span>\n              <span class=\"na\">inlineCodeMarker</span><span class=\"p\">:</span> <span class=\"kc\">null</span><span class=\"p\">,</span>\n              <span class=\"na\">aliases</span><span class=\"p\">:</span> <span class=\"p\">{},</span>\n              <span class=\"na\">showLineNumbers</span><span class=\"p\">:</span> <span class=\"kc\">true</span><span class=\"p\">,</span>\n            <span class=\"p\">},</span>\n          <span class=\"p\">},</span>\n        <span class=\"p\">]</span>\n      <span class=\"p\">}</span>\n    <span class=\"p\">}</span>\n  <span class=\"p\">]</span>\n</pre></div>\n</div>\n\n<h4>\n<span id=\"使い方-5\" class=\"fragment\"></span><a href=\"#%E4%BD%BF%E3%81%84%E6%96%B9-5\"><i class=\"fa fa-link\"></i></a>使い方</h4>\n\n<p>マークダウンで`embed:設定で指定したディレクトリからの相対パス`のように指定します。<br>\n指定行を強調したい場合は、読み込み対象ファイルにコメントで記述します。</p>\n\n<h4>\n<span id=\"javascriptファイルの場合\" class=\"fragment\"></span><a href=\"#javascript%E3%83%95%E3%82%A1%E3%82%A4%E3%83%AB%E3%81%AE%E5%A0%B4%E5%90%88\"><i class=\"fa fa-link\"></i></a>JavaScriptファイルの場合</h4>\n\n<h5>\n<span id=\"読み込み対象ファイル\" class=\"fragment\"></span><a href=\"#%E8%AA%AD%E3%81%BF%E8%BE%BC%E3%81%BF%E5%AF%BE%E8%B1%A1%E3%83%95%E3%82%A1%E3%82%A4%E3%83%AB\"><i class=\"fa fa-link\"></i></a>読み込み対象ファイル</h5>\n\n<div class=\"code-frame\" data-lang=\"javascript\">\n<div class=\"code-lang\"><span class=\"bold\">examples/2018/10/21/sample.js</span></div>\n<div class=\"highlight\"><pre><span class=\"k\">import</span> <span class=\"nx\">React</span> <span class=\"k\">from</span> <span class=\"s2\">\"react\"</span>\n<span class=\"k\">import</span> <span class=\"nx\">ReactDOM</span> <span class=\"k\">from</span> <span class=\"s2\">\"react-dom\"</span>\n\n<span class=\"kd\">const</span> <span class=\"nx\">name</span> <span class=\"o\">=</span> <span class=\"s2\">\"Brian\"</span>\n\n<span class=\"c1\">// highlight-range{2-3}</span>\n<span class=\"nx\">ReactDOM</span><span class=\"p\">.</span><span class=\"nx\">render</span><span class=\"p\">(</span>\n  <span class=\"o\">&lt;</span><span class=\"nx\">div</span><span class=\"o\">&gt;&lt;</span><span class=\"nx\">h1</span><span class=\"o\">&gt;</span><span class=\"nx\">Hello</span><span class=\"p\">,</span> <span class=\"nx\">$</span><span class=\"p\">{</span><span class=\"nx\">name</span><span class=\"p\">}</span><span class=\"o\">!&lt;</span><span class=\"sr\">/h1&gt;&lt;/</span><span class=\"nx\">div</span><span class=\"o\">&gt;</span><span class=\"p\">,</span>\n  <span class=\"nb\">document</span><span class=\"p\">.</span><span class=\"nx\">getElementById</span><span class=\"p\">(</span><span class=\"s2\">\"root\"</span><span class=\"p\">)</span>\n<span class=\"p\">);</span>\n</pre></div>\n</div>\n\n<h5>\n<span id=\"マークダウン記述\" class=\"fragment\"></span><a href=\"#%E3%83%9E%E3%83%BC%E3%82%AF%E3%83%80%E3%82%A6%E3%83%B3%E8%A8%98%E8%BF%B0\"><i class=\"fa fa-link\"></i></a>マークダウン記述</h5>\n\n<div class=\"code-frame\" data-lang=\"text\"><div class=\"highlight\"><pre>\n`embed:2018/10/21/sample.js`\n</pre></div></div>\n\n<h5>\n<span id=\"表示結果\" class=\"fragment\"></span><a href=\"#%E8%A1%A8%E7%A4%BA%E7%B5%90%E6%9E%9C\"><i class=\"fa fa-link\"></i></a>表示結果</h5>\n\n<p><a href=\"https://camo.qiitausercontent.com/3486057ab9d26988c899775bc9321081cd52bf7f/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f34393931352f38316131383861352d376161352d333766372d336563652d3336663130303136386630372e706e67\" target=\"_blank\" rel=\"nofollow noopener\"><img src=\"https://camo.qiitausercontent.com/3486057ab9d26988c899775bc9321081cd52bf7f/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f34393931352f38316131383861352d376161352d333766372d336563652d3336663130303136386630372e706e67\" alt=\"スクリーンショット 2018-10-22 23.31.18.png\" data-canonical-src=\"https://qiita-image-store.s3.amazonaws.com/0/49915/81a188a5-7aa5-37f7-3ece-36f100168f07.png\"></a></p>\n\n<h4>\n<span id=\"cssファイルの場合\" class=\"fragment\"></span><a href=\"#css%E3%83%95%E3%82%A1%E3%82%A4%E3%83%AB%E3%81%AE%E5%A0%B4%E5%90%88\"><i class=\"fa fa-link\"></i></a>CSSファイルの場合</h4>\n\n<h5>\n<span id=\"読み込み対象ファイル-1\" class=\"fragment\"></span><a href=\"#%E8%AA%AD%E3%81%BF%E8%BE%BC%E3%81%BF%E5%AF%BE%E8%B1%A1%E3%83%95%E3%82%A1%E3%82%A4%E3%83%AB-1\"><i class=\"fa fa-link\"></i></a>読み込み対象ファイル</h5>\n\n<div class=\"code-frame\" data-lang=\"javascript\">\n<div class=\"code-lang\"><span class=\"bold\">examples/2018/10/21/sample.css</span></div>\n<div class=\"highlight\"><pre><span class=\"nx\">html</span> <span class=\"p\">{</span>\n  <span class=\"cm\">/* highlight-range{1-2} */</span>\n  <span class=\"nl\">height</span><span class=\"p\">:</span> <span class=\"mi\">100</span><span class=\"o\">%</span><span class=\"p\">;</span>\n  <span class=\"nl\">width</span><span class=\"p\">:</span> <span class=\"mi\">100</span><span class=\"o\">%</span><span class=\"p\">;</span>\n<span class=\"p\">}</span>\n\n<span class=\"o\">*</span> <span class=\"p\">{</span>\n  <span class=\"nx\">box</span><span class=\"o\">-</span><span class=\"na\">sizing</span><span class=\"p\">:</span> <span class=\"nx\">border</span><span class=\"o\">-</span><span class=\"nx\">box</span><span class=\"p\">;</span> <span class=\"cm\">/* highlight-line */</span>\n<span class=\"p\">}</span>\n</pre></div>\n</div>\n\n<h5>\n<span id=\"マークダウン記述-1\" class=\"fragment\"></span><a href=\"#%E3%83%9E%E3%83%BC%E3%82%AF%E3%83%80%E3%82%A6%E3%83%B3%E8%A8%98%E8%BF%B0-1\"><i class=\"fa fa-link\"></i></a>マークダウン記述</h5>\n\n<div class=\"code-frame\" data-lang=\"text\"><div class=\"highlight\"><pre>\n`embed:2018/10/21/sample.css`\n</pre></div></div>\n\n<h5>\n<span id=\"表示結果-1\" class=\"fragment\"></span><a href=\"#%E8%A1%A8%E7%A4%BA%E7%B5%90%E6%9E%9C-1\"><i class=\"fa fa-link\"></i></a>表示結果</h5>\n\n<p><a href=\"https://camo.qiitausercontent.com/a51f4e283b1a709b07e92ee2f3ca454126dddea7/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f34393931352f35653664393538392d366166632d633761312d653435382d3362323439623861303737362e706e67\" target=\"_blank\" rel=\"nofollow noopener\"><img src=\"https://camo.qiitausercontent.com/a51f4e283b1a709b07e92ee2f3ca454126dddea7/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f34393931352f35653664393538392d366166632d633761312d653435382d3362323439623861303737362e706e67\" alt=\"スクリーンショット 2018-10-22 23.31.26.png\" data-canonical-src=\"https://qiita-image-store.s3.amazonaws.com/0/49915/5e6d9589-6afc-c7a1-e458-3b249b8a0776.png\"></a></p>\n\n<h4>\n<span id=\"htmlファイルの場合\" class=\"fragment\"></span><a href=\"#html%E3%83%95%E3%82%A1%E3%82%A4%E3%83%AB%E3%81%AE%E5%A0%B4%E5%90%88\"><i class=\"fa fa-link\"></i></a>HTMLファイルの場合</h4>\n\n<h5>\n<span id=\"読み込み対象ファイル-2\" class=\"fragment\"></span><a href=\"#%E8%AA%AD%E3%81%BF%E8%BE%BC%E3%81%BF%E5%AF%BE%E8%B1%A1%E3%83%95%E3%82%A1%E3%82%A4%E3%83%AB-2\"><i class=\"fa fa-link\"></i></a>読み込み対象ファイル</h5>\n\n<div class=\"code-frame\" data-lang=\"html\">\n<div class=\"code-lang\"><span class=\"bold\">examples/2018/10/21/sample.html</span></div>\n<div class=\"highlight\"><pre><span class=\"nt\">&lt;html&gt;</span>\n  <span class=\"nt\">&lt;body&gt;</span>\n    <span class=\"nt\">&lt;h1&gt;</span>highlight me<span class=\"nt\">&lt;/h1&gt;</span> <span class=\"c\">&lt;!-- highlight-line --&gt;</span>\n    <span class=\"nt\">&lt;p&gt;</span>\n      <span class=\"c\">&lt;!-- highlight-next-line --&gt;</span>\n      And me\n    <span class=\"nt\">&lt;/p&gt;</span>\n  <span class=\"nt\">&lt;/body&gt;</span>\n<span class=\"nt\">&lt;/html&gt;</span>\n</pre></div>\n</div>\n\n<h5>\n<span id=\"マークダウン記述-2\" class=\"fragment\"></span><a href=\"#%E3%83%9E%E3%83%BC%E3%82%AF%E3%83%80%E3%82%A6%E3%83%B3%E8%A8%98%E8%BF%B0-2\"><i class=\"fa fa-link\"></i></a>マークダウン記述</h5>\n\n<div class=\"code-frame\" data-lang=\"text\"><div class=\"highlight\"><pre>\n`embed:2018/10/21/sample.html`\n</pre></div></div>\n\n<h5>\n<span id=\"表示結果-2\" class=\"fragment\"></span><a href=\"#%E8%A1%A8%E7%A4%BA%E7%B5%90%E6%9E%9C-2\"><i class=\"fa fa-link\"></i></a>表示結果</h5>\n\n<p><a href=\"https://camo.qiitausercontent.com/2515a8804b1cf6e4e8913ee61154356d7f59ce0d/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f34393931352f39313761623834642d633130382d663466382d326661362d3432663931303032626633632e706e67\" target=\"_blank\" rel=\"nofollow noopener\"><img src=\"https://camo.qiitausercontent.com/2515a8804b1cf6e4e8913ee61154356d7f59ce0d/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f34393931352f39313761623834642d633130382d663466382d326661362d3432663931303032626633632e706e67\" alt=\"スクリーンショット 2018-10-22 23.31.35.png\" data-canonical-src=\"https://qiita-image-store.s3.amazonaws.com/0/49915/917ab84d-c108-f4f8-2fa6-42f91002bf3c.png\"></a></p>\n\n<h4>\n<span id=\"yamlの場合\" class=\"fragment\"></span><a href=\"#yaml%E3%81%AE%E5%A0%B4%E5%90%88\"><i class=\"fa fa-link\"></i></a>YAMLの場合</h4>\n\n<h5>\n<span id=\"読み込み対象ファイル-3\" class=\"fragment\"></span><a href=\"#%E8%AA%AD%E3%81%BF%E8%BE%BC%E3%81%BF%E5%AF%BE%E8%B1%A1%E3%83%95%E3%82%A1%E3%82%A4%E3%83%AB-3\"><i class=\"fa fa-link\"></i></a>読み込み対象ファイル</h5>\n\n<div class=\"code-frame\" data-lang=\"yaml\">\n<div class=\"code-lang\"><span class=\"bold\">examples/2018/10/21/sample.yaml</span></div>\n<div class=\"highlight\"><pre><span class=\"na\">foo</span><span class=\"pi\">:</span> <span class=\"s2\">\"</span><span class=\"s\">highlighted\"</span> <span class=\"c1\"># highlight-line</span>\n<span class=\"na\">bar</span><span class=\"pi\">:</span> <span class=\"s2\">\"</span><span class=\"s\">not</span><span class=\"nv\"> </span><span class=\"s\">highlighted\"</span>\n<span class=\"c1\"># highlight-range{1-2}</span>\n<span class=\"na\">baz</span><span class=\"pi\">:</span> <span class=\"s2\">\"</span><span class=\"s\">highlighted\"</span>\n<span class=\"na\">quz</span><span class=\"pi\">:</span> <span class=\"s2\">\"</span><span class=\"s\">highlighted\"</span>\n</pre></div>\n</div>\n\n<h5>\n<span id=\"マークダウン記述-3\" class=\"fragment\"></span><a href=\"#%E3%83%9E%E3%83%BC%E3%82%AF%E3%83%80%E3%82%A6%E3%83%B3%E8%A8%98%E8%BF%B0-3\"><i class=\"fa fa-link\"></i></a>マークダウン記述</h5>\n\n<div class=\"code-frame\" data-lang=\"text\"><div class=\"highlight\"><pre>\n`embed:2018/10/21/sample.yaml`\n</pre></div></div>\n\n<h5>\n<span id=\"表示結果-3\" class=\"fragment\"></span><a href=\"#%E8%A1%A8%E7%A4%BA%E7%B5%90%E6%9E%9C-3\"><i class=\"fa fa-link\"></i></a>表示結果</h5>\n\n<p><a href=\"https://camo.qiitausercontent.com/1daa769151a85e6c6800f7c02ecd3051387eaf5d/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f34393931352f63633830613530352d653633652d663862322d313833352d3465646664643832643339622e706e67\" target=\"_blank\" rel=\"nofollow noopener\"><img src=\"https://camo.qiitausercontent.com/1daa769151a85e6c6800f7c02ecd3051387eaf5d/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f34393931352f63633830613530352d653633652d663862322d313833352d3465646664643832643339622e706e67\" alt=\"スクリーンショット 2018-10-22 23.31.44.png\" data-canonical-src=\"https://qiita-image-store.s3.amazonaws.com/0/49915/cc80a505-e63e-f8b2-1835-4edfdd82d39b.png\"></a></p>\n\n<p><br></p><hr>\n\n<h3>\n<span id=\"gatsby-remark-copy-linked-files\" class=\"fragment\"></span><a href=\"#gatsby-remark-copy-linked-files\"><i class=\"fa fa-link\"></i></a><a href=\"https://www.gatsbyjs.org/packages/gatsby-remark-copy-linked-files\" rel=\"nofollow noopener\" target=\"_blank\">gatsby-remark-copy-linked-files</a>\n</h3>\n\n<p><strong>マークダウンのリンクや画像で使われているPDFや動画などをビルド時にpublicフォルダにコピーする</strong></p>\n\n<h4>\n<span id=\"設定-7\" class=\"fragment\"></span><a href=\"#%E8%A8%AD%E5%AE%9A-7\"><i class=\"fa fa-link\"></i></a>設定</h4>\n\n<div class=\"code-frame\" data-lang=\"javascript\">\n<div class=\"code-lang\"><span class=\"bold\">gatsby-config.jsの一部</span></div>\n<div class=\"highlight\"><pre>  <span class=\"nx\">plugins</span><span class=\"p\">:</span> <span class=\"p\">[</span>\n    <span class=\"p\">{</span>\n      <span class=\"na\">resolve</span><span class=\"p\">:</span> <span class=\"s2\">`gatsby-transformer-remark`</span><span class=\"p\">,</span>\n      <span class=\"na\">options</span><span class=\"p\">:</span> <span class=\"p\">{</span>\n        <span class=\"na\">plugins</span><span class=\"p\">:</span> <span class=\"p\">[</span><span class=\"s2\">\"gatsby-remark-copy-linked-files\"</span><span class=\"p\">],</span>\n      <span class=\"p\">},</span>\n    <span class=\"p\">},</span>\n  <span class=\"p\">]</span>\n</pre></div>\n</div>\n\n<p><br><br>\nコピー先をpublic以外にしたい場合はオプションを指定します。</p>\n\n<div class=\"code-frame\" data-lang=\"javascript\">\n<div class=\"code-lang\"><span class=\"bold\">gatsby-config.jsの一部</span></div>\n<div class=\"highlight\"><pre>  <span class=\"nx\">plugins</span><span class=\"p\">:</span> <span class=\"p\">[</span>\n    <span class=\"p\">{</span>\n      <span class=\"na\">resolve</span><span class=\"p\">:</span> <span class=\"s2\">`gatsby-transformer-remark`</span><span class=\"p\">,</span>\n      <span class=\"na\">options</span><span class=\"p\">:</span> <span class=\"p\">{</span>\n        <span class=\"na\">plugins</span><span class=\"p\">:</span> <span class=\"p\">[</span>\n          <span class=\"p\">{</span>\n            <span class=\"na\">resolve</span><span class=\"p\">:</span> <span class=\"s1\">'gatsby-remark-copy-linked-files'</span><span class=\"p\">,</span>\n            <span class=\"na\">options</span><span class=\"p\">:</span> <span class=\"p\">{</span>\n              <span class=\"na\">destinationDir</span><span class=\"p\">:</span> <span class=\"s1\">'path/to/dir'</span><span class=\"p\">,</span>\n            <span class=\"p\">}</span>\n          <span class=\"p\">}</span>\n        <span class=\"p\">]</span>\n      <span class=\"p\">}</span>\n    <span class=\"p\">}</span>\n  <span class=\"p\">]</span>\n</pre></div>\n</div>\n\n<p><br></p>\n\n<p>コピー対象外ファイル指定することもできます。その場合は<code>ignoreFileExtensions</code>を設定します。<br>\nこのプロパティは<code>[\"png\", \"jpg\", \"jpeg\", \"bmp\", \"tiff\"]</code>がデフォルトです。<br>\nというのも、これらのファイルはgatsby-remark-imagesを使って自動的にレスポンシブな画像が生成されることを前提にしているからです。<br>\nもしgatsby-remark-imagesを使わずにpublicファイルへの単純コピーにしたい場合は下記のようにします。</p>\n\n<div class=\"code-frame\" data-lang=\"javascript\">\n<div class=\"code-lang\"><span class=\"bold\">gatsby-config.jsの一部</span></div>\n<div class=\"highlight\"><pre>  <span class=\"nx\">plugins</span><span class=\"p\">:</span> <span class=\"p\">[</span>\n    <span class=\"p\">{</span>\n      <span class=\"na\">resolve</span><span class=\"p\">:</span> <span class=\"s2\">`gatsby-transformer-remark`</span><span class=\"p\">,</span>\n      <span class=\"na\">options</span><span class=\"p\">:</span> <span class=\"p\">{</span>\n        <span class=\"na\">plugins</span><span class=\"p\">:</span> <span class=\"p\">[</span>\n          <span class=\"p\">{</span>\n            <span class=\"na\">resolve</span><span class=\"p\">:</span> <span class=\"s2\">\"gatsby-remark-copy-linked-files\"</span><span class=\"p\">,</span>\n            <span class=\"na\">options</span><span class=\"p\">:</span> <span class=\"p\">{</span>\n              <span class=\"na\">ignoreFileExtensions</span><span class=\"p\">:</span> <span class=\"p\">[],</span>\n            <span class=\"p\">},</span>\n          <span class=\"p\">},</span>\n        <span class=\"p\">],</span>\n      <span class=\"p\">},</span>\n    <span class=\"p\">},</span>\n  <span class=\"p\">]</span>\n</pre></div>\n</div>\n\n<p><br></p><hr>\n\n<h3>\n<span id=\"gatsby-remark-images\" class=\"fragment\"></span><a href=\"#gatsby-remark-images\"><i class=\"fa fa-link\"></i></a><a href=\"https://www.gatsbyjs.org/packages/gatsby-remark-images\" rel=\"nofollow noopener\" target=\"_blank\">gatsby-remark-images</a>\n</h3>\n\n<p><strong>マークダウンで画像をスマートに表示できるようにする</strong><br></p>\n\n<ul>\n<li>画像ロード後にレイアウトがガタっとずれないように、画像の大きさ分の空要素を確保しておく</li>\n<li>ブラウザ幅別に画像を生成し<code>img</code>タグの<code>srcset</code>属性と<code>sizes</code>属性を設定します</li>\n<li>画像を20px幅に小さくしたものを、画像ロード中にプレースホルダーとして表示します。これはMediumとFacebookで使われているテクニックです。</li>\n</ul>\n\n<h4>\n<span id=\"設定使い方\" class=\"fragment\"></span><a href=\"#%E8%A8%AD%E5%AE%9A%E4%BD%BF%E3%81%84%E6%96%B9\"><i class=\"fa fa-link\"></i></a>設定・使い方</h4>\n\n<p><code>gatsby-remark-images</code>、<code>gatsby-plugin-sharp</code>とあわせて使いましょう。<br>\nオプションに指定したmaxWidthにあわせて、プラグインがいい感じの色々サイズの画像を複数生成してくれます。</p>\n\n<div class=\"code-frame\" data-lang=\"javascript\">\n<div class=\"code-lang\"><span class=\"bold\">gatsby-config.jsの一部</span></div>\n<div class=\"highlight\"><pre>  <span class=\"nx\">plugins</span><span class=\"p\">:</span> <span class=\"p\">[</span>\n    <span class=\"s2\">`gatsby-plugin-sharp`</span><span class=\"p\">,</span>\n    <span class=\"p\">{</span>\n      <span class=\"na\">resolve</span><span class=\"p\">:</span> <span class=\"s2\">`gatsby-transformer-remark`</span><span class=\"p\">,</span>\n      <span class=\"na\">options</span><span class=\"p\">:</span> <span class=\"p\">{</span>\n        <span class=\"na\">plugins</span><span class=\"p\">:</span> <span class=\"p\">[</span>\n          <span class=\"p\">{</span>\n            <span class=\"na\">resolve</span><span class=\"p\">:</span> <span class=\"s2\">`gatsby-remark-images`</span><span class=\"p\">,</span>\n            <span class=\"na\">options</span><span class=\"p\">:</span> <span class=\"p\">{</span>\n              <span class=\"na\">maxWidth</span><span class=\"p\">:</span> <span class=\"mi\">590</span><span class=\"p\">,</span>\n            <span class=\"p\">},</span>\n          <span class=\"p\">},</span>\n        <span class=\"p\">],</span>\n      <span class=\"p\">},</span>\n    <span class=\"p\">},</span>\n  <span class=\"p\">]</span>\n</pre></div>\n</div>\n\n<p><br></p><hr>\n\n<h3>\n<span id=\"gatsby-remark-responsive-iframe\" class=\"fragment\"></span><a href=\"#gatsby-remark-responsive-iframe\"><i class=\"fa fa-link\"></i></a><a href=\"https://www.gatsbyjs.org/packages/gatsby-remark-responsive-iframe\" rel=\"nofollow noopener\" target=\"_blank\">gatsby-remark-responsive-iframe</a>\n</h3>\n\n<p><strong>マークダウンでiframeタグを縦横比固定でレスポンシブにする</strong></p>\n\n<h4>\n<span id=\"使い方-6\" class=\"fragment\"></span><a href=\"#%E4%BD%BF%E3%81%84%E6%96%B9-6\"><i class=\"fa fa-link\"></i></a>使い方</h4>\n\n<p><code>gatsby-config.js</code>の設定は特に変わったところはありません。<br>\nただし縦横比を明確にするためマークダウン中のiframeにはwidthとheigth属性を必ず指定してください。</p>\n\n<div class=\"code-frame\" data-lang=\"markdown\">\n<div class=\"code-lang\"><span class=\"bold\">マークダウンサンプル</span></div>\n<div class=\"highlight\"><pre>This is a beautiful iframe:\n\n<span class=\"nt\">&lt;iframe</span> <span class=\"na\">url=</span><span class=\"s\">\"http://www.example.com/\"</span> <span class=\"na\">width=</span><span class=\"s\">\"600\"</span> <span class=\"na\">height=</span><span class=\"s\">\"400\"</span><span class=\"nt\">&gt;&lt;/iframe&gt;</span>\n</pre></div>\n</div>\n\n<p><br></p><hr>\n\n<h3>\n<span id=\"gatsby-remark-embed-youtube\" class=\"fragment\"></span><a href=\"#gatsby-remark-embed-youtube\"><i class=\"fa fa-link\"></i></a><a href=\"https://www.gatsbyjs.org/packages/gatsby-remark-embed-youtube\" rel=\"nofollow noopener\" target=\"_blank\">gatsby-remark-embed-youtube</a>\n</h3>\n\n<p><strong>マークダウンでYoutubeを埋め込めるようにする</strong></p>\n\n<h4>\n<span id=\"設定-8\" class=\"fragment\"></span><a href=\"#%E8%A8%AD%E5%AE%9A-8\"><i class=\"fa fa-link\"></i></a>設定</h4>\n\n<p>オプションに高さと幅を指定できます。</p>\n\n<div class=\"code-frame\" data-lang=\"javascript\">\n<div class=\"code-lang\"><span class=\"bold\">gatsby-config.jsの一部</span></div>\n<div class=\"highlight\"><pre>  <span class=\"nx\">plugins</span><span class=\"p\">:</span> <span class=\"p\">[</span>\n    <span class=\"p\">{</span>\n      <span class=\"na\">resolve</span><span class=\"p\">:</span> <span class=\"s2\">\"gatsby-transformer-remark\"</span><span class=\"p\">,</span>\n      <span class=\"na\">options</span><span class=\"p\">:</span> <span class=\"p\">{</span>\n        <span class=\"na\">plugins</span><span class=\"p\">:</span> <span class=\"p\">[</span>\n          <span class=\"p\">{</span>\n            <span class=\"na\">resolve</span><span class=\"p\">:</span> <span class=\"s2\">\"gatsby-remark-embed-youtube\"</span><span class=\"p\">,</span>\n            <span class=\"na\">options</span><span class=\"p\">:</span> <span class=\"p\">{</span>\n              <span class=\"na\">width</span><span class=\"p\">:</span> <span class=\"mi\">800</span><span class=\"p\">,</span>\n              <span class=\"na\">height</span><span class=\"p\">:</span> <span class=\"mi\">400</span>\n            <span class=\"p\">}</span>\n          <span class=\"p\">}</span>\n        <span class=\"p\">]</span>\n      <span class=\"p\">}</span>\n    <span class=\"p\">},</span>\n  <span class=\"p\">]</span>\n</pre></div>\n</div>\n\n<p><br></p>\n\n<p>一注意があって、<code>gatsby-remark-responsive-iframe</code>をあわせて使う場合は必ずその前に定義してください。</p>\n\n<div class=\"code-frame\" data-lang=\"javascript\">\n<div class=\"code-lang\"><span class=\"bold\">gatsby-config.jsの一部</span></div>\n<div class=\"highlight\"><pre>        <span class=\"nx\">plugins</span><span class=\"p\">:</span> <span class=\"p\">[</span>\n          <span class=\"s2\">\"gatsby-remark-embed-youtube\"</span><span class=\"p\">,</span>\n          <span class=\"s2\">\"gatsby-remark-responsive-iframe\"</span>\n        <span class=\"p\">]</span>\n</pre></div>\n</div>\n\n<h4>\n<span id=\"使い方-7\" class=\"fragment\"></span><a href=\"#%E4%BD%BF%E3%81%84%E6%96%B9-7\"><i class=\"fa fa-link\"></i></a>使い方</h4>\n\n<p>マークダウンで下記のように記載します。URLの最後(embed/2Xc9gXyf2G4)は動画のIDです。</p>\n\n<div class=\"code-frame\" data-lang=\"markdown\">\n<div class=\"code-lang\"><span class=\"bold\">マークダウンサンプル</span></div>\n<div class=\"highlight\"><pre><span class=\"gh\"># Look at this Video:</span>\n\n<span class=\"sb\">`youtube:https://www.youtube.com/embed/2Xc9gXyf2G4`</span>\n</pre></div>\n</div>\n\n<p><br></p>\n\n<ul>\n<li>表示結果</li>\n</ul>\n\n<p><a href=\"https://camo.qiitausercontent.com/bdf5225f67f4609dd5da770513fd53e2de4e9bc5/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f34393931352f30613937336438662d323234652d633433322d613539612d6462636431373063393965662e706e67\" target=\"_blank\" rel=\"nofollow noopener\"><img src=\"https://camo.qiitausercontent.com/bdf5225f67f4609dd5da770513fd53e2de4e9bc5/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f34393931352f30613937336438662d323234652d633433322d613539612d6462636431373063393965662e706e67\" alt=\"スクリーンショット 2018-10-22 23.37.20.png\" data-canonical-src=\"https://qiita-image-store.s3.amazonaws.com/0/49915/0a973d8f-224e-c432-a59a-dbcd170c99ef.png\"></a></p>\n\n<p><br></p><hr>\n\n<h3>\n<span id=\"gatsby-plugin-twitter\" class=\"fragment\"></span><a href=\"#gatsby-plugin-twitter\"><i class=\"fa fa-link\"></i></a><a href=\"https://www.gatsbyjs.org/packages/gatsby-plugin-twitter\" rel=\"nofollow noopener\" target=\"_blank\">gatsby-plugin-twitter</a>\n</h3>\n\n<p><strong>マークダウンでTwitterの埋め込み用スクリプトを記述できるようにする</strong><br></p>\n\n<p>こちらのプラグインもう少しスマートになってほしいです（ちょっとめんどくさいです）。<br>\n使い方は<a href=\"https://takumon.com/2018/10/07/#twitter\" rel=\"nofollow noopener\" target=\"_blank\">GatsbyでYouTubeとTwitter埋め込み | Takumon Blog</a>を参照してください。</p>\n\n<h4>\n<span id=\"使い方-8\" class=\"fragment\"></span><a href=\"#%E4%BD%BF%E3%81%84%E6%96%B9-8\"><i class=\"fa fa-link\"></i></a>使い方</h4>\n\n<p>マークダウンには下記のように記載します。</p>\n\n<div class=\"code-frame\" data-lang=\"html\"><div class=\"highlight\"><pre><span class=\"nt\">&lt;blockquote</span> <span class=\"na\">class=</span><span class=\"s\">\"twitter-tweet\"</span> <span class=\"na\">data-lang=</span><span class=\"s\">\"ja\"</span><span class=\"nt\">&gt;&lt;p</span> <span class=\"na\">lang=</span><span class=\"s\">\"ja\"</span> <span class=\"na\">dir=</span><span class=\"s\">\"ltr\"</span><span class=\"nt\">&gt;</span>最近忙しかったのでアレですが、ブログ更新しました。<span class=\"nt\">&lt;br&gt;&lt;br&gt;</span>Reactで構造化データマークアップ（JSON-LD対応） <span class=\"nt\">&lt;a</span> <span class=\"na\">href=</span><span class=\"s\">\"https://t.co/7V49VqH9WI\"</span><span class=\"nt\">&gt;</span>https://t.co/7V49VqH9WI<span class=\"nt\">&lt;/a&gt;</span> <span class=\"nt\">&lt;a</span> <span class=\"na\">href=</span><span class=\"s\">\"https://twitter.com/inouetakumon?ref_src=twsrc%5Etfw\"</span><span class=\"nt\">&gt;</span>@inouetakumon<span class=\"nt\">&lt;/a&gt;</span>さんから<span class=\"nt\">&lt;/p&gt;</span><span class=\"ni\">&amp;mdash;</span> takumontakumon (@inouetakumon) <span class=\"nt\">&lt;a</span> <span class=\"na\">href=</span><span class=\"s\">\"https://twitter.com/inouetakumon/status/1046062825037344770?ref_src=twsrc%5Etfw\"</span><span class=\"nt\">&gt;</span>2018年9月29日<span class=\"nt\">&lt;/a&gt;&lt;/blockquote&gt;</span>\n</pre></div></div>\n\n<p><br></p>\n\n<ul>\n<li>表示結果</li>\n</ul>\n\n<p><a href=\"https://camo.qiitausercontent.com/e37c0ae7a0ae7fde08f8930aeac32399ffbe8a07/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f34393931352f64646632623963322d626537652d656166322d333139342d6464306633343663346561302e706e67\" target=\"_blank\" rel=\"nofollow noopener\"><img src=\"https://camo.qiitausercontent.com/e37c0ae7a0ae7fde08f8930aeac32399ffbe8a07/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f34393931352f64646632623963322d626537652d656166322d333139342d6464306633343663346561302e706e67\" alt=\"スクリーンショット 2018-10-22 23.37.27.png\" data-canonical-src=\"https://qiita-image-store.s3.amazonaws.com/0/49915/ddf2b9c2-be7e-eaf2-3194-dd0f346c4ea0.png\"></a></p>\n\n<h2>\n<span id=\"seo系\" class=\"fragment\"></span><a href=\"#seo%E7%B3%BB\"><i class=\"fa fa-link\"></i></a>SEO系</h2>\n\n<h3>\n<span id=\"gatsby-plugin-react-helmet\" class=\"fragment\"></span><a href=\"#gatsby-plugin-react-helmet\"><i class=\"fa fa-link\"></i></a><a href=\"https://www.gatsbyjs.org/packages/gatsby-plugin-react-helmet\" rel=\"nofollow noopener\" target=\"_blank\">gatsby-plugin-react-helmet</a>\n</h3>\n\n<p><strong>React HelmetをGatsbyビルド時使えるようにする</strong><br></p>\n\n<ul>\n<li>実用例は過去記事<a href=\"https://takumon.com/09/29\" rel=\"nofollow noopener\" target=\"_blank\">Reactで構造化データマークアップ（JSON-LD対応)</a>を参照してください。</li>\n</ul>\n\n<p><br></p><hr>\n\n<h3>\n<span id=\"gatsby-plugin-offline\" class=\"fragment\"></span><a href=\"#gatsby-plugin-offline\"><i class=\"fa fa-link\"></i></a><a href=\"https://www.gatsbyjs.org/packages/gatsby-plugin-offline\" rel=\"nofollow noopener\" target=\"_blank\">gatsby-plugin-offline</a>\n</h3>\n\n<p><strong>低速ネットワーク環境やオフライン環境でもWebサイトをスムーズに見れるようにする</strong><br></p>\n\n<ul>\n<li>ビルド時にサービスワーカーを生成してくれます。</li>\n<li>\n<code>gatsby-plugin-manifest</code>との併用推奨です。</li>\n<li>このプラグインは<a href=\"https://developers.google.com/web/tools/workbox/modules/workbox-build\" rel=\"nofollow noopener\" target=\"_blank\">Workbox</a>の設定を従っており、必要に応じて<code>gatsby-config.js</code>で上書くという感じです。Workboxは宣言的な記述だけで最適なServiceWorkerのコードが生成できるライブラリで、下記にわかりやすく書かれていました。\n\n<ul>\n<li>参考：<a href=\"https://qiita.com/nazonohito51/items/32b61cabdac8b24769bd\" id=\"reference-bbd2f54e9203f459a89c\">ServiceWorkerを簡単に書けるworkbox-swの使い方 | Qiita</a>\n</li>\n</ul>\n</li>\n</ul>\n\n<p><br></p><hr>\n\n<h3>\n<span id=\"gatsby-plugin-manifest\" class=\"fragment\"></span><a href=\"#gatsby-plugin-manifest\"><i class=\"fa fa-link\"></i></a><a href=\"https://www.gatsbyjs.org/packages/gatsby-plugin-manifest\" rel=\"nofollow noopener\" target=\"_blank\">gatsby-plugin-manifest</a>\n</h3>\n\n<p><strong>アプリをPWA対応にする（manifest.webmanifestを生成する）</strong><br></p>\n\n<ul>\n<li>サイトに<code>manifest.webmanifest</code>を配置することで、スマホでブログを見たときに、ネイティブアプリのようなUXを実現できます。</li>\n<li>\n<code>gatsby-plugin-offline</code>との併用推奨です。</li>\n<li>詳細は<a href=\"https://takumon.com/2018/10/08/#gatsby-plugin-manifest%E3%81%AE%E8%A8%AD%E5%AE%9A\" rel=\"nofollow noopener\" target=\"_blank\">GatsbyでPWA対応 |Takumon Blog</a>を参照してください。</li>\n</ul>\n\n<p><br></p><hr>\n\n<h3>\n<span id=\"gatsby-plugin-sitemap\" class=\"fragment\"></span><a href=\"#gatsby-plugin-sitemap\"><i class=\"fa fa-link\"></i></a><a href=\"https://www.gatsbyjs.org/packages/gatsby-plugin-sitemap\" rel=\"nofollow noopener\" target=\"_blank\">gatsby-plugin-sitemap</a>\n</h3>\n\n<p><strong>サイトマップを生成する</strong><br></p>\n\n<h4>\n<span id=\"設定使い方-1\" class=\"fragment\"></span><a href=\"#%E8%A8%AD%E5%AE%9A%E4%BD%BF%E3%81%84%E6%96%B9-1\"><i class=\"fa fa-link\"></i></a>設定・使い方</h4>\n\n<p>プラグインで<a href=\"https://github.com/gatsbyjs/gatsby/blob/master/packages/gatsby-plugin-sitemap/src/internals.js#L34\" rel=\"nofollow noopener\" target=\"_blank\">いい感じの設定</a>があらかじめされているので、最低限設定するならsiteUrlを指定するだけです。個別にオプションを設定する場合は、<a href=\"https://github.com/gatsbyjs/gatsby/blob/master/packages/gatsby-plugin-sitemap/src/internals.js#L34\" rel=\"nofollow noopener\" target=\"_blank\">いい感じの設定</a>を参考にしましょう。</p>\n\n<div class=\"code-frame\" data-lang=\"javascript\">\n<div class=\"code-lang\"><span class=\"bold\">gatsby-config.jsの一部</span></div>\n<div class=\"highlight\"><pre>  <span class=\"nx\">siteMetadata</span><span class=\"p\">:</span> <span class=\"p\">{</span>\n    <span class=\"nl\">siteUrl</span><span class=\"p\">:</span> <span class=\"s2\">`https://www.example.com`</span><span class=\"p\">,</span>\n  <span class=\"p\">},</span>\n  <span class=\"nx\">plugins</span><span class=\"p\">:</span> <span class=\"p\">[</span><span class=\"s2\">`gatsby-plugin-sitemap`</span><span class=\"p\">]</span>\n</pre></div>\n</div>\n\n<p><br></p>\n\n<p>これだけで下記のようなサイトマップが生成できます。</p>\n\n<div class=\"code-frame\" data-lang=\"xml\"><div class=\"highlight\"><pre><span class=\"nt\">&lt;urlset</span>\n  <span class=\"na\">xmlns=</span><span class=\"s\">\"http://www.sitemaps.org/schemas/sitemap/0.9\"</span>\n  <span class=\"na\">xmlns:news=</span><span class=\"s\">\"http://www.google.com/schemas/sitemap-news/0.9\"</span>\n  <span class=\"na\">xmlns:xhtml=</span><span class=\"s\">\"http://www.w3.org/1999/xhtml\"</span>\n  <span class=\"na\">xmlns:mobile=</span><span class=\"s\">\"http://www.google.com/schemas/sitemap-mobile/1.0\"</span>\n  <span class=\"na\">xmlns:image=</span><span class=\"s\">\"http://www.google.com/schemas/sitemap-image/1.1\"</span>\n  <span class=\"na\">xmlns:video=</span><span class=\"s\">\"http://www.google.com/schemas/sitemap-video/1.1\"</span><span class=\"nt\">&gt;</span>\n  <span class=\"nt\">&lt;url&gt;</span>\n    <span class=\"nt\">&lt;loc&gt;</span>https://takumon.com//2018/10/14/<span class=\"nt\">&lt;/loc&gt;</span>\n    <span class=\"nt\">&lt;changefreq&gt;</span>daily<span class=\"nt\">&lt;/changefreq&gt;</span>\n    <span class=\"nt\">&lt;priority&gt;</span>0.7<span class=\"nt\">&lt;/priority&gt;</span>\n  <span class=\"nt\">&lt;/url&gt;</span>\n  <span class=\"nt\">&lt;url&gt;</span>\n    <span class=\"nt\">&lt;loc&gt;</span>https://takumon.com//2018/10/12/<span class=\"nt\">&lt;/loc&gt;</span>\n    <span class=\"nt\">&lt;changefreq&gt;</span>daily<span class=\"nt\">&lt;/changefreq&gt;</span>\n    <span class=\"nt\">&lt;priority&gt;</span>0.7<span class=\"nt\">&lt;/priority&gt;</span>\n  <span class=\"nt\">&lt;/url&gt;</span>\n  <span class=\"nt\">&lt;url&gt;</span>\n    <span class=\"nt\">&lt;loc&gt;</span>https://takumon.com//2018/10/08/<span class=\"nt\">&lt;/loc&gt;</span>\n    <span class=\"nt\">&lt;changefreq&gt;</span>daily<span class=\"nt\">&lt;/changefreq&gt;</span>\n    <span class=\"nt\">&lt;priority&gt;</span>0.7<span class=\"nt\">&lt;/priority&gt;</span>\n  <span class=\"nt\">&lt;/url&gt;</span>\n  <span class=\"c\">&lt;!-- ・・・ --&gt;</span>\n  <span class=\"c\">&lt;!-- Webサイト上の全てのURL定義 --&gt;</span>\n  <span class=\"c\">&lt;!-- ・・・ --&gt;</span>\n<span class=\"nt\">&lt;/urlset&gt;</span>\n</pre></div></div>\n\n<p><br></p><hr>\n\n<h3>\n<span id=\"gatsby-plugin-canonical-urls\" class=\"fragment\"></span><a href=\"#gatsby-plugin-canonical-urls\"><i class=\"fa fa-link\"></i></a><a href=\"https://www.gatsbyjs.org/packages/gatsby-plugin-canonical-urls\" rel=\"nofollow noopener\" target=\"_blank\">gatsby-plugin-canonical-urls</a>\n</h3>\n\n<p><strong>canonical linksを追加する</strong><br><br>\n* canonical linksは検索エンジンに対して、プロコトルが違ったりクエリストリングがついていても同一のサイトのURLだということを宣言するためのリンクです。</p>\n\n<h4>\n<span id=\"設定使い方-2\" class=\"fragment\"></span><a href=\"#%E8%A8%AD%E5%AE%9A%E4%BD%BF%E3%81%84%E6%96%B9-2\"><i class=\"fa fa-link\"></i></a>設定・使い方</h4>\n\n<p>オプションとしてsiteUrlを指定します。</p>\n\n<div class=\"code-frame\" data-lang=\"javascript\">\n<div class=\"code-lang\"><span class=\"bold\">gatsby-config.jsの一部</span></div>\n<div class=\"highlight\"><pre>  <span class=\"nx\">plugins</span><span class=\"p\">:</span> <span class=\"p\">[</span>\n    <span class=\"p\">{</span>\n      <span class=\"na\">resolve</span><span class=\"p\">:</span> <span class=\"s2\">`gatsby-plugin-canonical-urls`</span><span class=\"p\">,</span>\n      <span class=\"na\">options</span><span class=\"p\">:</span> <span class=\"p\">{</span>\n        <span class=\"na\">siteUrl</span><span class=\"p\">:</span> <span class=\"s2\">`https://www.example.com`</span><span class=\"p\">,</span>\n      <span class=\"p\">},</span>\n    <span class=\"p\">},</span>\n  <span class=\"p\">]</span>\n</pre></div>\n</div>\n\n<p><br><br>\nすると下記リンクタグがHTML内に埋め込まれます。</p>\n\n<div class=\"code-frame\" data-lang=\"html\"><div class=\"highlight\"><pre><span class=\"nt\">&lt;link</span> <span class=\"na\">rel=</span><span class=\"s\">\"canonical\"</span> <span class=\"na\">href=</span><span class=\"s\">\"http://www.example.com/about-us/\"</span> <span class=\"nt\">/&gt;</span>\n</pre></div></div>\n\n<p><br></p><hr>\n\n<h3>\n<span id=\"gatsby-plugin-feed\" class=\"fragment\"></span><a href=\"#gatsby-plugin-feed\"><i class=\"fa fa-link\"></i></a><a href=\"https://www.gatsbyjs.org/packages/gatsby-plugin-feed\" rel=\"nofollow noopener\" target=\"_blank\">gatsby-plugin-feed</a>\n</h3>\n\n<p><strong>RSSフィードを作る</strong></p>\n\n<h4>\n<span id=\"設定-9\" class=\"fragment\"></span><a href=\"#%E8%A8%AD%E5%AE%9A-9\"><i class=\"fa fa-link\"></i></a>設定</h4>\n\n<p><code>gatsby-config.js</code>でsiteMetadataを設定しプラグインを定義するだけでOKです。</p>\n\n<div class=\"code-frame\" data-lang=\"javascript\">\n<div class=\"code-lang\"><span class=\"bold\">gatsby-config.jsの一部</span></div>\n<div class=\"highlight\"><pre>  <span class=\"nx\">siteMetadata</span><span class=\"p\">:</span> <span class=\"p\">{</span>\n    <span class=\"nl\">title</span><span class=\"p\">:</span> <span class=\"s2\">`GatsbyJS`</span><span class=\"p\">,</span>\n    <span class=\"nx\">description</span><span class=\"p\">:</span> <span class=\"s2\">`Blazing fast modern site generator for React`</span><span class=\"p\">,</span>\n    <span class=\"nx\">siteUrl</span><span class=\"p\">:</span> <span class=\"s2\">`https://www.gatsbyjs.org`</span>\n  <span class=\"p\">},</span>\n  <span class=\"nx\">plugins</span><span class=\"p\">:</span> <span class=\"p\">[</span>\n    <span class=\"p\">{</span>\n      <span class=\"na\">resolve</span><span class=\"p\">:</span> <span class=\"s2\">`gatsby-plugin-feed`</span>\n    <span class=\"p\">}</span>\n  <span class=\"p\">]</span>\n</pre></div>\n</div>\n\n<p><br><br>\nこのプラグインを使うと、ビルドでpublic配下にrss.xmlが生成されます。<br>\n自分の場合はFeedlyの登録ボタンと、rss.xmlへのリンクをブログのトップに設けています。</p>\n\n<p><a href=\"https://camo.qiitausercontent.com/bcafb7ebbe215d5b7bfd9cd3044c8eaee099e6ec/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f34393931352f37383238636236322d653366642d386364382d656235392d3961346437373231356133342e706e67\" target=\"_blank\" rel=\"nofollow noopener\"><img src=\"https://camo.qiitausercontent.com/bcafb7ebbe215d5b7bfd9cd3044c8eaee099e6ec/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f34393931352f37383238636236322d653366642d386364382d656235392d3961346437373231356133342e706e67\" alt=\"rssfeed.png\" data-canonical-src=\"https://qiita-image-store.s3.amazonaws.com/0/49915/7828cb62-e3fd-8cd8-eb59-9a4d77215a34.png\"></a></p>\n\n<p><br></p><hr>\n\n<h3>\n<span id=\"gatsby-plugin-robots-txt\" class=\"fragment\"></span><a href=\"#gatsby-plugin-robots-txt\"><i class=\"fa fa-link\"></i></a><a href=\"https://www.gatsbyjs.org/packages/gatsby-plugin-robots-txt\" rel=\"nofollow noopener\" target=\"_blank\">gatsby-plugin-robots-txt</a>\n</h3>\n\n<p><strong><code>robots.txt</code>を生成する</strong><br></p>\n\n<ul>\n<li>robots.txtは検索エンジンのクロールを最適化するためのテキストファイルです。SEO対策に使われます。</li>\n</ul>\n\n<h4>\n<span id=\"設定使い方-3\" class=\"fragment\"></span><a href=\"#%E8%A8%AD%E5%AE%9A%E4%BD%BF%E3%81%84%E6%96%B9-3\"><i class=\"fa fa-link\"></i></a>設定・使い方</h4>\n\n<p>オプションでホストURLやサイトマップを指定できます。</p>\n\n<div class=\"code-frame\" data-lang=\"javascript\">\n<div class=\"code-lang\"><span class=\"bold\">gatsby-config.jsの一部</span></div>\n<div class=\"highlight\"><pre><span class=\"nx\">module</span><span class=\"p\">.</span><span class=\"nx\">exports</span> <span class=\"o\">=</span> <span class=\"p\">{</span>\n  <span class=\"na\">plugins</span><span class=\"p\">:</span> <span class=\"p\">[</span>\n    <span class=\"p\">{</span>\n      <span class=\"na\">resolve</span><span class=\"p\">:</span> <span class=\"s1\">'gatsby-plugin-robots-txt'</span><span class=\"p\">,</span>\n      <span class=\"na\">options</span><span class=\"p\">:</span> <span class=\"p\">{</span>\n        <span class=\"na\">host</span><span class=\"p\">:</span> <span class=\"s1\">'https://www.example.com'</span><span class=\"p\">,</span>\n        <span class=\"na\">sitemap</span><span class=\"p\">:</span> <span class=\"s1\">'https://www.example.com/sitemap.xml'</span><span class=\"p\">,</span>\n        <span class=\"na\">policy</span><span class=\"p\">:</span> <span class=\"p\">[{</span> <span class=\"na\">userAgent</span><span class=\"p\">:</span> <span class=\"s1\">'*'</span><span class=\"p\">,</span> <span class=\"na\">allow</span><span class=\"p\">:</span> <span class=\"s1\">'/'</span> <span class=\"p\">}]</span>\n      <span class=\"p\">}</span>\n    <span class=\"p\">}</span>\n  <span class=\"p\">]</span>\n<span class=\"p\">};</span>\n</pre></div>\n</div>\n\n<p><br></p>\n\n<p>Netlfyで<a href=\"https://www.netlify.com/blog/2016/07/20/introducing-deploy-previews-in-netlify/\" rel=\"nofollow noopener\" target=\"_blank\">Deploy Preview機能</a>を使うなら下記のような設定にします。</p>\n\n<div class=\"code-frame\" data-lang=\"javascript\">\n<div class=\"code-lang\"><span class=\"bold\">gatsby-config.jsの一部</span></div>\n<div class=\"highlight\"><pre><span class=\"kd\">const</span> <span class=\"p\">{</span>\n  <span class=\"nx\">NODE_ENV</span><span class=\"p\">,</span>\n  <span class=\"na\">URL</span><span class=\"p\">:</span> <span class=\"nx\">NETLIFY_SITE_URL</span> <span class=\"o\">=</span> <span class=\"s1\">'https://www.example.com'</span><span class=\"p\">,</span>\n  <span class=\"na\">DEPLOY_PRIME_URL</span><span class=\"p\">:</span> <span class=\"nx\">NETLIFY_DEPLOY_URL</span> <span class=\"o\">=</span> <span class=\"nx\">NETLIFY_SITE_URL</span><span class=\"p\">,</span>\n  <span class=\"na\">CONTEXT</span><span class=\"p\">:</span> <span class=\"nx\">NETLIFY_ENV</span> <span class=\"o\">=</span> <span class=\"nx\">NODE_ENV</span>\n<span class=\"p\">}</span> <span class=\"o\">=</span> <span class=\"nx\">process</span><span class=\"p\">.</span><span class=\"nx\">env</span><span class=\"p\">;</span>\n<span class=\"kd\">const</span> <span class=\"nx\">isNetlifyProduction</span> <span class=\"o\">=</span> <span class=\"nx\">NETLIFY_ENV</span> <span class=\"o\">===</span> <span class=\"s1\">'production'</span><span class=\"p\">;</span>\n<span class=\"kd\">const</span> <span class=\"nx\">siteUrl</span> <span class=\"o\">=</span> <span class=\"nx\">isNetlifyProduction</span> <span class=\"p\">?</span> <span class=\"nx\">NETLIFY_SITE_URL</span> <span class=\"p\">:</span> <span class=\"nx\">NETLIFY_DEPLOY_URL</span><span class=\"p\">;</span>\n\n<span class=\"nx\">module</span><span class=\"p\">.</span><span class=\"nx\">exports</span> <span class=\"o\">=</span> <span class=\"p\">{</span>\n  <span class=\"na\">siteMetadata</span><span class=\"p\">:</span> <span class=\"p\">{</span>\n    <span class=\"nx\">siteUrl</span>\n  <span class=\"p\">},</span>\n  <span class=\"na\">plugins</span><span class=\"p\">:</span> <span class=\"p\">[</span>\n    <span class=\"p\">{</span>\n      <span class=\"na\">resolve</span><span class=\"p\">:</span> <span class=\"s1\">'gatsby-plugin-robots-txt'</span><span class=\"p\">,</span>\n      <span class=\"na\">options</span><span class=\"p\">:</span> <span class=\"p\">{</span>\n        <span class=\"na\">resolveEnv</span><span class=\"p\">:</span> <span class=\"p\">()</span> <span class=\"o\">=&gt;</span> <span class=\"nx\">NETLIFY_ENV</span><span class=\"p\">,</span>\n        <span class=\"na\">env</span><span class=\"p\">:</span> <span class=\"p\">{</span>\n          <span class=\"na\">production</span><span class=\"p\">:</span> <span class=\"p\">{</span>\n            <span class=\"na\">policy</span><span class=\"p\">:</span> <span class=\"p\">[{</span> <span class=\"na\">userAgent</span><span class=\"p\">:</span> <span class=\"s1\">'*'</span> <span class=\"p\">}]</span>\n          <span class=\"p\">},</span>\n          <span class=\"s1\">'branch-deploy'</span><span class=\"p\">:</span> <span class=\"p\">{</span>\n            <span class=\"na\">policy</span><span class=\"p\">:</span> <span class=\"p\">[{</span> <span class=\"na\">userAgent</span><span class=\"p\">:</span> <span class=\"s1\">'*'</span><span class=\"p\">,</span> <span class=\"na\">disallow</span><span class=\"p\">:</span> <span class=\"p\">[</span><span class=\"s1\">'/'</span><span class=\"p\">]</span> <span class=\"p\">}],</span>\n            <span class=\"na\">sitemap</span><span class=\"p\">:</span> <span class=\"kc\">null</span><span class=\"p\">,</span>\n            <span class=\"na\">host</span><span class=\"p\">:</span> <span class=\"kc\">null</span>\n          <span class=\"p\">},</span>\n          <span class=\"s1\">'deploy-preview'</span><span class=\"p\">:</span> <span class=\"p\">{</span>\n            <span class=\"na\">policy</span><span class=\"p\">:</span> <span class=\"p\">[{</span> <span class=\"na\">userAgent</span><span class=\"p\">:</span> <span class=\"s1\">'*'</span><span class=\"p\">,</span> <span class=\"na\">disallow</span><span class=\"p\">:</span> <span class=\"p\">[</span><span class=\"s1\">'/'</span><span class=\"p\">]</span> <span class=\"p\">}],</span>\n            <span class=\"na\">sitemap</span><span class=\"p\">:</span> <span class=\"kc\">null</span><span class=\"p\">,</span>\n            <span class=\"na\">host</span><span class=\"p\">:</span> <span class=\"kc\">null</span>\n          <span class=\"p\">}</span>\n        <span class=\"p\">}</span>\n      <span class=\"p\">}</span>\n    <span class=\"p\">}</span>\n  <span class=\"p\">]</span>\n<span class=\"p\">};</span>\n</pre></div>\n</div>\n\n<p><br></p>\n\n<p>オプションを指定しない場合は、siteMetadataにsiteUrlを指定します。</p>\n\n<div class=\"code-frame\" data-lang=\"javascript\">\n<div class=\"code-lang\"><span class=\"bold\">gatsby-config.jsの一部</span></div>\n<div class=\"highlight\"><pre><span class=\"nx\">module</span><span class=\"p\">.</span><span class=\"nx\">exports</span> <span class=\"o\">=</span> <span class=\"p\">{</span>\n  <span class=\"na\">siteMetadata</span><span class=\"p\">:</span> <span class=\"p\">{</span>\n    <span class=\"na\">siteUrl</span><span class=\"p\">:</span> <span class=\"s1\">'https://www.example.com'</span>\n  <span class=\"p\">},</span>\n  <span class=\"na\">plugins</span><span class=\"p\">:</span> <span class=\"p\">[</span><span class=\"s1\">'gatsby-plugin-robots-txt'</span><span class=\"p\">]</span>\n<span class=\"p\">};</span>\n</pre></div>\n</div>\n\n<p><br></p>\n\n<p>ビルドするとpublicフォルダ配下に<code>robot.txt</code>が生成されます。</p>\n\n<div class=\"code-frame\" data-lang=\"txt\">\n<div class=\"code-lang\"><span class=\"bold\">robot.txtの例</span></div>\n<div class=\"highlight\"><pre>User-agent: *\nDisallow:\nSitemap: https://takumon.com/sitemap.xml\n</pre></div>\n</div>\n\n<h2>\n<span id=\"開補補助系\" class=\"fragment\"></span><a href=\"#%E9%96%8B%E8%A3%9C%E8%A3%9C%E5%8A%A9%E7%B3%BB\"><i class=\"fa fa-link\"></i></a>開補補助系</h2>\n\n<h3>\n<span id=\"gatsby-plugin-lodash\" class=\"fragment\"></span><a href=\"#gatsby-plugin-lodash\"><i class=\"fa fa-link\"></i></a><a href=\"https://www.gatsbyjs.org/packages/gatsby-plugin-lodash\" rel=\"nofollow noopener\" target=\"_blank\">gatsby-plugin-lodash</a>\n</h3>\n\n<p><strong>ビルド時のlodashのサイズを小さくする</strong><br></p>\n\n<h4>\n<span id=\"設定使い方-4\" class=\"fragment\"></span><a href=\"#%E8%A8%AD%E5%AE%9A%E4%BD%BF%E3%81%84%E6%96%B9-4\"><i class=\"fa fa-link\"></i></a>設定・使い方</h4>\n\n<p>入れるだけでもサイズを削減できますが、オプションで削除対象モジュールを指定してさらに削減可能です。<br>\n※削除対象モジュールは<a href=\"https://github.com/lodash/lodash-webpack-plugin#feature-sets\" rel=\"nofollow noopener\" target=\"_blank\">ここ</a>から選択してください。</p>\n\n<div class=\"code-frame\" data-lang=\"javascript\">\n<div class=\"code-lang\"><span class=\"bold\">gatsby-config.jsの一部</span></div>\n<div class=\"highlight\"><pre>  <span class=\"nx\">plugins</span><span class=\"p\">:</span> <span class=\"p\">[</span>\n    <span class=\"p\">{</span>\n      <span class=\"na\">resolve</span><span class=\"p\">:</span> <span class=\"s2\">`gatsby-plugin-lodash`</span><span class=\"p\">,</span>\n      <span class=\"na\">options</span><span class=\"p\">:</span> <span class=\"p\">{</span>\n        <span class=\"na\">disabledFeatures</span><span class=\"p\">:</span> <span class=\"p\">[</span>\n          <span class=\"s2\">`shorthands`</span><span class=\"p\">,</span>\n          <span class=\"s2\">`cloning`</span>\n        <span class=\"p\">],</span>\n      <span class=\"p\">},</span>\n    <span class=\"p\">},</span>\n  <span class=\"p\">]</span>\n</pre></div>\n</div>\n\n<p><br></p><hr>\n\n<h3>\n<span id=\"gatsby-plugin-webpack-bundle-analyzer\" class=\"fragment\"></span><a href=\"#gatsby-plugin-webpack-bundle-analyzer\"><i class=\"fa fa-link\"></i></a><a href=\"https://www.gatsbyjs.org/packages/gatsby-plugin-webpack-bundle-analyzer\" rel=\"nofollow noopener\" target=\"_blank\">gatsby-plugin-webpack-bundle-analyzer</a>\n</h3>\n\n<p><strong><a href=\"https://github.com/webpack-contrib/webpack-bundle-analyzer\" rel=\"nofollow noopener\" target=\"_blank\">webpack-bundle-analyzer</a>を使ってbundle.jsの中身のサイズを可視化する</strong><br><br>\n* webpack-bundle-analyzerはパフォーマンスチューニングでbundle.jsのサイズを減らそうと思ったときに便利なライブラリです。ライブラリorコンポーネント毎にサイズをグラフィカルに示してくれます。</p>\n\n<h3>\n<span id=\"設定-10\" class=\"fragment\"></span><a href=\"#%E8%A8%AD%E5%AE%9A-10\"><i class=\"fa fa-link\"></i></a>設定</h3>\n\n<p>このプラグインは内部webpack-bundle-analyzerというライブラリを使っており、<br>\n<a href=\"https://github.com/webpack-contrib/webpack-bundle-analyzer#options-for-plugin\" rel=\"nofollow noopener\" target=\"_blank\">webpack-bundle-analyzerのオプション</a>なら何でも指定できます。<br></p>\n\n<p>デフォルトだと<code>gatsby develop</code>するたびにブラウザが開くので、<br>\nそれがいやなら下記のようにすると良いでしょう。</p>\n\n<div class=\"code-frame\" data-lang=\"javascript\">\n<div class=\"code-lang\"><span class=\"bold\">gatsby-config.jsの一部</span></div>\n<div class=\"highlight\"><pre>    <span class=\"p\">{</span>\n      <span class=\"nl\">resolve</span><span class=\"p\">:</span> <span class=\"s2\">`gatsby-plugin-webpack-bundle-analyzer`</span><span class=\"p\">,</span>\n      <span class=\"nx\">options</span><span class=\"p\">:</span> <span class=\"p\">{</span>\n        <span class=\"nl\">openAnalyzer</span><span class=\"p\">:</span> <span class=\"kc\">false</span>\n      <span class=\"p\">}</span>\n    <span class=\"p\">}</span>\n</pre></div>\n</div>\n\n<h3>\n<span id=\"使い方-9\" class=\"fragment\"></span><a href=\"#%E4%BD%BF%E3%81%84%E6%96%B9-9\"><i class=\"fa fa-link\"></i></a>使い方</h3>\n\n<p><code>gatsby develop</code>して<code>http://localhost:8888</code>にアクセスします。<br>\nすると下記のようにコンポーネント毎のサイズをグラフィカルに示してくれます。</p>\n\n<p><a href=\"https://camo.qiitausercontent.com/f38171316c68e9c327486036add3ef875f39063a/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f34393931352f63623365336136322d356563642d323861332d373832312d3164336364343666616164342e706e67\" target=\"_blank\" rel=\"nofollow noopener\"><img src=\"https://camo.qiitausercontent.com/f38171316c68e9c327486036add3ef875f39063a/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f34393931352f63623365336136322d356563642d323861332d373832312d3164336364343666616164342e706e67\" alt=\"bundlesize.png\" data-canonical-src=\"https://qiita-image-store.s3.amazonaws.com/0/49915/cb3e3a62-5ecd-28a3-7821-1d3cd46faad4.png\"></a></p>\n\n<p><br></p><hr>\n\n<h3>\n<span id=\"gatsby-plugin-google-analytics\" class=\"fragment\"></span><a href=\"#gatsby-plugin-google-analytics\"><i class=\"fa fa-link\"></i></a><a href=\"https://www.gatsbyjs.org/packages/gatsby-plugin-google-analytics\" rel=\"nofollow noopener\" target=\"_blank\">gatsby-plugin-google-analytics</a>\n</h3>\n\n<p><strong><a href=\"https://analytics.google.com/analytics/web/\" rel=\"nofollow noopener\" target=\"_blank\">Google Analytics</a>を使えるようにする</strong><br></p>\n\n<h4>\n<span id=\"設定使い方-5\" class=\"fragment\"></span><a href=\"#%E8%A8%AD%E5%AE%9A%E4%BD%BF%E3%81%84%E6%96%B9-5\"><i class=\"fa fa-link\"></i></a>設定・使い方</h4>\n\n<p><code>gatsby-config.js</code>でトラッキングIDを設定するだけです。Google AnalyticsでトラッキングIDを発行して設定しましょう。</p>\n\n<div class=\"code-frame\" data-lang=\"javascript\">\n<div class=\"code-lang\"><span class=\"bold\">gatsby-config.jsの一部</span></div>\n<div class=\"highlight\"><pre>  <span class=\"nx\">plugins</span><span class=\"p\">:</span> <span class=\"p\">[</span>\n    <span class=\"p\">{</span>\n      <span class=\"na\">resolve</span><span class=\"p\">:</span> <span class=\"s2\">`gatsby-plugin-google-analytics`</span><span class=\"p\">,</span>\n      <span class=\"na\">options</span><span class=\"p\">:</span> <span class=\"p\">{</span>\n        <span class=\"na\">trackingId</span><span class=\"p\">:</span> <span class=\"s2\">\"YOUR_GOOGLE_ANALYTICS_TRACKING_ID\"</span><span class=\"p\">,</span>\n      <span class=\"p\">},</span>\n    <span class=\"p\">},</span>\n  <span class=\"p\">]</span>\n</pre></div>\n</div>\n\n<p><br></p><hr>\n\n<h3>\n<span id=\"gatsby-plugin-facebook-analytics\" class=\"fragment\"></span><a href=\"#gatsby-plugin-facebook-analytics\"><i class=\"fa fa-link\"></i></a><a href=\"https://www.gatsbyjs.org/packages/gatsby-plugin-facebook-analytics/\" rel=\"nofollow noopener\" target=\"_blank\">gatsby-plugin-facebook-analytics</a>\n</h3>\n\n<p><strong><a href=\"https://developers.facebook.com/docs/analytics/?locale=ja_JP\" rel=\"nofollow noopener\" target=\"_blank\">Facebook Analytics</a>を使えるようにする</strong><br></p>\n\n<h4>\n<span id=\"設定使い方-6\" class=\"fragment\"></span><a href=\"#%E8%A8%AD%E5%AE%9A%E4%BD%BF%E3%81%84%E6%96%B9-6\"><i class=\"fa fa-link\"></i></a>設定・使い方</h4>\n\n<div class=\"code-frame\" data-lang=\"javascript\">\n<div class=\"code-lang\"><span class=\"bold\">gatsby-config.jsの一部</span></div>\n<div class=\"highlight\"><pre>  <span class=\"nx\">plugins</span><span class=\"p\">:</span> <span class=\"p\">[</span>\n    <span class=\"p\">{</span>\n      <span class=\"na\">resolve</span><span class=\"p\">:</span> <span class=\"s2\">`gatsby-plugin-facebook-analytics`</span><span class=\"p\">,</span>\n      <span class=\"na\">options</span><span class=\"p\">:</span> <span class=\"p\">{</span>\n        <span class=\"na\">appId</span><span class=\"p\">:</span> <span class=\"s2\">\"あなたのAPP ID\"</span><span class=\"p\">,</span>\n        <span class=\"c1\">// 開発時も解析対象とするか</span>\n        <span class=\"c1\">// デフォルトはfalseでプロダクションのみ解析対象とします</span>\n        <span class=\"na\">includeInDevelopment</span><span class=\"p\">:</span> <span class=\"kc\">false</span><span class=\"p\">,</span>\n        <span class=\"c1\">// SDKのデバックバージョンを含めるか</span>\n        <span class=\"c1\">// デフォルトはfalseでライブラリはsdk.jsをロードします。</span>\n        <span class=\"na\">debug</span><span class=\"p\">:</span> <span class=\"kc\">false</span><span class=\"p\">,</span>\n        <span class=\"c1\">// 言語を指定。デフォルトはenglish</span>\n        <span class=\"na\">language</span><span class=\"p\">:</span> <span class=\"s2\">\"ja-jp\"</span><span class=\"p\">,</span>\n      <span class=\"p\">},</span>\n    <span class=\"p\">},</span>\n  <span class=\"p\">]</span>\n</pre></div>\n</div>\n\n<p><br></p><hr>\n\n<h2>\n<span id=\"ui系\" class=\"fragment\"></span><a href=\"#ui%E7%B3%BB\"><i class=\"fa fa-link\"></i></a>UI系</h2>\n\n<h3>\n<span id=\"gatsby-plugin-nprogress\" class=\"fragment\"></span><a href=\"#gatsby-plugin-nprogress\"><i class=\"fa fa-link\"></i></a><a href=\"https://www.gatsbyjs.org/packages/gatsby-plugin-nprogress\" rel=\"nofollow noopener\" target=\"_blank\">gatsby-plugin-nprogress</a>\n</h3>\n\n<p><strong>ローディングに時間がかかっている時にプログレスバーを表示する</strong><br><br>\n* <a href=\"http://ricostacruz.com/nprogress/\" rel=\"nofollow noopener\" target=\"_blank\">NProgress</a>を使って、リンククリックから1秒たってもローディング中の場合にプログレスバーを表示します。</p>\n\n<h4>\n<span id=\"設定使い方-7\" class=\"fragment\"></span><a href=\"#%E8%A8%AD%E5%AE%9A%E4%BD%BF%E3%81%84%E6%96%B9-7\"><i class=\"fa fa-link\"></i></a>設定・使い方</h4>\n\n<p>下記のように設定します。<code>color</code>でバーの色が変更可能です。<br>\nまたオプションには<a href=\"https://github.com/rstacruz/nprogress#configuration\" rel=\"nofollow noopener\" target=\"_blank\">NProgress</a>のオプションが全て指定できるようになっています。</p>\n\n<div class=\"code-frame\" data-lang=\"javascript\">\n<div class=\"code-lang\"><span class=\"bold\">gatsby-config.jsの一部</span></div>\n<div class=\"highlight\"><pre>  <span class=\"nx\">plugins</span><span class=\"p\">:</span> <span class=\"p\">[</span>\n    <span class=\"p\">{</span>\n      <span class=\"na\">resolve</span><span class=\"p\">:</span> <span class=\"s2\">`gatsby-plugin-nprogress`</span><span class=\"p\">,</span>\n      <span class=\"na\">options</span><span class=\"p\">:</span> <span class=\"p\">{</span>\n        <span class=\"na\">color</span><span class=\"p\">:</span> <span class=\"s2\">`#444`</span><span class=\"p\">,</span>\n        <span class=\"na\">showSpinner</span><span class=\"p\">:</span> <span class=\"kc\">false</span><span class=\"p\">,</span>\n      <span class=\"p\">},</span>\n    <span class=\"p\">},</span>\n  <span class=\"p\">]</span>\n</pre></div>\n</div>\n\n<p><br></p><hr>\n\n<h3>\n<span id=\"gatsby-plugin-catch-links\" class=\"fragment\"></span><a href=\"#gatsby-plugin-catch-links\"><i class=\"fa fa-link\"></i></a><a href=\"https://www.gatsbyjs.org/packages/gatsby-plugin-catch-links\" rel=\"nofollow noopener\" target=\"_blank\">gatsby-plugin-catch-links</a>\n</h3>\n\n<p><strong>aタグでローカル遷移する時にリロードを抑止してヒストリーAPIで遷移できるようにする</strong></p>\n\n<p>GatsbyはSPAなのでローカル遷移はヒストリーAPIを使うべきで、リロードは避けたいところですが、<br>\n<code>&lt;a href=\"tags/react\" &gt;ローカル遷移のリンク&lt;/a&gt;</code>のような<strong>a</strong>タグの場合、クリック時に（ブラウザのでフォルの挙動により）リロードしてしまいます。</p>\n\n<p>このプラグインを使えば、<strong>a</strong>タグの場合でもローカル遷移であればリロードを抑止し、ヒストリーAPIを使った遷移が可能です。<br>\n<a href=\"https://www.gatsbyjs.org/docs/gatsby-link/#programmatic-navigation\" rel=\"nofollow noopener\" target=\"_blank\">Gatsby-Link</a>を使っていれば問題ないのですが、どうしても<strong>a</strong>タグしか使えない場合は、このプラグインが役立つでしょう。</p>\n\n<p><br></p><hr>\n\n<h3>\n<span id=\"gatsby-plugin-layout\" class=\"fragment\"></span><a href=\"#gatsby-plugin-layout\"><i class=\"fa fa-link\"></i></a><a href=\"https://www.gatsbyjs.org/packages/gatsby-plugin-layout\" rel=\"nofollow noopener\" target=\"_blank\">gatsby-plugin-layout</a>\n</h3>\n\n<p><strong>1系のレイアウト機能を2系でも使えるようにする</strong><br></p>\n\n<ul>\n<li>1系から2系に移行したときに、レイアウト機能(2系では削除された機能)をそのまま使えるようにするために使います。</li>\n</ul>\n\n<h4>\n<span id=\"設定使い方-8\" class=\"fragment\"></span><a href=\"#%E8%A8%AD%E5%AE%9A%E4%BD%BF%E3%81%84%E6%96%B9-8\"><i class=\"fa fa-link\"></i></a>設定・使い方</h4>\n\n<p><code>gatsby-config.js</code>の設定は特に変わったところはありません。<br>\nレイアウト用ファイルは<code>src/layouts/index.js</code>を作成しましょう。</p>\n\n<h2>\n<span id=\"ファイル系\" class=\"fragment\"></span><a href=\"#%E3%83%95%E3%82%A1%E3%82%A4%E3%83%AB%E7%B3%BB\"><i class=\"fa fa-link\"></i></a>ファイル系</h2>\n\n<p>JSON,XML,YAML,CSVのパースは使い方はほぼ一緒なのでまとめて説明します。</p>\n\n<ul>\n<li>\n<a href=\"https://www.gatsbyjs.org/packages/gatsby-transformer-json\" rel=\"nofollow noopener\" target=\"_blank\">gatsby-transformer-json</a>\n\n<ul>\n<li><strong>JSONファイルをパースする</strong></li>\n</ul>\n</li>\n<li>\n<a href=\"https://www.gatsbyjs.org/packages/gatsby-transformer-xml\" rel=\"nofollow noopener\" target=\"_blank\">gatsby-transformer-xml</a>\n\n<ul>\n<li><strong>XMLファイルをパースする</strong></li>\n</ul>\n</li>\n<li>\n<a href=\"https://www.gatsbyjs.org/packages/gatsby-transformer-yaml\" rel=\"nofollow noopener\" target=\"_blank\">gatsby-transformer-yaml</a>\n\n<ul>\n<li><strong>Yamlファイルをパースする</strong></li>\n</ul>\n</li>\n<li>\n<a href=\"https://www.gatsbyjs.org/packages/gatsby-transformer-csv\" rel=\"nofollow noopener\" target=\"_blank\">gatsby-transformer-csv</a>\n\n<ul>\n<li><strong>CSVファイルをパースする</strong></li>\n</ul>\n</li>\n</ul>\n\n<p>これらはgatsby-source-filesystemとあわせて使います。</p>\n\n<div class=\"code-frame\" data-lang=\"javascript\">\n<div class=\"code-lang\"><span class=\"bold\">gatsby-config.jsの一部</span></div>\n<div class=\"highlight\"><pre>  <span class=\"nx\">plugins</span><span class=\"p\">:</span> <span class=\"p\">[</span>\n    <span class=\"s2\">`gatsby-transformer-json`</span><span class=\"p\">,</span>\n    <span class=\"p\">{</span>\n      <span class=\"na\">resolve</span><span class=\"p\">:</span> <span class=\"s2\">`gatsby-source-filesystem`</span><span class=\"p\">,</span>\n      <span class=\"na\">options</span><span class=\"p\">:</span> <span class=\"p\">{</span>\n        <span class=\"na\">path</span><span class=\"p\">:</span> <span class=\"s2\">`./src/data/`</span><span class=\"p\">,</span>\n      <span class=\"p\">},</span>\n    <span class=\"p\">},</span>\n  <span class=\"p\">],</span>\n</pre></div>\n</div>\n\n<h3>\n<span id=\"gatsby-source-filesystem\" class=\"fragment\"></span><a href=\"#gatsby-source-filesystem\"><i class=\"fa fa-link\"></i></a><a href=\"https://www.gatsbyjs.org/packages/gatsby-source-filesystem\" rel=\"nofollow noopener\" target=\"_blank\">gatsby-source-filesystem</a>\n</h3>\n\n<p><strong>ファイルを読み取りGatsby上で扱えるFileノードを生成する</strong><br></p>\n\n<ul>\n<li>\n<code>transformer</code>プラグイン（ファイルノードをファイル形式毎に最適化したノードに変換するプラグイン）と併用します。例えば<a href=\"https://www.gatsbyjs.org/packages/gatsby-transformer-json\" rel=\"nofollow noopener\" target=\"_blank\">gatsby-transformer-json</a>はJSONファイルをJSONノードに変換し、<a href=\"https://www.gatsbyjs.org/packages/gatsby-transformer-remark/?=gatsby-transformer-remark\" rel=\"nofollow noopener\" target=\"_blank\">gatsby-transformer-remark</a>はマークダウンファイルをMarkdownRemarkノードに変換します。</li>\n<li>※gatsby-starter-blogインストール済</li>\n</ul>\n\n<h3>\n<span id=\"設定方法使い方\" class=\"fragment\"></span><a href=\"#%E8%A8%AD%E5%AE%9A%E6%96%B9%E6%B3%95%E4%BD%BF%E3%81%84%E6%96%B9\"><i class=\"fa fa-link\"></i></a>設定方法・使い方</h3>\n\n<ul>\n<li>\n<code>gatsby-config.js</code>では読み込み対象のフォルダパスを指定します。</li>\n</ul>\n\n<div class=\"code-frame\" data-lang=\"javascript\">\n<div class=\"code-lang\"><span class=\"bold\">gatsby-config.js</span></div>\n<div class=\"highlight\"><pre><span class=\"nx\">module</span><span class=\"p\">.</span><span class=\"nx\">exports</span> <span class=\"o\">=</span> <span class=\"p\">{</span>\n  <span class=\"na\">plugins</span><span class=\"p\">:</span> <span class=\"p\">[</span>\n    <span class=\"p\">{</span>\n      <span class=\"na\">resolve</span><span class=\"p\">:</span> <span class=\"s2\">`gatsby-source-filesystem`</span><span class=\"p\">,</span>\n      <span class=\"na\">options</span><span class=\"p\">:</span> <span class=\"p\">{</span>\n        <span class=\"na\">name</span><span class=\"p\">:</span> <span class=\"s2\">`pages`</span><span class=\"p\">,</span>\n        <span class=\"na\">path</span><span class=\"p\">:</span> <span class=\"s2\">`</span><span class=\"p\">${</span><span class=\"nx\">__dirname</span><span class=\"p\">}</span><span class=\"s2\">/src/pages/`</span><span class=\"p\">,</span>\n      <span class=\"p\">},</span>\n    <span class=\"p\">},</span>\n    <span class=\"p\">{</span>\n      <span class=\"na\">resolve</span><span class=\"p\">:</span> <span class=\"s2\">`gatsby-source-filesystem`</span><span class=\"p\">,</span>\n      <span class=\"na\">options</span><span class=\"p\">:</span> <span class=\"p\">{</span>\n        <span class=\"na\">name</span><span class=\"p\">:</span> <span class=\"s2\">`data`</span><span class=\"p\">,</span>\n        <span class=\"na\">path</span><span class=\"p\">:</span> <span class=\"s2\">`</span><span class=\"p\">${</span><span class=\"nx\">__dirname</span><span class=\"p\">}</span><span class=\"s2\">/src/data/`</span><span class=\"p\">,</span>\n        <span class=\"na\">ignore</span><span class=\"p\">:</span> <span class=\"p\">[</span><span class=\"s2\">`**/\\.*`</span><span class=\"p\">],</span> <span class=\"c1\">// ドット始まりのファイルは無視</span>\n      <span class=\"p\">},</span>\n    <span class=\"p\">},</span>\n  <span class=\"p\">],</span>\n<span class=\"p\">}</span>\n</pre></div>\n</div>\n\n<p><br></p>\n\n<ul>\n<li>読み取ったファイルノードはGraphQLで取得できます。</li>\n</ul>\n\n<div class=\"code-frame\" data-lang=\"graphql\"><div class=\"highlight\"><pre><span class=\"p\">{</span><span class=\"w\">\n  </span><span class=\"n\">allFile</span><span class=\"w\"> </span><span class=\"p\">{</span><span class=\"w\">\n    </span><span class=\"n\">edges</span><span class=\"w\"> </span><span class=\"p\">{</span><span class=\"w\">\n      </span><span class=\"n\">node</span><span class=\"w\"> </span><span class=\"p\">{</span><span class=\"w\">\n        </span><span class=\"n\">extension</span><span class=\"w\">\n        </span><span class=\"n\">dir</span><span class=\"w\">\n        </span><span class=\"n\">modifiedTime</span><span class=\"w\">\n      </span><span class=\"p\">}</span><span class=\"w\">\n    </span><span class=\"p\">}</span><span class=\"w\">\n  </span><span class=\"p\">}</span><span class=\"w\">\n</span><span class=\"p\">}</span><span class=\"w\">\n</span></pre></div></div>\n\n<p><br></p>\n\n<ul>\n<li>JavaScriptの関数 <code>createFilePath</code> を用意しています。実際<code>gatsby-config.js</code>ではマークダウン読み込みで使っています。</li>\n</ul>\n\n<div class=\"code-frame\" data-lang=\"javascript\">\n<div class=\"code-lang\"><span class=\"bold\">gatsby-config.js</span></div>\n<div class=\"highlight\"><pre><span class=\"nx\">exports</span><span class=\"p\">.</span><span class=\"nx\">onCreateNode</span> <span class=\"o\">=</span> <span class=\"p\">({</span> <span class=\"nx\">node</span><span class=\"p\">,</span> <span class=\"nx\">actions</span><span class=\"p\">,</span> <span class=\"nx\">getNode</span> <span class=\"p\">})</span> <span class=\"o\">=&gt;</span> <span class=\"p\">{</span>\n  <span class=\"kd\">const</span> <span class=\"p\">{</span> <span class=\"nx\">createNodeField</span> <span class=\"p\">}</span> <span class=\"o\">=</span> <span class=\"nx\">actions</span>\n\n  <span class=\"k\">if</span> <span class=\"p\">(</span><span class=\"nx\">node</span><span class=\"p\">.</span><span class=\"nx\">internal</span><span class=\"p\">.</span><span class=\"nx\">type</span> <span class=\"o\">===</span> <span class=\"s2\">`MarkdownRemark`</span><span class=\"p\">)</span> <span class=\"p\">{</span>\n    <span class=\"kd\">const</span> <span class=\"nx\">value</span> <span class=\"o\">=</span> <span class=\"nx\">createFilePath</span><span class=\"p\">({</span> <span class=\"nx\">node</span><span class=\"p\">,</span> <span class=\"nx\">getNode</span> <span class=\"p\">})</span>\n    <span class=\"nx\">createNodeField</span><span class=\"p\">({</span>\n      <span class=\"na\">name</span><span class=\"p\">:</span> <span class=\"s2\">`slug`</span><span class=\"p\">,</span>\n      <span class=\"nx\">node</span><span class=\"p\">,</span>\n      <span class=\"nx\">value</span><span class=\"p\">,</span>\n    <span class=\"p\">})</span>\n  <span class=\"p\">}</span>\n<span class=\"p\">}</span>\n</pre></div>\n</div>\n\n<ul>\n<li>同じく関数<code>createRemoteFileNode</code>を用意しています。こちらは名前の通り、リモートのファイル読み込みで使用します。</li>\n</ul>\n\n<p><br></p><hr>\n\n<h3>\n<span id=\"gatsby-transformer-remark\" class=\"fragment\"></span><a href=\"#gatsby-transformer-remark\"><i class=\"fa fa-link\"></i></a><a href=\"https://www.gatsbyjs.org/packages/gatsby-transformer-remark\" rel=\"nofollow noopener\" target=\"_blank\">gatsby-transformer-remark</a>\n</h3>\n\n<p><strong>マークダウンファイルをパースする（MarkdownRemarkノードに変換する）</strong><br></p>\n\n<h4>\n<span id=\"使い方-10\" class=\"fragment\"></span><a href=\"#%E4%BD%BF%E3%81%84%E6%96%B9-10\"><i class=\"fa fa-link\"></i></a>使い方</h4>\n\n<ul>\n<li>MarkdownRemarkノードはGraphQLで取得可能です。</li>\n</ul>\n\n<div class=\"code-frame\" data-lang=\"graphql\"><div class=\"highlight\"><pre><span class=\"p\">{</span><span class=\"w\">\n  </span><span class=\"n\">allMarkdownRemark</span><span class=\"w\"> </span><span class=\"p\">{</span><span class=\"w\">\n    </span><span class=\"n\">edges</span><span class=\"w\"> </span><span class=\"p\">{</span><span class=\"w\">\n      </span><span class=\"n\">node</span><span class=\"w\"> </span><span class=\"p\">{</span><span class=\"w\">\n        </span><span class=\"n\">html</span><span class=\"w\">\n        </span><span class=\"n\">headings</span><span class=\"w\"> </span><span class=\"p\">{</span><span class=\"w\">\n          </span><span class=\"n\">depth</span><span class=\"w\">\n          </span><span class=\"n\">value</span><span class=\"w\">\n        </span><span class=\"p\">}</span><span class=\"w\">\n        </span><span class=\"n\">frontmatter</span><span class=\"w\"> </span><span class=\"p\">{</span><span class=\"w\">\n          </span><span class=\"n\">title</span><span class=\"w\">\n        </span><span class=\"p\">}</span><span class=\"w\">\n      </span><span class=\"p\">}</span><span class=\"w\">\n    </span><span class=\"p\">}</span><span class=\"w\">\n  </span><span class=\"p\">}</span><span class=\"w\">\n</span><span class=\"p\">}</span><span class=\"w\">\n</span></pre></div></div>\n\n<p><br></p>\n\n<ul>\n<li>目次も取得できます。目次のURLは<code>slug</code>ですが<code>pathToSlugField</code>でカスタム可能です。</li>\n</ul>\n\n<div class=\"code-frame\" data-lang=\"graphql\"><div class=\"highlight\"><pre><span class=\"p\">{</span><span class=\"w\">\n  </span><span class=\"n\">allMarkdownRemark</span><span class=\"w\"> </span><span class=\"p\">{</span><span class=\"w\">\n    </span><span class=\"n\">edges</span><span class=\"w\"> </span><span class=\"p\">{</span><span class=\"w\">\n      </span><span class=\"n\">node</span><span class=\"w\"> </span><span class=\"p\">{</span><span class=\"w\">\n        </span><span class=\"n\">html</span><span class=\"w\">\n        </span><span class=\"n\">tableOfContents</span><span class=\"p\">(</span><span class=\"n\">pathToSlugField</span><span class=\"p\">:</span><span class=\"w\"> </span><span class=\"s2\">\"frontmatter.path\"</span><span class=\"p\">)</span><span class=\"w\">\n        </span><span class=\"n\">frontmatter</span><span class=\"w\"> </span><span class=\"p\">{</span><span class=\"w\">\n          </span><span class=\"n\">path</span><span class=\"w\">\n        </span><span class=\"p\">}</span><span class=\"w\">\n      </span><span class=\"p\">}</span><span class=\"w\">\n    </span><span class=\"p\">}</span><span class=\"w\">\n  </span><span class=\"p\">}</span><span class=\"w\">\n</span><span class=\"p\">}</span><span class=\"w\">\n</span></pre></div></div>\n\n<p><br></p>\n\n<ul>\n<li>要約も取得できます。デフォルト120文字ですが、<code>pruneLength</code>でカスタム可能です。</li>\n</ul>\n\n<div class=\"code-frame\" data-lang=\"graphql\"><div class=\"highlight\"><pre><span class=\"p\">{</span><span class=\"w\">\n  </span><span class=\"n\">allMarkdownRemark</span><span class=\"w\"> </span><span class=\"p\">{</span><span class=\"w\">\n    </span><span class=\"n\">edges</span><span class=\"w\"> </span><span class=\"p\">{</span><span class=\"w\">\n      </span><span class=\"n\">node</span><span class=\"w\"> </span><span class=\"p\">{</span><span class=\"w\">\n        </span><span class=\"n\">html</span><span class=\"w\">\n        </span><span class=\"n\">excerpt</span><span class=\"p\">(</span><span class=\"n\">pruneLength</span><span class=\"p\">:</span><span class=\"w\"> </span><span class=\"mi\">500</span><span class=\"p\">)</span><span class=\"w\">\n      </span><span class=\"p\">}</span><span class=\"w\">\n    </span><span class=\"p\">}</span><span class=\"w\">\n  </span><span class=\"p\">}</span><span class=\"w\">\n</span><span class=\"p\">}</span><span class=\"w\">\n</span></pre></div></div>\n\n<p><br></p><hr>\n\n<h3>\n<span id=\"gatsby-image\" class=\"fragment\"></span><a href=\"#gatsby-image\"><i class=\"fa fa-link\"></i></a><a href=\"https://www.gatsbyjs.org/packages/gatsby-transformer-remark\" rel=\"nofollow noopener\" target=\"_blank\">gatsby-image</a>\n</h3>\n\n<p><strong>画像読み込みを最適化する</strong></p>\n\n<ul>\n<li>gatsby-plugin-sharpと併せて使用します</li>\n<li>Webサイトにおいて画像読み込みの最適化はかなり手間がかかりますが、それをよしなりやってくれるのがこのプラグインです。GraphQLとSharpを使ったGatsbyのネイティブ画像処理機能とシームレスに連携するように設計されています。</li>\n</ul>\n\n<h4>\n<span id=\"設定使い方-9\" class=\"fragment\"></span><a href=\"#%E8%A8%AD%E5%AE%9A%E4%BD%BF%E3%81%84%E6%96%B9-9\"><i class=\"fa fa-link\"></i></a>設定・使い方</h4>\n\n<ul>\n<li>\n<code>gatsby-plugin-sharp</code>、<code>gatsby-transformer-sharp</code>と一緒に使います。下記のように設定します。</li>\n</ul>\n\n<div class=\"code-frame\" data-lang=\"javascript\">\n<div class=\"code-lang\"><span class=\"bold\">gatsby-config.jsの一部</span></div>\n<div class=\"highlight\"><pre><span class=\"kd\">const</span> <span class=\"nx\">path</span> <span class=\"o\">=</span> <span class=\"nx\">require</span><span class=\"p\">(</span><span class=\"s2\">`path`</span><span class=\"p\">)</span>\n\n<span class=\"nx\">module</span><span class=\"p\">.</span><span class=\"nx\">exports</span> <span class=\"o\">=</span> <span class=\"p\">{</span>\n  <span class=\"na\">plugins</span><span class=\"p\">:</span> <span class=\"p\">[</span>\n    <span class=\"p\">{</span>\n      <span class=\"na\">resolve</span><span class=\"p\">:</span> <span class=\"s2\">`gatsby-source-filesystem`</span><span class=\"p\">,</span>\n      <span class=\"na\">options</span><span class=\"p\">:</span> <span class=\"p\">{</span>\n        <span class=\"na\">name</span><span class=\"p\">:</span> <span class=\"s2\">`images`</span><span class=\"p\">,</span>\n        <span class=\"na\">path</span><span class=\"p\">:</span> <span class=\"nx\">path</span><span class=\"p\">.</span><span class=\"nx\">join</span><span class=\"p\">(</span><span class=\"nx\">__dirname</span><span class=\"p\">,</span> <span class=\"s2\">`src`</span><span class=\"p\">,</span> <span class=\"s2\">`images`</span><span class=\"p\">),</span>\n      <span class=\"p\">},</span>\n    <span class=\"p\">},</span>\n    <span class=\"s2\">`gatsby-plugin-sharp`</span><span class=\"p\">,</span>\n    <span class=\"s2\">`gatsby-transformer-sharp`</span><span class=\"p\">,</span>\n  <span class=\"p\">],</span>\n<span class=\"p\">}</span>\n</pre></div>\n</div>\n\n<ul>\n<li>実際使う場合はコンポーネント内でHTMLの<code>img</code>タグの代わりにgatsby-imageの<code>Img</code>タグを使います。</li>\n</ul>\n\n<div class=\"code-frame\" data-lang=\"javascript\"><div class=\"highlight\"><pre><span class=\"k\">import</span> <span class=\"nx\">React</span> <span class=\"k\">from</span> <span class=\"s2\">\"react\"</span>\n<span class=\"k\">import</span> <span class=\"nx\">Img</span> <span class=\"k\">from</span> <span class=\"s2\">\"gatsby-image\"</span>\n\n<span class=\"k\">export</span> <span class=\"k\">default</span> <span class=\"p\">({</span> <span class=\"nx\">data</span> <span class=\"p\">})</span> <span class=\"o\">=&gt;</span> <span class=\"p\">(</span>\n  <span class=\"o\">&lt;</span><span class=\"nx\">div</span><span class=\"o\">&gt;</span>\n    <span class=\"o\">&lt;</span><span class=\"nx\">h1</span><span class=\"o\">&gt;</span><span class=\"nx\">Hello</span> <span class=\"nx\">gatsby</span><span class=\"o\">-</span><span class=\"nx\">image</span><span class=\"o\">&lt;</span><span class=\"sr\">/h1</span><span class=\"err\">&gt;\n</span>    <span class=\"o\">&lt;</span><span class=\"nx\">Img</span> <span class=\"nx\">fixed</span><span class=\"o\">=</span><span class=\"p\">{</span><span class=\"nx\">data</span><span class=\"p\">.</span><span class=\"nx\">file</span><span class=\"p\">.</span><span class=\"nx\">childImageSharp</span><span class=\"p\">.</span><span class=\"nx\">fixed</span><span class=\"p\">}</span> <span class=\"sr\">/</span><span class=\"err\">&gt;\n</span>  <span class=\"o\">&lt;</span><span class=\"sr\">/div</span><span class=\"err\">&gt;\n</span><span class=\"p\">)</span>\n\n<span class=\"k\">export</span> <span class=\"kd\">const</span> <span class=\"nx\">query</span> <span class=\"o\">=</span> <span class=\"nx\">graphql</span><span class=\"s2\">`\n  query {\n    file(relativePath: { eq: \"blog/avatars/kyle-mathews.jpeg\" }) {\n      childImageSharp {\n        fixed(width: 125, height: 125) {\n          ...GatsbyImageSharpFixed\n        }\n      }\n    }\n  }\n`</span>\n</pre></div></div>\n\n<p><br></p><hr>\n\n<h3>\n<span id=\"gatsby-transformer-sharp\" class=\"fragment\"></span><a href=\"#gatsby-transformer-sharp\"><i class=\"fa fa-link\"></i></a><a href=\"https://www.gatsbyjs.org/packages/gatsby-transformer-sharp\" rel=\"nofollow noopener\" target=\"_blank\">gatsby-transformer-sharp</a>\n</h3>\n\n<p><strong>画像読み込みでImageSharpノードを生成する</strong><br></p>\n\n<ul>\n<li>\n<code>gatsby-plugin-sharp</code>と併用します。</li>\n</ul>\n\n<p><br></p><hr>\n\n<h3>\n<span id=\"gatsby-plugin-sharp\" class=\"fragment\"></span><a href=\"#gatsby-plugin-sharp\"><i class=\"fa fa-link\"></i></a><a href=\"https://www.gatsbyjs.org/packages/gatsby-plugin-sharp\" rel=\"nofollow noopener\" target=\"_blank\">gatsby-plugin-sharp</a>\n</h3>\n\n<p><strong><a href=\"https://github.com/lovell/sharp\" rel=\"nofollow noopener\" target=\"_blank\">Sharp</a>(画像圧縮ライブラリ)を使えるようにする</strong><br></p>\n\n<ul>\n<li>Gatsbyエンドユーザーが使うというよりは、プラグインの一部で使う低レイヤーのプラグイン。</li>\n</ul>\n\n<h2>\n<span id=\"css系\" class=\"fragment\"></span><a href=\"#css%E7%B3%BB\"><i class=\"fa fa-link\"></i></a>CSS系</h2>\n\n<p>SASSやCSS in JSのライブラリ用のプラグインは一通り用意されています。<br>\nプラグインを入れるだけで簡単に使えるので設定や使い方は省略します。</p>\n\n<ul>\n<li>\n<a href=\"https://www.gatsbyjs.org/packages/gatsby-plugin-sass\" rel=\"nofollow noopener\" target=\"_blank\">gatsby-plugin-sass</a>\n\n<ul>\n<li><strong>GatsbyでSASS/SCSSを使えるようにする</strong></li>\n<li>\n<code>node-sass</code>をあわせてインストールしてください。</li>\n<li>CSS Moduleを使う場合、拡張子を<code>module.scss</code>、<code>module.sass</code>などとしてください。</li>\n</ul>\n</li>\n<li>\n<a href=\"https://www.gatsbyjs.org/packages/gatsby-plugin-styled-components\" rel=\"nofollow noopener\" target=\"_blank\">gatsby-plugin-styled-components</a>\n\n<ul>\n<li><strong><a href=\"https://github.com/styled-components/styled-components\" rel=\"nofollow noopener\" target=\"_blank\">Styled Components</a>を使えるようにする</strong></li>\n</ul>\n</li>\n<li>\n<a href=\"https://www.gatsbyjs.org/packages/gatsby-plugin-glamor\" rel=\"nofollow noopener\" target=\"_blank\">gatsby-plugin-glamor</a>\n\n<ul>\n<li><strong><a href=\"https://github.com/threepointone/glamor\" rel=\"nofollow noopener\" target=\"_blank\">Glamor</a>と<a href=\"https://github.com/paypal/glamorous\" rel=\"nofollow noopener\" target=\"_blank\">glamorous</a>を使えるようにする</strong></li>\n</ul>\n</li>\n<li>\n<a href=\"https://www.gatsbyjs.org/packages/gatsby-plugin-emotion/\" rel=\"nofollow noopener\" target=\"_blank\">gatsby-plugin-emotion</a>\n\n<ul>\n<li><strong><a href=\"https://github.com/emotion-js/emotion\" rel=\"nofollow noopener\" target=\"_blank\">Emotion</a>を使えるようにする</strong></li>\n</ul>\n</li>\n<li>\n<a href=\"https://www.gatsbyjs.org/packages/gatsby-plugin-postcss\" rel=\"nofollow noopener\" target=\"_blank\">gatsby-plugin-postcss</a>\n\n<ul>\n<li><strong><a href=\"https://postcss.org/\" rel=\"nofollow noopener\" target=\"_blank\">PostCSS</a>が使えるようにする</strong></li>\n</ul>\n</li>\n</ul>\n\n<h3>\n<span id=\"gatsby-plugin-typography\" class=\"fragment\"></span><a href=\"#gatsby-plugin-typography\"><i class=\"fa fa-link\"></i></a><a href=\"https://www.gatsbyjs.org/packages/gatsby-plugin-typography\" rel=\"nofollow noopener\" target=\"_blank\">gatsby-plugin-typography</a>\n</h3>\n\n<p><strong><a href=\"https://kyleamathews.github.io/typography.js/\" rel=\"nofollow noopener\" target=\"_blank\">Typography.js</a>(文章のスタイルを設定するライブラリ)を使えるようにする</strong><br><br>\n* Typography.jsはフォント、フォントサイズ、line-heigth等のパラメータを設定すると、それに従ってCSSを生成してくれるライブラリです。CSSよりも管理が楽になる上、様々なテーマが提供されているので、それを使って簡単にスタイルを設定できます。</p>\n\n<h4>\n<span id=\"設定使い方-10\" class=\"fragment\"></span><a href=\"#%E8%A8%AD%E5%AE%9A%E4%BD%BF%E3%81%84%E6%96%B9-10\"><i class=\"fa fa-link\"></i></a>設定・使い方</h4>\n\n<p>スタイル指定用のJavaScriptを作成します。<br>\nテーマを使うと作成が楽です。どんなテーマがあるかは<a href=\"https://kyleamathews.github.io/typography.js/\" rel=\"nofollow noopener\" target=\"_blank\">Typography.js</a>の右上にある<code>Pick theme</code>プルダウンで確認できます。お気に入りのテーマを選んで、npmインストールして使いましょう。</p>\n\n<div class=\"code-frame\" data-lang=\"javascript\">\n<div class=\"code-lang\"><span class=\"bold\">src/utils/typography.js</span></div>\n<div class=\"highlight\"><pre><span class=\"k\">import</span> <span class=\"nx\">Typography</span> <span class=\"k\">from</span> <span class=\"s2\">\"typography\"</span>\n<span class=\"k\">import</span> <span class=\"nx\">grandViewTheme</span> <span class=\"k\">from</span> <span class=\"s2\">\"typography-theme-grand-view\"</span>\n\n<span class=\"kd\">const</span> <span class=\"nx\">typography</span> <span class=\"o\">=</span> <span class=\"k\">new</span> <span class=\"nx\">Typography</span><span class=\"p\">(</span><span class=\"nx\">grandViewTheme</span><span class=\"p\">)</span>\n\n<span class=\"kd\">const</span> <span class=\"p\">{</span> <span class=\"nx\">rhythm</span><span class=\"p\">,</span> <span class=\"nx\">scale</span> <span class=\"p\">}</span> <span class=\"o\">=</span> <span class=\"nx\">typography</span><span class=\"p\">;</span>\n<span class=\"k\">export</span> <span class=\"p\">{</span> <span class=\"nx\">rhythm</span><span class=\"p\">,</span> <span class=\"nx\">scale</span><span class=\"p\">,</span> <span class=\"nx\">typography</span> <span class=\"k\">as</span> <span class=\"k\">default</span> <span class=\"p\">};</span>\n</pre></div>\n</div>\n\n<p><br></p>\n\n<p>JavaScriptでテーマの設定を上書くこともできます。</p>\n\n<div class=\"code-frame\" data-lang=\"javascript\">\n<div class=\"code-lang\"><span class=\"bold\">src/utils/typography.js</span></div>\n<div class=\"highlight\"><pre><span class=\"k\">import</span> <span class=\"nx\">Typography</span> <span class=\"k\">from</span> <span class=\"s2\">\"typography\"</span>\n<span class=\"k\">import</span> <span class=\"nx\">grandViewTheme</span> <span class=\"k\">from</span> <span class=\"s2\">\"typography-theme-grand-view\"</span>\n\n<span class=\"nx\">grandViewTheme</span><span class=\"p\">.</span><span class=\"nx\">overrideThemeStyles</span> <span class=\"o\">=</span> <span class=\"p\">()</span> <span class=\"o\">=&gt;</span> <span class=\"p\">({</span>\n  <span class=\"s1\">'html,body,h1,h2,h3,h4,h5,h6'</span><span class=\"p\">:</span> <span class=\"p\">{</span>\n    <span class=\"na\">color</span><span class=\"p\">:</span> <span class=\"s1\">'#444'</span><span class=\"p\">,</span>\n    <span class=\"na\">fontFamily</span><span class=\"p\">:</span> <span class=\"p\">[</span>\n      <span class=\"s1\">'-apple-system'</span><span class=\"p\">,</span>\n      <span class=\"s1\">'BlinkMacSystemFont'</span><span class=\"p\">,</span>\n      <span class=\"s1\">'Segoe UI'</span><span class=\"p\">,</span>\n      <span class=\"s1\">'Helvetica Neue'</span>\n      <span class=\"s1\">'Hiragino Kaku Gothic ProN'</span><span class=\"p\">,</span>\n      <span class=\"s1\">'\"Yu Gothic\"'</span><span class=\"p\">,</span>\n      <span class=\"s1\">'YuGothic'</span><span class=\"p\">,</span>\n      <span class=\"s1\">'Verdana'</span><span class=\"p\">,</span>\n      <span class=\"s1\">'Meiryo'</span>\n      <span class=\"s1\">'\"M+ 1p\"'</span><span class=\"p\">,</span>\n      <span class=\"s1\">'sans-serif'</span>\n    <span class=\"p\">].</span><span class=\"nx\">join</span><span class=\"p\">(</span><span class=\"s1\">','</span><span class=\"p\">),</span>\n  <span class=\"p\">},</span>\n<span class=\"p\">})</span>\n\n<span class=\"kd\">const</span> <span class=\"nx\">typography</span> <span class=\"o\">=</span> <span class=\"k\">new</span> <span class=\"nx\">Typography</span><span class=\"p\">(</span><span class=\"nx\">grandViewTheme</span><span class=\"p\">)</span>\n\n<span class=\"kd\">const</span> <span class=\"p\">{</span> <span class=\"nx\">rhythm</span><span class=\"p\">,</span> <span class=\"nx\">scale</span> <span class=\"p\">}</span> <span class=\"o\">=</span> <span class=\"nx\">typography</span><span class=\"p\">;</span>\n<span class=\"k\">export</span> <span class=\"p\">{</span> <span class=\"nx\">rhythm</span><span class=\"p\">,</span> <span class=\"nx\">scale</span><span class=\"p\">,</span> <span class=\"nx\">typography</span> <span class=\"k\">as</span> <span class=\"k\">default</span> <span class=\"p\">};</span>\n</pre></div>\n</div>\n\n<p><br></p>\n\n<p>作ったスタイル指定用のJavaScriptを<code>gatsby-config.js</code>で指定します。</p>\n\n<div class=\"code-frame\" data-lang=\"javascript\">\n<div class=\"code-lang\"><span class=\"bold\">gatsby-config.jsの中</span></div>\n<div class=\"highlight\"><pre>  <span class=\"nx\">plugins</span><span class=\"p\">:</span> <span class=\"p\">[</span>\n    <span class=\"p\">{</span>\n      <span class=\"na\">resolve</span><span class=\"p\">:</span> <span class=\"s2\">`gatsby-plugin-typography`</span><span class=\"p\">,</span>\n      <span class=\"na\">options</span><span class=\"p\">:</span> <span class=\"p\">{</span>\n        <span class=\"na\">pathToConfigModule</span><span class=\"p\">:</span> <span class=\"s2\">`src/utils/typography`</span><span class=\"p\">,</span>\n      <span class=\"p\">},</span>\n    <span class=\"p\">},</span>\n  <span class=\"p\">],</span>\n</pre></div>\n</div>\n\n<p><br></p><hr>\n\n<h2>\n<span id=\"外部連携系\" class=\"fragment\"></span><a href=\"#%E5%A4%96%E9%83%A8%E9%80%A3%E6%90%BA%E7%B3%BB\"><i class=\"fa fa-link\"></i></a>外部連携系</h2>\n\n<p>ブログなどからデータをひっぱってきてGraphQLで扱えるようにするプラグイン群です。様々ありますが、有名どころを以下に示します。各プラグインの使い方は、かなりがっつりしたものになるのでココでは省略します。</p>\n\n<ul>\n<li>\n<a href=\"https://www.gatsbyjs.org/packages/gatsby-source-medium\" rel=\"nofollow noopener\" target=\"_blank\">gatsby-source-medium</a>\n\n<ul>\n<li>\n<a href=\"https://medium.com/\" rel=\"nofollow noopener\" target=\"_blank\">Medium</a>の記事を引っ張ってきてGraphQLで扱えるようにする</li>\n</ul>\n</li>\n<li>\n<a href=\"https://www.gatsbyjs.org/packages/gatsby-source-wordpres\" rel=\"nofollow noopener\" target=\"_blank\">gatsby-source-wordpres</a>\n\n<ul>\n<li>\n<a href=\"https://ja.wordpress.org/\" rel=\"nofollow noopener\" target=\"_blank\">WordPress</a>の記事を引っ張ってきてGraphQLで扱えるようにする</li>\n</ul>\n</li>\n<li>\n<a href=\"https://www.gatsbyjs.org/packages/gatsby-source-contentful\" rel=\"nofollow noopener\" target=\"_blank\">gatsby-source-contentful</a>\n\n<ul>\n<li>\n<a href=\"https://www.contentful.com/\" rel=\"nofollow noopener\" target=\"_blank\">contentful</a>からデータを引っ張ってきてGraphQLで扱えるようにする</li>\n</ul>\n</li>\n</ul>\n\n<p><br></p><hr>\n\n<h3>\n<span id=\"gatsby-source-esa\" class=\"fragment\"></span><a href=\"#gatsby-source-esa\"><i class=\"fa fa-link\"></i></a><a href=\"https://www.gatsbyjs.org/packages/gatsby-source-esa\" rel=\"nofollow noopener\" target=\"_blank\">gatsby-source-esa</a>\n</h3>\n\n<p><strong><a href=\"https://docs.esa.io/posts/102\" rel=\"nofollow noopener\" target=\"_blank\">esa API</a>を使って<a href=\"https://esa.io/\" rel=\"nofollow noopener\" target=\"_blank\">esa.io</a>のデータを引っ張ってきてGraphQLで扱えるようにする</strong><br></p>\n\n<h4>\n<span id=\"設定-11\" class=\"fragment\"></span><a href=\"#%E8%A8%AD%E5%AE%9A-11\"><i class=\"fa fa-link\"></i></a>設定</h4>\n\n<div class=\"code-frame\" data-lang=\"javascript\">\n<div class=\"code-lang\"><span class=\"bold\">gatsby-config.jsの一部</span></div>\n<div class=\"highlight\"><pre>  <span class=\"nx\">plugins</span><span class=\"p\">:</span> <span class=\"p\">[</span>\n    <span class=\"p\">{</span>\n      <span class=\"na\">resolve</span><span class=\"p\">:</span> <span class=\"s2\">`gatsby-source-esa`</span><span class=\"p\">,</span>\n      <span class=\"na\">options</span><span class=\"p\">:</span> <span class=\"p\">{</span>\n        <span class=\"c1\">// (必須)トークン</span>\n        <span class=\"c1\">// https://[YOUR_TEAM_NAME].esa.io/user/applications からトークンを取得できます。</span>\n        <span class=\"c1\">// なおオーナでないとトークンは取得できません</span>\n        <span class=\"na\">accessToken</span><span class=\"p\">:</span> <span class=\"s2\">`YOUR_PERSONAL_ACCESS_TOKEN`</span><span class=\"p\">,</span>\n        <span class=\"c1\">// (必須)チーム名</span>\n        <span class=\"na\">teamName</span><span class=\"p\">:</span> <span class=\"s2\">`YOUR_TEAM_NAME`</span><span class=\"p\">,</span>\n        <span class=\"c1\">// (任意)検索クエリ</span>\n        <span class=\"c1\">// 詳細は https://docs.esa.io/posts/104 参照</span>\n        <span class=\"c1\">// 例 : 'in:public' や 'wip:false in:public'　など</span>\n        <span class=\"na\">q</span><span class=\"p\">:</span> <span class=\"s1\">''</span><span class=\"p\">,</span>\n        <span class=\"c1\">// (任意)ベースカテゴリ</span>\n        <span class=\"c1\">// 例 : 'public'</span>\n        <span class=\"na\">baseCategory</span><span class=\"p\">:</span> <span class=\"s1\">''</span>\n      <span class=\"p\">}</span>\n    <span class=\"p\">}</span>\n  <span class=\"p\">]</span>\n</pre></div>\n</div>\n\n<h4>\n<span id=\"使い方-11\" class=\"fragment\"></span><a href=\"#%E4%BD%BF%E3%81%84%E6%96%B9-11\"><i class=\"fa fa-link\"></i></a>使い方</h4>\n\n<p>GraphQLで下記スキーマにて取得します。</p>\n\n<div class=\"code-frame\" data-lang=\"graphql\"><div class=\"highlight\"><pre><span class=\"p\">{</span><span class=\"w\">\n  </span><span class=\"n\">allEsaPost</span><span class=\"w\"> </span><span class=\"p\">{</span><span class=\"w\">\n    </span><span class=\"n\">edges</span><span class=\"w\"> </span><span class=\"p\">{</span><span class=\"w\">\n      </span><span class=\"n\">node</span><span class=\"w\"> </span><span class=\"p\">{</span><span class=\"w\">\n        </span><span class=\"n\">number</span><span class=\"w\">\n        </span><span class=\"n\">name</span><span class=\"w\">\n        </span><span class=\"n\">body_md</span><span class=\"w\">\n        </span><span class=\"n\">body_html</span><span class=\"w\">\n        </span><span class=\"n\">category</span><span class=\"w\">\n        </span><span class=\"n\">relative_category</span><span class=\"w\">\n        </span><span class=\"n\">tags</span><span class=\"w\">\n      </span><span class=\"p\">}</span><span class=\"w\">\n    </span><span class=\"p\">}</span><span class=\"w\">\n  </span><span class=\"p\">}</span><span class=\"w\">\n</span><span class=\"p\">}</span><span class=\"w\">\n</span></pre></div></div>\n\n<h2>\n<span id=\"まとめ\" class=\"fragment\"></span><a href=\"#%E3%81%BE%E3%81%A8%E3%82%81\"><i class=\"fa fa-link\"></i></a>まとめ</h2>\n\n<p>もともと自分のブログで使っていたものも多数ありますが、<br>\n調べてみると、いろいろ便利なプラグインを発見できました。<br>\nこれでますますGatsbyが人気になることを願っています。</p>\n","body":"## なにこれ\nReact.js製の静的サイトジェネレーター [Gatsby](https://www.gatsbyjs.org/)は、[プラグイン](https://www.gatsbyjs.org/plugins/)を使って簡単に機能拡張できる仕組みを持っています。[公式プラグイン](https://github.com/gatsbyjs/gatsby/tree/master/packages)とコミュニティ提供のものをあわせると、なんと502個もあるそうです。今回はその中でも、おすすめ45個をユースケース別にご紹介します。\n\n※ 本記事は[ブログ](https://takumon.com/2018/10/21/)の転記です。Qiitaで使えない機能（コードブロックの指定行強調表示など）の表示結果はスクリーンキャプチャにしています。HTMLでの表示結果を見たい場合は[ブログ](https://takumon.com/2018/10/21/)をご覧ください。\n\n\n\n## ユースケース別目次\n<small>※クリックすると説明セクションにとべます。</small>\n\n**[マークダウン系](#マークダウン系)**\n\n* [コードブロックでシンタックスハイライトする](#gatsby-remark-prismjs)\n* [コードブロックにタイトルを追加する](#gatsby-remark-code-titles)\n* [見出しにGitHub風ホバーリンクをつける](#gatsby-remark-autolink-headers)\n* [絵文字を使う](#gatsby-remark-emojis)\n* [Graphvizでグラフを描画する](#gatsby-remark-graphviz)\n* [数式を使う](#gatsby-remark-katex)\n* [コードブロックにJavaSriptファイルなどを埋め込む](#gatsby-remark-embed-snippet)\n* [リンクされているPDFや動画などをビルド時にpublicフォルダにコピーする](#gatsby-remark-copy-linked-files)\n* [画像をスマートに表示する](#gatsby-remark-images)\n* [iframeタグを縦横比固定でレスポンシブ化する](#gatsby-remark-responsive-iframe)\n* [Youtubeを埋め込む](#gatsby-remark-embed-youtube)\n* [Twitterの埋め込む](#gatsby-plugin-twitter)\n\n\n**[SEO系](#seo系)**\n\n* [React Helmetを使う](#gatsby-plugin-react-helmet)\n* [オフライン環境でもWebサイトをスムーズに見れるようにする](#gatsby-plugin-offline)\n* [PWA対応する（manifest.webmanifestを生成する）](#gatsby-plugin-manifest)\n* [サイトマップを生成する](#gatsby-plugin-sitemap)\n* [canonical linksを追加する](#gatsby-plugin-canonical-urls)\n* [RSSフィードを生成する](#gatsby-plugin-feed)\n* [robots.txtを生成する](#gatsby-plugin-robots-txt)\n\n**[開補補助系](#開補補助系)**\n\n* [ビルド資産（bundle.js）のlodashのサイズ削減する](#gatsby-plugin-lodash)\n* [ビルド資産（bundle.js）の中身のサイズを可視化する](#gatsby-plugin-webpack-bundle-analyzer)\n* [Google Analyticsを使う](#gatsby-plugin-google-analytics)\n* [Facebook Analyticsを使う](#gatsby-plugin-facebook-analytics)\n\n**[UI系](#ui系)**\n\n* [ローディング中にプログレスバー表示](#gatsby-plugin-nprogress)\n* [aタグでローカル遷移時にリロードではなくヒストリーAPIで遷移](#gatsby-plugin-catch-links)\n* [1系のレイアウト機能を2系で使う](#gatsby-plugin-layout)\n\n**[ファイル系](#ファイル系)**\n\n* [JSONファイルをパースする](#ファイル系)\n* [XMLファイルをパースする](#ファイル系)\n* [Yamlファイルをパースする](#ファイル系)\n* [CSVファイルをパースする](#ファイル系)\n* [ファイルを読み取んでノードを生成する](#gatsby-source-filesystem)\n* [Markdownファイルをパースする](#gatsby-transformer-remark)\n* [画像読み込みを最適化する](#gatsby-image)\n* [画像読み込みでImageSharpノードを生成する](#gatsby-transformer-sharp)\n* [Sharp(画像圧縮ライブラリ)を使う](#gatsby-plugin-sharp)\n\n**[CSS系](#css系)**\n\n* SASS/SCSSを使う\n* Styled Componentsを使う\n* Glamorとglamorousを使う\n* Emotionを使う\n* PostCSSを使う\n* [Typography.js(文章のスタイルを設定するライブラリ)を使う](#gatsby-plugin-typography)\n\n**[外部連携系](#外部連携系)**\n\n* Mediumのデータを取得する\n* WordPressのデータを取得する\n* contentfulのデータを取得する\n* [esa.ioのデータを取得する](#gatsby-source-esa)\n\n\n\n## プラグインの使い方\n<small>※知ってる人は読み飛ばしてください。</small>\n\n* プラグインはnpmパッケージで公開されているのでnpmインストールする\n* `gatsby-config.js`のpluginsに定義を追加する\n* 下記のようにオプションも指定できる\n\n```javascript:gatsby-config.jsの一部\nmodule.exports = {\n  plugins: [\n    // オプションなしで指定する場合は下記のようにプラグイン名を文字列で指定しましょう。\n    \"gatsby-plugin-react-helmet\",\n    // オプションありの場合は、オブジェクトで指定します。\n    {\n      resolve: `gatsby-source-filesystem`,\n      // オプションはさらにオブジェクトで指定します。\n      options: {\n        path: `${__dirname}/src/data/`,\n        name: \"data\",\n      },\n    },\n    {\n      resolve: `gatsby-transformer-remark`,\n      options: {\n        // プラグイン自体を拡張するプラグインを指定できます。\n        // その場合はオプションのpluginsにプラグインを定義しましょう。\n        plugins: [`gatsby-remark-smartypants`],\n      },\n    },\n    {\n      resolve: \"gatsby-plugin-offline\",\n      // 下記のように空オプションの場合は、プラグイン名を文字列で指定した場合と同じです。\n      options: {\n        plugins: [],\n      },\n    },\n  ],\n}\n```\n\n※ 詳細は[Gatsbyプラグインの使い方･作り方･公開方法 | Takumon Blog](https://takumon.com/2018/10/20/#%E3%83%97%E3%83%A9%E3%82%B0%E3%82%A4%E3%83%B3%E3%81%AE%E4%BD%BF%E3%81%84%E6%96%B9)を参照してください。\n\n\n\n\n\n## マークダウン系\nここで紹介するプラグインは[gatsby-transformer-remark](gatsby-transformer-remark)の拡張です。<br>\nそのためプラグインを使う時は、`gatsby-config.js`ではgatsby-transformer-remarkのオプションとして定義します。\n\n```javascript:gatsby-config.jsの一部\nplugins: [\n  {\n    resolve: `gatsby-transformer-remark`,\n    options: {\n      plugins: [\n        {\n          resolve: `gatsby-remark-prismjs`,\n          options: {\n            classPrefix: \"language-\",\n            inlineCodeMarker: null,\n            aliases: {},\n            showLineNumbers: true,\n            noInlineHighlight: false,\n          },\n        },\n      ],\n    },\n  },\n]\n```\n\n\n<br><hr>\n\n### [gatsby-remark-prismjs](https://www.gatsbyjs.org/packages/gatsby-remark-prismjs)\n**マークダウンのコードブロックでシンタックスハイライトできるようにする**\n* [Prism.js](https://prismjs.com/)を使ってシンタックスハイライトします。他にも行数表示や指定行強調といった機能が使えます。\n* Gatsbyで技術系ブログを作るなら、このプラグインが一番重要でしょう。使い方の詳細も含めてご紹介します。\n\n#### 設定\n\n`gatsby-config.js`で下記のように定義します。\nオプションが複数ありあますが重要なのは`showLineNumbers`だけです。`true`だとコードブロックの行数表示機能が使えるようになります。\n\n```javascript:gatsby-config.jsの一部\nplugins: [\n  {\n    resolve: `gatsby-transformer-remark`,\n    options: {\n      plugins: [\n        {\n          resolve: `gatsby-remark-prismjs`,\n          options: {\n            classPrefix: \"language-\",\n            inlineCodeMarker: null,\n            aliases: {},\n            showLineNumbers: true,\n            noInlineHighlight: false,\n          },\n        },\n      ],\n    },\n  },\n]\n```\n<br>\n\n若干めんどくさいですが、`gatsby-config.js`以外にもやることがあります。<br>\n`gatsby-browser.js`でPrismJSのテーマを読み込みます。<br>\n`gatsby-browser.js`は、なければプロジェクトのルートフォルダ直下に作成してください。\n\n```javascript:gatsby-browser.js\nrequire(\"prismjs/themes/prism-solarizedlight.css\")\n```\n\n<br>\n行数を表示するには、専用のCSSを読み込みます。<br>\n\n```js:src/components/layout.jsの一部\nimport 'prismjs/plugins/line-numbers/prism-line-numbers.css';\n\n```\n\n<br>\n\n指定行を強調表示させるにはCSSを定義してください。\n\n```css\n.gatsby-highlight-code-line {\n  background-color: #feb;\n  display: block;\n  margin-right: -1em;\n  margin-left: -1em;\n  padding-right: 1em;\n  padding-left: 0.75em;\n  border-left: 0.25em solid #f99;\n}\n\n.gatsby-highlight {\n  background-color: #fdf6e3;\n  border-radius: 0.3em;\n  margin: 0.5em 0;\n  padding: 1em;\n  overflow: auto;\n}\n\n.gatsby-highlight pre[class*=\"language-\"] {\n  background-color: transparent;\n  margin: 0;\n  padding: 0;\n  overflow: initial;\n  float: left; /* 1 */\n  min-width: 100%; /* 2 */\n}\n.gatsby-highlight pre[class*=\"language-\"].line-numbers {\n  padding-left: 2.8em; /* 3 */\n}\n```\n\n\n<br>\n\n#### 使い方\nシンタックスハイライトだけなら下記のように記述します。\n\n\n* 記述方法\n\n\n<pre>\n```javascript\nplugins:[\n  {\n    resolve: `gatsby-transformer-remark`,\n      options: {\n        plugins: [\n          `gatsby-remark-prismjs`,\n        ]\n      }\n    }\n  } \n]\n```\n</pre>\n\n<br>\n\n* 表示結果\n\n![スクリーンショット 2018-10-22 22.46.27.png](https://qiita-image-store.s3.amazonaws.com/0/49915/f4284d49-bdad-78e0-a7d2-5c29175cdf5e.png)\n\n\n\n行数表示や指定行強調を使う場合コードブロックの1行目(\\`\\`\\`の部分)にそれらの情報を記載します。以降に詳細を示します。\n\n##### 行数表示する場合\n\n* 記述方法\n\n\n<pre>\n```javascript{numberLines: true}\n// In your gatsby-config.js\nplugins: [\n  {\n    resolve: `gatsby-transformer-remark`,\n    options: {\n      plugins: [\n        `gatsby-remark-prismjs`,\n      ]\n    }\n  }\n]\n```\n</pre>\n\n\n* 表示結果\n\n![スクリーンショット 2018-10-22 22.46.41.png](https://qiita-image-store.s3.amazonaws.com/0/49915/ea8c2f0d-e045-4c2f-2f60-51823bb2a3ae.png)\n\n\n##### 行数表示する場合（開始行数指定あり）\n\n* 記述方法\n\n<pre>\n```javascript{numberLines: 5}\n// In your gatsby-config.js\nplugins: [\n  {\n    resolve: `gatsby-transformer-remark`,\n    options: {\n      plugins: [\n        `gatsby-remark-prismjs`,\n      ]\n    }\n  }\n]\n```\n</pre>\n\n\n<br>\n\n* 表示結果\n\n![スクリーンショット 2018-10-22 22.47.00.png](https://qiita-image-store.s3.amazonaws.com/0/49915/6a65412c-5d0d-8cd5-aef6-be02daecc219.png)\n\n\n\n##### 指定行数を強調する場合\n* 記述方法\n\n<pre>\n```javascript{1,5-9}\n// In your gatsby-config.js\nplugins: [\n  {\n    resolve: `gatsby-transformer-remark`,\n    options: {\n      plugins: [\n        `gatsby-remark-prismjs`,\n      ]\n    }\n  }\n]\n```\n</pre>\n\n<br>\n\n* 表示結果\n\n![スクリーンショット 2018-10-22 22.47.08.png](https://qiita-image-store.s3.amazonaws.com/0/49915/ad9817b4-9a0e-0a35-d5fd-5ab64c0354d1.png)\n\n\n##### 全部の組み合わせ（指定行数を強調かつ行数表示）\n\n* 記述方法（2つの括弧を定義します）\n\n<pre>\n```javascript{numberLines: 5}{1,5-9}\n// In your gatsby-config.js\nplugins: [\n  {\n    resolve: `gatsby-transformer-remark`,\n    options: {\n      plugins: [\n        `gatsby-remark-prismjs`,\n      ]\n    }\n  }\n]\n```\n</pre>\n\n<br>\n\n* 表示結果\n\n![スクリーンショット 2018-10-22 22.47.17.png](https://qiita-image-store.s3.amazonaws.com/0/49915/c866890b-222f-cefc-ca39-b287b5e41839.png)\n\n\n\n\n\n\n<br><hr>\n### [gatsby-remark-code-titles](https://www.gatsbyjs.org/packages/gatsby-remark-code-titles/?=gatsby-remark-code-titles)\n**マークダウンでコードブロックにタイトルを表示できるようにする**\n\n#### 設定\n* 前述のgatsby-remark-prismjsとあわせて使います。\n\n`gatsby-config.js`で`gatsby-transformer-remark`オプションとして一番最初に定義する必要があります。\n\n```javascript:gatsby-config.jsの一部\n  plugins: [\n    {\n      resolve: `gatsby-transformer-remark`,\n      options: {\n        plugins: [\n          `gatsby-remark-code-titles`,\n          {\n            resolve: `gatsby-remark-prismjs`,\n            options: {\n              classPrefix: \"language-\",\n              inlineCodeMarker: null,\n              aliases: {},\n              showLineNumbers: true,\n            },\n          },\n        ],\n      },\n    },\n  ]\n```\n\n<br>\nさらにCSSでスタイルを追加しましょう。\n\n```css\n.gatsby-code-title {\n  background: #f3e3b9;\n  color: #b38383;\n  margin-bottom: -0.65em;\n  padding: 0.7rem 1.05rem;\n  font-size: 0.8em;\n  line-height: 0.2;\n  font-family: SFMono-Regular,Menlo,Monaco,Consolas,Liberation Mono,Courier New,monospace;\n  font-weight: 600;\n  border-radius: 8px 8px 0 0;\n  display: table;\n}\n```\n\n#### 使い方\n\n* マークダウンでコードブロックの一行目に`:title=タイトル名`と記述します。\n\n<pre>\n```javascript:title=gatsby-config.js\n// In your gatsby-config.js\nplugins: [\n  {\n    resolve: `gatsby-transformer-remark`,\n    options: {\n      plugins: [\n        `gatsby-remark-prismjs`,\n      ]\n    }\n  }\n]\n```\n</pre>\n\n<br>\n\n* 表示結果\n\n![スクリーンショット 2018-10-22 23.20.45.png](https://qiita-image-store.s3.amazonaws.com/0/49915/d8ce4616-735e-4149-b2d3-307510c7a51d.png)\n\n\n##### 強調行指定との組み合わせ\n\n* 強調行の後にタイトルを記述します。\n\n<pre>\n```javascript{1, 5-9}:gatsby-config.js\n// In your gatsby-config.js\nplugins: [\n  {\n    resolve: `gatsby-transformer-remark`,\n    options: {\n      plugins: [\n        `gatsby-remark-prismjs`,\n      ]\n    }\n  }\n]\n```\n</pre>\n\n<br>\n\n* 表示結果\n\n![スクリーンショット 2018-10-22 23.20.56.png](https://qiita-image-store.s3.amazonaws.com/0/49915/5855172f-ffcc-c0bc-2362-c068e20c8c77.png)\n\n\n##### 行数表示との組み合わせ\nなぜかできませんでした...プラグインの相性が悪いのかもしれません。\n\n\n\n<br><hr>\n### [gatsby-remark-autolink-headers](https://www.gatsbyjs.org/packages/gatsby-remark-autolink-headers)\n**マークダウンで見出しにGitHub風ホバーリンクをつける**\n\n見出しホバー時に鎖アイコンリンクが表示されます。\nリンクを指定して初期表示すると見出しまでスクロースしてくれるので便利です。\n\n![スクリーンショット 2018-10-22 23.22.56.png](https://qiita-image-store.s3.amazonaws.com/0/49915/3ace8cc4-137f-e977-e423-65279d322b10.png)\n\n\n\n\n#### 設定\nオプションでアイコン、アイコンの位置、アイコンのクラス名を指定できます。\n\n```javascript:gatsby-config.jsの一部\n  plugins: [\n    {\n      resolve: `gatsby-transformer-remark`,\n      options: {\n        plugins: [\n          {\n            resolve: `gatsby-remark-autolink-headers`,\n            options: {\n              offsetY: `100`,\n              icon: `<svg aria-hidden=\"true\" height=\"20\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"20\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg>`,\n              className: `custom-class`,\n            },\n          },\n        ],\n      },\n    },\n  ],\n```\n\n#### 補足\n[公式サイト](https://www.gatsbyjs.org/packages/gatsby-remark-autolink-headers/#how-to-use)には下記記述がありますが\n起因となった[issue 5764](https://github.com/gatsbyjs/gatsby/issues/5764)はもう解決済みたいなので、定義順は特に気にする必要なさそうです。\n\n> gatsby-remark-prismjsと一緒に使う場合は必ず後に定義してください。\n\n\n\n\n\n<br><hr>\n### [gatsby-remark-emojis](https://www.gatsbyjs.org/packages/gatsby-remark-emojis)\n**マークダウンで絵文字が使えるようにする**<br>\n\n* 絵文字は画像ファイルではなく、base64形式で埋め込みます。全ての絵文字をドカッとインポートするわけではないのでデプロイ資産のサイズが最小限で済むのがメリットです。\n\n```html:HTMLファイル中に埋め込まれる絵文字\n<img\n  class=\"emoji-icon\"\n  data-icon=\"emoji-100\"\n  style=\"display: inline; margin: 0; margin-top: 1px; position: relative; top: 5px; width: 25px\"\n  src=\"data:image/png;base64, iVBORw0KGgoAAAANSUhEUgAAAEAAAABACAYAAACqaXHeAAAMMUlEQVR4Ae3YhXtcx90o4HfOnhVZlpntkMN0nTK3TsrMzPdjZmZmvh8zM5SZuQ04zInMsiVb0kq7e2jmPnBRj11t5HLy/gcz88Px4PaQhwRf5Q6xJQFTViAc9OWV2FVyVc6tq5hEZXlj0zylxxNKzkr0hng7/nMdo6OkQIFkGXnbl95mwn1c1mFvyWWBqxpuq/k13Oz0bOeyeZ5Z8eKaR9a0ARtyPpy4aophfBhdywj7fOGt5ZySrTUziQPoAwyxteDJJc+teXnBUAQEvnML78BQn5M4ArCGUHPhAt9d8LKS9RGBMjCVeMsovz3KD3cZrvkeTFlG3vWFs47xkkfP85zIwxpuj/wWbocxtvV4c8l39NgcgTrQCZzIaNW8MHFRw3vxz7CBrM+mgu/o8uqK1WgCdwf2tbg2510ZWY9rKhb6rDKAvOfMXUS2yLo+T6/4/YK1NVo8OvI23L6D8Q6vKPixPiNIgfnAvowbW3y2zTv7/Ejk+ZE7AXqM1Dx7kVfXrIaMycivXMff30WB9Houx9bIbM3orxKQOL38F52Zv6DVZUfJq0q+q8eaBIj0a9IjCEd4Rs3r+4xAoJPxlgV+LOPoBM0mth/hrJrViVHYSTbPtprvqhhPCFT4pxbveQT9R+AswmHaEYl2ZPhJg1zAk6zcq2iVnNfnG7t8Y8lYIgBSxoEhjvdZt8DVJVcAKuyb4+f6HELTwVb2JM5uCBkjEFnX4qXznJ/IkQKfyXgnDgNEVo9y1QIhUOU0Ocky8twZedI839Fjb814AgAEbsH0LC9oeFpFDoH7Mn43cv8QDUDFeYHNgdkWx6DDpoZXxv8nchr+YIHPIQKsZ0vimQ2txGgiRMvLo5V5Ga+e51t67ImsOsXh+yVvW82JeR5bcw4EOhmf6PG+EUoAmOfKhq2J+cjoYwn72F1wcSJDzHhn4LPj9ACgYSxxViIgS6Sjlpcf9cB8P5fO8aI5XlZyWUNuKZqMzzZcu55Lj3NJTRtwZ+IfRjhpiZK1kTbKRO8+zm7xmooRpECn4V8jBywRyRMTgGw1F7+Bu7Ho9ORvMJh15ImHH+fba66p2BoRaDLm0GpYAyga/jJw/yKvi1yaECgDtxR8whLnsesoayIC7YywwJaKpyWgCdzUsA89S+SUkWlA1mJ3xsiyF5AZTMFQ4vUFL60ZBtyaeG+L4cArGiBmHFvkExez4TiPaVgP2N/i42MsWIoGCTCacW6kU7ARUODtQ0w7hUATKAGpoQgky8gbg6lJiZPYH5hI3Jj4+1V8KOM5JV8PKPCREToFz6w5JwIxcH2bDziFjBMtOhENApdiy/97qTXvi3ScQs3amrMBqeTuPj3LyBcMZoh+4teHmKrZ2OMtuHYdj57juRUtwHzNPyZO9LkmsjWixULgpoK7ndpFGROAAltqzk1AHZhM7A/UlriMsaNcWLELAWWXyf+gbxn5PxhYwkn8LsBP0p7m4Q2PS0ATONjjhnMY6XBBZCwgcGiI+51GyeMj50VkzCXUnA2oA/cPUzmFDmdHri4ZRhOYyum+jGQZ+cusXM1ZFY8omIBAt8W+TfTa7K3ZFAGR2xtudgqbyDs8pWZ7RJteoFfTAnQi/xboOoVFzqt5RgKqFjePM2sA+biVK3gMHhuBhKmGt+Y0NY9NTECgjFzb5SZLnE2G3QXnR4YDArOJuQYQWFzk5i6VJR5Odow1NZsAZeBzgb4B5MHK9djdsDshY7bFuxven9FUXIhRCBxrc7BNbYlIhidENkQE6hbtwASgCUxH5kaIluKynGf1CICy4loUBpCXVuYcdkxxQU07AJMN/4xOzSpsSrQhcKTFcaewQNbieZHNgE7GIoYgULY4PE7hFGa5tOJJCUiBk13umaUygPyIldnOExJXNgjAzAL7YJiAjWj9PxcwY4kNtGseMcMVkREIHMw4FDkPkGE4d2oFGxu2A7oZn8uZ3kg0gHyjlVngUZHdCYF+xtQBClgHDCcCoMgoLFGRJ17YsDEhIPLhjLsjFwJakXEEANhJXvHoWa6pyQHTDX87TNeA8mEP3FlcfJQralYF4N7EO9s0kCylSFQAsJV2j0sWeGZiDAJTkY+1WahpQSJEhgtqAGiz6SQvq9gbESgDdxzlY/PUBpTf6YHbxEsjl0cgJm7t8Y4dVE5tKNACgFlW1XxdlwsTOeBDLfbl7EIDyLBuA/9tHSfaFInRBfYW7K1YCzgWeMduFpAMKL/K4NYQsHmWqyPbINAJ3D3GCQBAAMAliceM089oAqnDI0teWzMMGYcTb9nPPZsZTxwGBOwo+b45ZhKdjLU1j49cCIEC1y/wnwskg5MfM7hxQuA5BefUANyZ8SkAyEiJk9iBVs0VGd/S52osBpqG51WMA8rAf+R8cjfVRm6b5UMZeyMTibGCl9VoEJAAaHBrxr9+gANIBif8oMG9iaHI78zyipq1gSrxW9fzE+gDXM1w4rs7fGvDDgQkJABkgH7GtRXfPcnnkOBRXN7le3u8ODGODAAQUWTcE/jTm/lDFB6g8EcG81Syhp3z/GefPZGQcW2Ln8d/WGIVYxW/1OdlDRuQIwASInotPt3nJ2f5HAqAS2lVnF3yhj6vj2xAQEDKmM74eOLvT/JB9KxAeJvBXMhI4jtn+N6aTYGY+KVZfhWzTmEX6xPPqHh5zSMiGxPtQCfj9sB7Kv5ugftRWuJcWn3GF1nTZ11D3mZrw2xgZoSTLebQt0LhEwazitV4S4fHRYYC70z8/P/gE0hO4ycZX2RjwZqK8chIRtliZojjh5hBtIx9hDHCHoZmqFE7c8LfDRb+4Rg7e3ysYBcWEz+c8RdYNDi/Q0DyFSK83PJ+hXaXR83ynw0bMybxzXinM+c81k5QonuQx7U4F/2aNW3ua3PfOo7NcU6i3Ml9aJw5+T9Z3iRDOZdE8oTAVIt5K7CLbX1297m4oVWz5ijbJkmJ+RaPztiZKBLjOBw5eJSZwI5EdZybRvngBm5C1xnIj1texVDDJWhD5AZMWcZljMyys2BLl2012w9zduBS7Im0IusTrRpQIyEBAhdBCxHQ0K954hy/gfc7A+FTljfBxobfmeWFWEh8W8Vb0QOAKwld1lVsX2RLwzkZD09cUnNpzeYGEQnBaaVAjQBIaLCAk4HhRBH55U/z50hWKP+I5T2bVmIDQotPRG4dpgcAZ5PPsLPi+XhazeNK1tdIlpIySpTI0EGT6GMxcDLQQQCkQA+TQ9ycMVFzuMdnEc7oAgygZihyMVoZ+07zN7+m4SUL/GJFjgCAGiXKQC8wHTja4giG8NkW8wX3d7i7y3Sg2EwEQIJEQkAaJT3ZmcmfbHkZDaaxYYGPTzFtia2kSF3TABrEQDdjMnBTxh2RW6a5bgOziAhokBATsSQhHXBayRdIfq/lXUkv8IEWWWDm72ks8WRmI+8Z5dkl3RY3N0wW3Bo4MMxioApU91HcR/LlJ/y25T2bdsVli7yx4Tew3ykM08bOPrFNt6Y4SQ+VZVzCeEZ7DfOzjGPoLGYOMYYFgMTqnSwiOnNCMpi7GeqwM3AIhRXaQ+sgOyq2VuwNzCVGKi7qsjMxhKGGLKNAnugOcxCrarY0yJka4a5hPrmGT2PeCoQpXzwl2xLbe+zpc2XF+P/u/ZgI7E70kWN9wwQkJAQAZHQxlMgTAiljGpOBD67mb3CTByjc4gvjUlqHuKhmU5eLFtmOsxMbcWHi/EiWEJGQAAkQfH4B6GacwGxiBE3G+0b4A9ziAcoLK7ObdoftfXb12HoDuxJXYWvkipqtEc3nP2AM1IEmsIATWIgcQxMYbzgYqCHQD8zkTGVMR4YTZeSmD3OnFQi/aXAvJU9s6rG54OLEoxJX1VzcsK06zZQXKNELdBIFmsi9gZOBMqPb4jgOtJgpuKumGmPD9dxUUEACyi95F4BnkWNPyTMbHlfyiJJNjaXUgQL9xFxgJnAw52hgMnEiUNzDW2boRaDwZZIbUGQ48S3zvLRmNQAiKvQxnzGZcTjjvsinulw/x5GlX+a7Sbt9+YVPG8wqxvBzc7y2YQIlqoy5wF2BT0c+vMjnxilzYkOzSET0FSq812C2ESLrSn6sZqLPO/vcntPP6QzTayhQ+ioSPuaBGWNLRdZl7pP0EX0VC7/gwS3zIPfQBTx0AQ9yD12AB7mHLsCD3EMX4EHufwJIOEs9kLQJngAAAABJRU5ErkJggg==\"\n>\n```\n\n* (注意点）コードブロック中の記述も絵文字に変換しようとするので気をつけてください。\n\n#### 設定\n\n\nオプションで色々指定できます。\n\n```javascript:gatsby-config.jsの一部\n  plugins: [\n    {\n      resolve: `gatsby-transformer-remark`,\n      options: {\n        plugins: [\n          {\n            resolve: 'gatsby-remark-emojis',\n            options: {\n              // falseにすると絵文字機能をオフにできます\n              active : true,\n              // サイズは16, 24, 32, 64から選べます\n              size   : 64,\n              // 独自クラスを追加できます\n              class  : 'emoji-icon',\n              // 独自スタイルを追加できます\n              styles : {\n                display      : 'inline',\n                margin       : '0',\n                'margin-top' : '1px',\n                position     : 'relative',\n                top          : '5px',\n                width        : '25px'\n              }\n            }\n          }\n        ]\n      }\n    }\n  }\n```\n\n\n#### 使い方\nマークダウンにて`:XXX:`のような形式で記述します。\n例 :100:\n\n\n\n<br><hr>\n### [gatsby-remark-graphviz](https://www.gatsbyjs.org/packages/gatsby-remark-graphviz)\n**マークダウンで[Graphviz](https://www.graphviz.org/)(dot言語で記述されたグラフ構造を任意のフォーマットの画像ファイルへ出力するツール)を使えるようにする**<br>\n\n* 内部的には[viz.js](https://github.com/mdaines/viz.js/)でコードブロックをSVGファイルに変換しています。\n\n#### 設定\n\n`gatsby-remark-prismjs`のようなコードブロックを編集するプラグインより先に定義してください。\n\n```javascript:gatsby-config.jsの一部\nplugins: [\n  {\n    resolve: 'gatsby-transformer-remark',\n    options: {\n      plugins: [\n        'gatsby-remark-graphviz'\n      ]\n    }\n  }\n],\n```\n\n#### 使い方\n\nマークダウンで下記のように言語を`dot`としてコードブロックを記述します。\n\n<pre>\n```dot\ndigraph graphname {\n  a -> b;\n  b -> c;\n  a -> c;\n}\n```\n</pre>\n\nすると下記のように表示されます。\n\n![スクリーンショット 2018-10-22 23.26.08.png](https://qiita-image-store.s3.amazonaws.com/0/49915/4691775f-4750-82c1-0fd1-f8b92402b19f.png)\n\n\n\n\n\n<br><hr>\n### [gatsby-remark-katex](https://www.gatsbyjs.org/packages/gatsby-remark-katex)\n**マークダウンで数式が使えるようにする**<br>\n\n\n#### 設定\n\n```javascript:gatsby-config.jsの一部\n  plugins: [\n    {\n      resolve: 'gatsby-transformer-remark',\n      options: {\n        plugins: [\n          `gatsby-remark-katex`,\n        ]\n      }\n    }\n  ],\n```\n\n<br>\n追加でCSSをテンプレートで読み込んでください。\n\n```javascript:テンプレート\nimport 'katex/dist/katex.min.css';\n```\n\n\n#### 使い方\n方程式を '$'で囲みます。\n\n```\n$\nf(x) = \\int_{-\\infty}^\\infty\\hat f(\\xi)\\,e^{2 \\pi i \\xi x}\\,d\\xi\n$\n```\n\nすると下記のように表示されます。\n\n![スクリーンショット 2018-10-22 23.29.41.png](https://qiita-image-store.s3.amazonaws.com/0/49915/7bcdd775-1633-b857-09cb-38bf292866c6.png)\n\n\n\n\n<br><hr>\n### [gatsby-remark-embed-snippet](https://www.gatsbyjs.org/packages/gatsby-remark-embed-snippet)\n**マークダウンでJavaSriptファイルなどを読み込んでコードブロックに埋め込む**<br>\n\n#### 設定\n`directory`は読み込み対象資産のフォルダを指定します。<br>\n必ず`gatsby-remark-prismjs`より前に指定してください。\n\n\n```javascript:gatsby-config.jsの一部\n  plugins: [\n    {\n      resolve: `gatsby-transformer-remark`,\n      options: {\n        plugins: [\n          {\n            resolve: \"gatsby-remark-embed-snippet\",\n            options: {\n              classPrefix: \"language-\",\n              directory: `${__dirname}/examples/`,\n            },\n          },\n          {\n            resolve: `gatsby-remark-prismjs`,\n            options: {\n              classPrefix: \"language-\",\n              inlineCodeMarker: null,\n              aliases: {},\n              showLineNumbers: true,\n            },\n          },\n        ]\n      }\n    }\n  ]\n```\n\n#### 使い方\nマークダウンで\\`embed:設定で指定したディレクトリからの相対パス\\`のように指定します。\n指定行を強調したい場合は、読み込み対象ファイルにコメントで記述します。\n\n#### JavaScriptファイルの場合\n##### 読み込み対象ファイル\n\n```javascript:examples/2018/10/21/sample.js\nimport React from \"react\"\nimport ReactDOM from \"react-dom\"\n\nconst name = \"Brian\"\n\n// highlight-range{2-3}\nReactDOM.render(\n  <div><h1>Hello, ${name}!</h1></div>,\n  document.getElementById(\"root\")\n);\n```\n\n##### マークダウン記述\n\n<pre>\n`embed:2018/10/21/sample.js`\n</pre>\n\n##### 表示結果\n\n![スクリーンショット 2018-10-22 23.31.18.png](https://qiita-image-store.s3.amazonaws.com/0/49915/81a188a5-7aa5-37f7-3ece-36f100168f07.png)\n\n\n#### CSSファイルの場合\n##### 読み込み対象ファイル\n\n```javascript:examples/2018/10/21/sample.css\nhtml {\n  /* highlight-range{1-2} */\n  height: 100%;\n  width: 100%;\n}\n\n* {\n  box-sizing: border-box; /* highlight-line */\n}\n```\n\n##### マークダウン記述\n\n<pre>\n`embed:2018/10/21/sample.css`\n</pre>\n\n##### 表示結果\n\n![スクリーンショット 2018-10-22 23.31.26.png](https://qiita-image-store.s3.amazonaws.com/0/49915/5e6d9589-6afc-c7a1-e458-3b249b8a0776.png)\n\n\n\n#### HTMLファイルの場合\n##### 読み込み対象ファイル\n\n```html:examples/2018/10/21/sample.html\n<html>\n  <body>\n    <h1>highlight me</h1> <!-- highlight-line -->\n    <p>\n      <!-- highlight-next-line -->\n      And me\n    </p>\n  </body>\n</html>\n```\n\n##### マークダウン記述\n\n<pre>\n`embed:2018/10/21/sample.html`\n</pre>\n\n##### 表示結果\n\n![スクリーンショット 2018-10-22 23.31.35.png](https://qiita-image-store.s3.amazonaws.com/0/49915/917ab84d-c108-f4f8-2fa6-42f91002bf3c.png)\n\n\n#### YAMLの場合\n##### 読み込み対象ファイル\n\n```yaml:examples/2018/10/21/sample.yaml\nfoo: \"highlighted\" # highlight-line\nbar: \"not highlighted\"\n# highlight-range{1-2}\nbaz: \"highlighted\"\nquz: \"highlighted\"\n```\n\n##### マークダウン記述\n\n<pre>\n`embed:2018/10/21/sample.yaml`\n</pre>\n\n##### 表示結果\n\n![スクリーンショット 2018-10-22 23.31.44.png](https://qiita-image-store.s3.amazonaws.com/0/49915/cc80a505-e63e-f8b2-1835-4edfdd82d39b.png)\n\n\n\n\n\n<br><hr>\n### [gatsby-remark-copy-linked-files](https://www.gatsbyjs.org/packages/gatsby-remark-copy-linked-files)\n**マークダウンのリンクや画像で使われているPDFや動画などをビルド時にpublicフォルダにコピーする**\n\n#### 設定\n\n```javascript:gatsby-config.jsの一部\n  plugins: [\n    {\n      resolve: `gatsby-transformer-remark`,\n      options: {\n        plugins: [\"gatsby-remark-copy-linked-files\"],\n      },\n    },\n  ]\n```\n\n<br>\nコピー先をpublic以外にしたい場合はオプションを指定します。\n\n\n```javascript:gatsby-config.jsの一部\n  plugins: [\n    {\n      resolve: `gatsby-transformer-remark`,\n      options: {\n        plugins: [\n          {\n            resolve: 'gatsby-remark-copy-linked-files',\n            options: {\n              destinationDir: 'path/to/dir',\n            }\n          }\n        ]\n      }\n    }\n  ]\n```\n\n<br>\n\nコピー対象外ファイル指定することもできます。その場合は`ignoreFileExtensions`を設定します。\nこのプロパティは`[\"png\", \"jpg\", \"jpeg\", \"bmp\", \"tiff\"]`がデフォルトです。\nというのも、これらのファイルはgatsby-remark-imagesを使って自動的にレスポンシブな画像が生成されることを前提にしているからです。\nもしgatsby-remark-imagesを使わずにpublicファイルへの単純コピーにしたい場合は下記のようにします。\n\n```javascript:gatsby-config.jsの一部\n  plugins: [\n    {\n      resolve: `gatsby-transformer-remark`,\n      options: {\n        plugins: [\n          {\n            resolve: \"gatsby-remark-copy-linked-files\",\n            options: {\n              ignoreFileExtensions: [],\n            },\n          },\n        ],\n      },\n    },\n  ]\n```\n\n\n\n\n<br><hr>\n### [gatsby-remark-images](https://www.gatsbyjs.org/packages/gatsby-remark-images)\n**マークダウンで画像をスマートに表示できるようにする**<br>\n\n* 画像ロード後にレイアウトがガタっとずれないように、画像の大きさ分の空要素を確保しておく\n* ブラウザ幅別に画像を生成し`img`タグの`srcset`属性と`sizes`属性を設定します\n* 画像を20px幅に小さくしたものを、画像ロード中にプレースホルダーとして表示します。これはMediumとFacebookで使われているテクニックです。\n\n#### 設定・使い方\n`gatsby-remark-images`、`gatsby-plugin-sharp`とあわせて使いましょう。\nオプションに指定したmaxWidthにあわせて、プラグインがいい感じの色々サイズの画像を複数生成してくれます。\n\n```javascript:gatsby-config.jsの一部\n  plugins: [\n    `gatsby-plugin-sharp`,\n    {\n      resolve: `gatsby-transformer-remark`,\n      options: {\n        plugins: [\n          {\n            resolve: `gatsby-remark-images`,\n            options: {\n              maxWidth: 590,\n            },\n          },\n        ],\n      },\n    },\n  ]\n```\n\n\n\n<br><hr>\n### [gatsby-remark-responsive-iframe](https://www.gatsbyjs.org/packages/gatsby-remark-responsive-iframe)\n**マークダウンでiframeタグを縦横比固定でレスポンシブにする**\n\n#### 使い方\n`gatsby-config.js`の設定は特に変わったところはありません。\nただし縦横比を明確にするためマークダウン中のiframeにはwidthとheigth属性を必ず指定してください。\n\n```markdown:マークダウンサンプル\nThis is a beautiful iframe:\n\n<iframe url=\"http://www.example.com/\" width=\"600\" height=\"400\"></iframe>\n```\n\n\n\n\n<br><hr>\n### [gatsby-remark-embed-youtube](https://www.gatsbyjs.org/packages/gatsby-remark-embed-youtube)\n**マークダウンでYoutubeを埋め込めるようにする**\n\n#### 設定\nオプションに高さと幅を指定できます。\n\n```javascript:gatsby-config.jsの一部\n  plugins: [\n    {\n      resolve: \"gatsby-transformer-remark\",\n      options: {\n        plugins: [\n          {\n            resolve: \"gatsby-remark-embed-youtube\",\n            options: {\n              width: 800,\n              height: 400\n            }\n          }\n        ]\n      }\n    },\n  ]\n```\n\n<br>\n\n一注意があって、`gatsby-remark-responsive-iframe`をあわせて使う場合は必ずその前に定義してください。\n\n```javascript:gatsby-config.jsの一部\n        plugins: [\n          \"gatsby-remark-embed-youtube\",\n          \"gatsby-remark-responsive-iframe\"\n        ]\n```\n\n#### 使い方\nマークダウンで下記のように記載します。URLの最後(embed/2Xc9gXyf2G4)は動画のIDです。\n\n```markdown:マークダウンサンプル\n# Look at this Video:\n\n`youtube:https://www.youtube.com/embed/2Xc9gXyf2G4`\n```\n\n<br>\n\n* 表示結果\n\n![スクリーンショット 2018-10-22 23.37.20.png](https://qiita-image-store.s3.amazonaws.com/0/49915/0a973d8f-224e-c432-a59a-dbcd170c99ef.png)\n\n\n\n\n<br><hr>\n### [gatsby-plugin-twitter](https://www.gatsbyjs.org/packages/gatsby-plugin-twitter)\n**マークダウンでTwitterの埋め込み用スクリプトを記述できるようにする**<br>\n\nこちらのプラグインもう少しスマートになってほしいです（ちょっとめんどくさいです）。\n使い方は[GatsbyでYouTubeとTwitter埋め込み | Takumon Blog](https://takumon.com/2018/10/07/#twitter)を参照してください。\n\n\n#### 使い方\nマークダウンには下記のように記載します。\n\n```html\n<blockquote class=\"twitter-tweet\" data-lang=\"ja\"><p lang=\"ja\" dir=\"ltr\">最近忙しかったのでアレですが、ブログ更新しました。<br><br>Reactで構造化データマークアップ（JSON-LD対応） <a href=\"https://t.co/7V49VqH9WI\">https://t.co/7V49VqH9WI</a> <a href=\"https://twitter.com/inouetakumon?ref_src=twsrc%5Etfw\">@inouetakumon</a>さんから</p>&mdash; takumontakumon (@inouetakumon) <a href=\"https://twitter.com/inouetakumon/status/1046062825037344770?ref_src=twsrc%5Etfw\">2018年9月29日</a></blockquote>\n```\n\n<br>\n\n* 表示結果\n\n![スクリーンショット 2018-10-22 23.37.27.png](https://qiita-image-store.s3.amazonaws.com/0/49915/ddf2b9c2-be7e-eaf2-3194-dd0f346c4ea0.png)\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n## SEO系\n### [gatsby-plugin-react-helmet](https://www.gatsbyjs.org/packages/gatsby-plugin-react-helmet)\n**React HelmetをGatsbyビルド時使えるようにする**<br>\n\n* 実用例は過去記事[Reactで構造化データマークアップ（JSON-LD対応)](https://takumon.com/09/29)を参照してください。\n\n\n\n\n<br><hr>\n### [gatsby-plugin-offline](https://www.gatsbyjs.org/packages/gatsby-plugin-offline)\n**低速ネットワーク環境やオフライン環境でもWebサイトをスムーズに見れるようにする**<br>\n\n* ビルド時にサービスワーカーを生成してくれます。\n* `gatsby-plugin-manifest`との併用推奨です。\n* このプラグインは[Workbox](https://developers.google.com/web/tools/workbox/modules/workbox-build)の設定を従っており、必要に応じて`gatsby-config.js`で上書くという感じです。Workboxは宣言的な記述だけで最適なServiceWorkerのコードが生成できるライブラリで、下記にわかりやすく書かれていました。\n  * 参考：[ServiceWorkerを簡単に書けるworkbox-swの使い方 | Qiita](https://qiita.com/nazonohito51/items/32b61cabdac8b24769bd)\n\n\n\n\n\n<br><hr>\n### [gatsby-plugin-manifest](https://www.gatsbyjs.org/packages/gatsby-plugin-manifest)\n**アプリをPWA対応にする（manifest.webmanifestを生成する）**<br>\n\n* サイトに`manifest.webmanifest`を配置することで、スマホでブログを見たときに、ネイティブアプリのようなUXを実現できます。\n* `gatsby-plugin-offline`との併用推奨です。\n* 詳細は[GatsbyでPWA対応 |Takumon Blog](https://takumon.com/2018/10/08/#gatsby-plugin-manifest%E3%81%AE%E8%A8%AD%E5%AE%9A)を参照してください。\n\n\n\n\n\n\n<br><hr>\n### [gatsby-plugin-sitemap](https://www.gatsbyjs.org/packages/gatsby-plugin-sitemap)\n**サイトマップを生成する**<br>\n\n\n#### 設定・使い方\nプラグインで[いい感じの設定](https://github.com/gatsbyjs/gatsby/blob/master/packages/gatsby-plugin-sitemap/src/internals.js#L34)があらかじめされているので、最低限設定するならsiteUrlを指定するだけです。個別にオプションを設定する場合は、[いい感じの設定](https://github.com/gatsbyjs/gatsby/blob/master/packages/gatsby-plugin-sitemap/src/internals.js#L34)を参考にしましょう。\n\n```javascript:gatsby-config.jsの一部\n  siteMetadata: {\n    siteUrl: `https://www.example.com`,\n  },\n  plugins: [`gatsby-plugin-sitemap`]\n```\n\n<br>\n\nこれだけで下記のようなサイトマップが生成できます。\n\n```xml\n<urlset\n  xmlns=\"http://www.sitemaps.org/schemas/sitemap/0.9\"\n  xmlns:news=\"http://www.google.com/schemas/sitemap-news/0.9\"\n  xmlns:xhtml=\"http://www.w3.org/1999/xhtml\"\n  xmlns:mobile=\"http://www.google.com/schemas/sitemap-mobile/1.0\"\n  xmlns:image=\"http://www.google.com/schemas/sitemap-image/1.1\"\n  xmlns:video=\"http://www.google.com/schemas/sitemap-video/1.1\">\n  <url>\n    <loc>https://takumon.com//2018/10/14/</loc>\n    <changefreq>daily</changefreq>\n    <priority>0.7</priority>\n  </url>\n  <url>\n    <loc>https://takumon.com//2018/10/12/</loc>\n    <changefreq>daily</changefreq>\n    <priority>0.7</priority>\n  </url>\n  <url>\n    <loc>https://takumon.com//2018/10/08/</loc>\n    <changefreq>daily</changefreq>\n    <priority>0.7</priority>\n  </url>\n  <!-- ・・・ -->\n  <!-- Webサイト上の全てのURL定義 -->\n  <!-- ・・・ -->\n</urlset>\n```\n\n\n\n\n\n\n<br><hr>\n### [gatsby-plugin-canonical-urls](https://www.gatsbyjs.org/packages/gatsby-plugin-canonical-urls)\n**canonical linksを追加する**<br>\n* canonical linksは検索エンジンに対して、プロコトルが違ったりクエリストリングがついていても同一のサイトのURLだということを宣言するためのリンクです。\n\n#### 設定・使い方\nオプションとしてsiteUrlを指定します。\n\n```javascript:gatsby-config.jsの一部\n  plugins: [\n    {\n      resolve: `gatsby-plugin-canonical-urls`,\n      options: {\n        siteUrl: `https://www.example.com`,\n      },\n    },\n  ]\n```\n\n<br>\nすると下記リンクタグがHTML内に埋め込まれます。\n\n```html\n<link rel=\"canonical\" href=\"http://www.example.com/about-us/\" />\n```\n\n\n\n\n\n<br><hr>\n### [gatsby-plugin-feed](https://www.gatsbyjs.org/packages/gatsby-plugin-feed)\n**RSSフィードを作る**\n\n#### 設定\n`gatsby-config.js`でsiteMetadataを設定しプラグインを定義するだけでOKです。\n\n\n```javascript:gatsby-config.jsの一部\n  siteMetadata: {\n    title: `GatsbyJS`,\n    description: `Blazing fast modern site generator for React`,\n    siteUrl: `https://www.gatsbyjs.org`\n  },\n  plugins: [\n    {\n      resolve: `gatsby-plugin-feed`\n    }\n  ]\n```\n\n<br>\nこのプラグインを使うと、ビルドでpublic配下にrss.xmlが生成されます。\n自分の場合はFeedlyの登録ボタンと、rss.xmlへのリンクをブログのトップに設けています。\n\n![rssfeed.png](https://qiita-image-store.s3.amazonaws.com/0/49915/7828cb62-e3fd-8cd8-eb59-9a4d77215a34.png)\n\n\n\n\n\n\n\n<br><hr>\n### [gatsby-plugin-robots-txt](https://www.gatsbyjs.org/packages/gatsby-plugin-robots-txt)\n**`robots.txt`を生成する**<br>\n\n* robots.txtは検索エンジンのクロールを最適化するためのテキストファイルです。SEO対策に使われます。\n\n\n#### 設定・使い方\n\nオプションでホストURLやサイトマップを指定できます。\n\n```javascript:gatsby-config.jsの一部\nmodule.exports = {\n  plugins: [\n    {\n      resolve: 'gatsby-plugin-robots-txt',\n      options: {\n        host: 'https://www.example.com',\n        sitemap: 'https://www.example.com/sitemap.xml',\n        policy: [{ userAgent: '*', allow: '/' }]\n      }\n    }\n  ]\n};\n```\n\n<br>\n\nNetlfyで[Deploy Preview機能](https://www.netlify.com/blog/2016/07/20/introducing-deploy-previews-in-netlify/)を使うなら下記のような設定にします。\n\n```javascript:gatsby-config.jsの一部\nconst {\n  NODE_ENV,\n  URL: NETLIFY_SITE_URL = 'https://www.example.com',\n  DEPLOY_PRIME_URL: NETLIFY_DEPLOY_URL = NETLIFY_SITE_URL,\n  CONTEXT: NETLIFY_ENV = NODE_ENV\n} = process.env;\nconst isNetlifyProduction = NETLIFY_ENV === 'production';\nconst siteUrl = isNetlifyProduction ? NETLIFY_SITE_URL : NETLIFY_DEPLOY_URL;\n\nmodule.exports = {\n  siteMetadata: {\n    siteUrl\n  },\n  plugins: [\n    {\n      resolve: 'gatsby-plugin-robots-txt',\n      options: {\n        resolveEnv: () => NETLIFY_ENV,\n        env: {\n          production: {\n            policy: [{ userAgent: '*' }]\n          },\n          'branch-deploy': {\n            policy: [{ userAgent: '*', disallow: ['/'] }],\n            sitemap: null,\n            host: null\n          },\n          'deploy-preview': {\n            policy: [{ userAgent: '*', disallow: ['/'] }],\n            sitemap: null,\n            host: null\n          }\n        }\n      }\n    }\n  ]\n};\n```\n\n<br>\n\nオプションを指定しない場合は、siteMetadataにsiteUrlを指定します。\n\n```javascript:gatsby-config.jsの一部\nmodule.exports = {\n  siteMetadata: {\n    siteUrl: 'https://www.example.com'\n  },\n  plugins: ['gatsby-plugin-robots-txt']\n};\n```\n\n<br>\n\nビルドするとpublicフォルダ配下に`robot.txt`が生成されます。\n\n```txt:robot.txtの例\nUser-agent: *\nDisallow:\nSitemap: https://takumon.com/sitemap.xml\n```\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n## 開補補助系\n### [gatsby-plugin-lodash](https://www.gatsbyjs.org/packages/gatsby-plugin-lodash)\n**ビルド時のlodashのサイズを小さくする**<br>\n\n#### 設定・使い方\n\n入れるだけでもサイズを削減できますが、オプションで削除対象モジュールを指定してさらに削減可能です。\n※削除対象モジュールは[ここ](https://github.com/lodash/lodash-webpack-plugin#feature-sets)から選択してください。\n\n```javascript:gatsby-config.jsの一部\n  plugins: [\n    {\n      resolve: `gatsby-plugin-lodash`,\n      options: {\n        disabledFeatures: [\n          `shorthands`,\n          `cloning`\n        ],\n      },\n    },\n  ]\n```\n\n\n\n\n\n<br><hr>\n### [gatsby-plugin-webpack-bundle-analyzer](https://www.gatsbyjs.org/packages/gatsby-plugin-webpack-bundle-analyzer)\n**[webpack-bundle-analyzer](https://github.com/webpack-contrib/webpack-bundle-analyzer)を使ってbundle.jsの中身のサイズを可視化する**<br>\n* webpack-bundle-analyzerはパフォーマンスチューニングでbundle.jsのサイズを減らそうと思ったときに便利なライブラリです。ライブラリorコンポーネント毎にサイズをグラフィカルに示してくれます。\n\n### 設定\n\nこのプラグインは内部webpack-bundle-analyzerというライブラリを使っており、\n[webpack-bundle-analyzerのオプション](https://github.com/webpack-contrib/webpack-bundle-analyzer#options-for-plugin)なら何でも指定できます。<br>\n\nデフォルトだと`gatsby develop`するたびにブラウザが開くので、\nそれがいやなら下記のようにすると良いでしょう。\n\n```javascript:gatsby-config.jsの一部\n    {\n      resolve: `gatsby-plugin-webpack-bundle-analyzer`,\n      options: {\n        openAnalyzer: false\n      }\n    }\n```\n\n### 使い方\n`gatsby develop`して`http://localhost:8888`にアクセスします。\nすると下記のようにコンポーネント毎のサイズをグラフィカルに示してくれます。\n\n![bundlesize.png](https://qiita-image-store.s3.amazonaws.com/0/49915/cb3e3a62-5ecd-28a3-7821-1d3cd46faad4.png)\n\n\n\n\n\n\n\n<br><hr>\n### [gatsby-plugin-google-analytics](https://www.gatsbyjs.org/packages/gatsby-plugin-google-analytics)\n**[Google Analytics](https://analytics.google.com/analytics/web/)を使えるようにする**<br>\n\n#### 設定・使い方\n`gatsby-config.js`でトラッキングIDを設定するだけです。Google AnalyticsでトラッキングIDを発行して設定しましょう。\n\n```javascript:gatsby-config.jsの一部\n  plugins: [\n    {\n      resolve: `gatsby-plugin-google-analytics`,\n      options: {\n        trackingId: \"YOUR_GOOGLE_ANALYTICS_TRACKING_ID\",\n      },\n    },\n  ]\n```\n\n\n\n\n\n\n<br><hr>\n### [gatsby-plugin-facebook-analytics](https://www.gatsbyjs.org/packages/gatsby-plugin-facebook-analytics/)\n**[Facebook Analytics](https://developers.facebook.com/docs/analytics/?locale=ja_JP)を使えるようにする**<br>\n\n#### 設定・使い方\n\n```javascript:gatsby-config.jsの一部\n  plugins: [\n    {\n      resolve: `gatsby-plugin-facebook-analytics`,\n      options: {\n        appId: \"あなたのAPP ID\",\n        // 開発時も解析対象とするか\n        // デフォルトはfalseでプロダクションのみ解析対象とします\n        includeInDevelopment: false,\n        // SDKのデバックバージョンを含めるか\n        // デフォルトはfalseでライブラリはsdk.jsをロードします。\n        debug: false,\n        // 言語を指定。デフォルトはenglish\n        language: \"ja-jp\",\n      },\n    },\n  ]\n```\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n<br><hr>\n## UI系\n### [gatsby-plugin-nprogress](https://www.gatsbyjs.org/packages/gatsby-plugin-nprogress)\n**ローディングに時間がかかっている時にプログレスバーを表示する**<br>\n* [NProgress](http://ricostacruz.com/nprogress/)を使って、リンククリックから1秒たってもローディング中の場合にプログレスバーを表示します。\n\n#### 設定・使い方\n下記のように設定します。`color`でバーの色が変更可能です。\nまたオプションには[NProgress](https://github.com/rstacruz/nprogress#configuration)のオプションが全て指定できるようになっています。\n\n```javascript:gatsby-config.jsの一部\n  plugins: [\n    {\n      resolve: `gatsby-plugin-nprogress`,\n      options: {\n        color: `#444`,\n        showSpinner: false,\n      },\n    },\n  ]\n```\n\n\n\n\n<br><hr>\n### [gatsby-plugin-catch-links](https://www.gatsbyjs.org/packages/gatsby-plugin-catch-links)\n**aタグでローカル遷移する時にリロードを抑止してヒストリーAPIで遷移できるようにする**\n\nGatsbyはSPAなのでローカル遷移はヒストリーAPIを使うべきで、リロードは避けたいところですが、\n`<a href=\"tags/react\" >ローカル遷移のリンク</a>`のような**a**タグの場合、クリック時に（ブラウザのでフォルの挙動により）リロードしてしまいます。\n\nこのプラグインを使えば、**a**タグの場合でもローカル遷移であればリロードを抑止し、ヒストリーAPIを使った遷移が可能です。\n[Gatsby-Link](https://www.gatsbyjs.org/docs/gatsby-link/#programmatic-navigation)を使っていれば問題ないのですが、どうしても**a**タグしか使えない場合は、このプラグインが役立つでしょう。\n\n\n\n\n\n<br><hr>\n### [gatsby-plugin-layout](https://www.gatsbyjs.org/packages/gatsby-plugin-layout)\n**1系のレイアウト機能を2系でも使えるようにする**<br>\n\n* 1系から2系に移行したときに、レイアウト機能(2系では削除された機能)をそのまま使えるようにするために使います。\n\n#### 設定・使い方\n`gatsby-config.js`の設定は特に変わったところはありません。\nレイアウト用ファイルは`src/layouts/index.js`を作成しましょう。\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n## ファイル系\n\nJSON,XML,YAML,CSVのパースは使い方はほぼ一緒なのでまとめて説明します。\n\n* [gatsby-transformer-json](https://www.gatsbyjs.org/packages/gatsby-transformer-json)\n  * **JSONファイルをパースする**\n* [gatsby-transformer-xml](https://www.gatsbyjs.org/packages/gatsby-transformer-xml)\n  * **XMLファイルをパースする**\n* [gatsby-transformer-yaml](https://www.gatsbyjs.org/packages/gatsby-transformer-yaml)\n  * **Yamlファイルをパースする**\n* [gatsby-transformer-csv](https://www.gatsbyjs.org/packages/gatsby-transformer-csv)\n  * **CSVファイルをパースする**\n\n\nこれらはgatsby-source-filesystemとあわせて使います。\n\n```javascript:gatsby-config.jsの一部\n  plugins: [\n    `gatsby-transformer-json`,\n    {\n      resolve: `gatsby-source-filesystem`,\n      options: {\n        path: `./src/data/`,\n      },\n    },\n  ],\n```\n\n\n\n\n\n\n### [gatsby-source-filesystem](https://www.gatsbyjs.org/packages/gatsby-source-filesystem)\n**ファイルを読み取りGatsby上で扱えるFileノードを生成する**<br>\n\n* `transformer`プラグイン（ファイルノードをファイル形式毎に最適化したノードに変換するプラグイン）と併用します。例えば[gatsby-transformer-json](https://www.gatsbyjs.org/packages/gatsby-transformer-json)はJSONファイルをJSONノードに変換し、[gatsby-transformer-remark](https://www.gatsbyjs.org/packages/gatsby-transformer-remark/?=gatsby-transformer-remark)はマークダウンファイルをMarkdownRemarkノードに変換します。\n* ※gatsby-starter-blogインストール済\n\n### 設定方法・使い方\n* `gatsby-config.js`では読み込み対象のフォルダパスを指定します。\n\n```javascript:gatsby-config.js\nmodule.exports = {\n  plugins: [\n    {\n      resolve: `gatsby-source-filesystem`,\n      options: {\n        name: `pages`,\n        path: `${__dirname}/src/pages/`,\n      },\n    },\n    {\n      resolve: `gatsby-source-filesystem`,\n      options: {\n        name: `data`,\n        path: `${__dirname}/src/data/`,\n        ignore: [`**/\\.*`], // ドット始まりのファイルは無視\n      },\n    },\n  ],\n}\n```\n\n<br>\n\n* 読み取ったファイルノードはGraphQLで取得できます。\n\n```graphql\n{\n  allFile {\n    edges {\n      node {\n        extension\n        dir\n        modifiedTime\n      }\n    }\n  }\n}\n```\n\n<br>\n\n* JavaScriptの関数 `createFilePath` を用意しています。実際`gatsby-config.js`ではマークダウン読み込みで使っています。\n\n\n```javascript:gatsby-config.js\nexports.onCreateNode = ({ node, actions, getNode }) => {\n  const { createNodeField } = actions\n\n  if (node.internal.type === `MarkdownRemark`) {\n    const value = createFilePath({ node, getNode })\n    createNodeField({\n      name: `slug`,\n      node,\n      value,\n    })\n  }\n}\n```\n\n* 同じく関数`createRemoteFileNode`を用意しています。こちらは名前の通り、リモートのファイル読み込みで使用します。\n\n\n\n\n<br><hr>\n### [gatsby-transformer-remark](https://www.gatsbyjs.org/packages/gatsby-transformer-remark)\n**マークダウンファイルをパースする（MarkdownRemarkノードに変換する）**<br>\n\n\n#### 使い方\n* MarkdownRemarkノードはGraphQLで取得可能です。\n\n```graphql\n{\n  allMarkdownRemark {\n    edges {\n      node {\n        html\n        headings {\n          depth\n          value\n        }\n        frontmatter {\n          title\n        }\n      }\n    }\n  }\n}\n```\n\n<br>\n\n* 目次も取得できます。目次のURLは`slug`ですが`pathToSlugField`でカスタム可能です。\n\n```graphql\n{\n  allMarkdownRemark {\n    edges {\n      node {\n        html\n        tableOfContents(pathToSlugField: \"frontmatter.path\")\n        frontmatter {\n          path\n        }\n      }\n    }\n  }\n}\n```\n\n<br>\n\n* 要約も取得できます。デフォルト120文字ですが、`pruneLength`でカスタム可能です。\n\n```graphql\n{\n  allMarkdownRemark {\n    edges {\n      node {\n        html\n        excerpt(pruneLength: 500)\n      }\n    }\n  }\n}\n```\n\n\n\n\n\n\n<br><hr>\n### [gatsby-image](https://www.gatsbyjs.org/packages/gatsby-transformer-remark)\n**画像読み込みを最適化する**\n\n* gatsby-plugin-sharpと併せて使用します\n* Webサイトにおいて画像読み込みの最適化はかなり手間がかかりますが、それをよしなりやってくれるのがこのプラグインです。GraphQLとSharpを使ったGatsbyのネイティブ画像処理機能とシームレスに連携するように設計されています。\n\n#### 設定・使い方\n* `gatsby-plugin-sharp`、`gatsby-transformer-sharp`と一緒に使います。下記のように設定します。\n\n```javascript:gatsby-config.jsの一部\nconst path = require(`path`)\n\nmodule.exports = {\n  plugins: [\n    {\n      resolve: `gatsby-source-filesystem`,\n      options: {\n        name: `images`,\n        path: path.join(__dirname, `src`, `images`),\n      },\n    },\n    `gatsby-plugin-sharp`,\n    `gatsby-transformer-sharp`,\n  ],\n}\n```\n\n* 実際使う場合はコンポーネント内でHTMLの`img`タグの代わりにgatsby-imageの`Img`タグを使います。\n\n```javascript\nimport React from \"react\"\nimport Img from \"gatsby-image\"\n\nexport default ({ data }) => (\n  <div>\n    <h1>Hello gatsby-image</h1>\n    <Img fixed={data.file.childImageSharp.fixed} />\n  </div>\n)\n\nexport const query = graphql`\n  query {\n    file(relativePath: { eq: \"blog/avatars/kyle-mathews.jpeg\" }) {\n      childImageSharp {\n        fixed(width: 125, height: 125) {\n          ...GatsbyImageSharpFixed\n        }\n      }\n    }\n  }\n`\n```\n\n\n\n\n\n\n<br><hr>\n### [gatsby-transformer-sharp](https://www.gatsbyjs.org/packages/gatsby-transformer-sharp)\n**画像読み込みでImageSharpノードを生成する**<br>\n\n* `gatsby-plugin-sharp`と併用します。\n\n\n\n\n\n\n<br><hr>\n### [gatsby-plugin-sharp](https://www.gatsbyjs.org/packages/gatsby-plugin-sharp)\n**[Sharp](https://github.com/lovell/sharp)(画像圧縮ライブラリ)を使えるようにする**<br>\n\n* Gatsbyエンドユーザーが使うというよりは、プラグインの一部で使う低レイヤーのプラグイン。\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n## CSS系\nSASSやCSS in JSのライブラリ用のプラグインは一通り用意されています。\nプラグインを入れるだけで簡単に使えるので設定や使い方は省略します。\n\n* [gatsby-plugin-sass](https://www.gatsbyjs.org/packages/gatsby-plugin-sass)\n  * **GatsbyでSASS/SCSSを使えるようにする**\n  * `node-sass`をあわせてインストールしてください。\n  * CSS Moduleを使う場合、拡張子を`module.scss`、`module.sass`などとしてください。\n* [gatsby-plugin-styled-components](https://www.gatsbyjs.org/packages/gatsby-plugin-styled-components)\n  * **[Styled Components](https://github.com/styled-components/styled-components)を使えるようにする**\n* [gatsby-plugin-glamor](https://www.gatsbyjs.org/packages/gatsby-plugin-glamor)\n  * **[Glamor](https://github.com/threepointone/glamor)と[glamorous](https://github.com/paypal/glamorous)を使えるようにする**\n* [gatsby-plugin-emotion](https://www.gatsbyjs.org/packages/gatsby-plugin-emotion/)\n  * **[Emotion](https://github.com/emotion-js/emotion)を使えるようにする**\n* [gatsby-plugin-postcss](https://www.gatsbyjs.org/packages/gatsby-plugin-postcss)\n  * **[PostCSS](https://postcss.org/)が使えるようにする**\n\n### [gatsby-plugin-typography](https://www.gatsbyjs.org/packages/gatsby-plugin-typography)\n**[Typography.js](https://kyleamathews.github.io/typography.js/)(文章のスタイルを設定するライブラリ)を使えるようにする**<br>\n* Typography.jsはフォント、フォントサイズ、line-heigth等のパラメータを設定すると、それに従ってCSSを生成してくれるライブラリです。CSSよりも管理が楽になる上、様々なテーマが提供されているので、それを使って簡単にスタイルを設定できます。\n\n#### 設定・使い方\n\nスタイル指定用のJavaScriptを作成します。\nテーマを使うと作成が楽です。どんなテーマがあるかは[Typography.js](https://kyleamathews.github.io/typography.js/)の右上にある`Pick theme`プルダウンで確認できます。お気に入りのテーマを選んで、npmインストールして使いましょう。\n\n```javascript:src/utils/typography.js\nimport Typography from \"typography\"\nimport grandViewTheme from \"typography-theme-grand-view\"\n\nconst typography = new Typography(grandViewTheme)\n\nconst { rhythm, scale } = typography;\nexport { rhythm, scale, typography as default };\n```\n\n<br>\n\nJavaScriptでテーマの設定を上書くこともできます。\n\n```javascript:src/utils/typography.js\nimport Typography from \"typography\"\nimport grandViewTheme from \"typography-theme-grand-view\"\n\ngrandViewTheme.overrideThemeStyles = () => ({\n  'html,body,h1,h2,h3,h4,h5,h6': {\n    color: '#444',\n    fontFamily: [\n      '-apple-system',\n      'BlinkMacSystemFont',\n      'Segoe UI',\n      'Helvetica Neue'\n      'Hiragino Kaku Gothic ProN',\n      '\"Yu Gothic\"',\n      'YuGothic',\n      'Verdana',\n      'Meiryo'\n      '\"M+ 1p\"',\n      'sans-serif'\n    ].join(','),\n  },\n})\n\nconst typography = new Typography(grandViewTheme)\n\nconst { rhythm, scale } = typography;\nexport { rhythm, scale, typography as default };\n```\n\n<br>\n\n作ったスタイル指定用のJavaScriptを`gatsby-config.js`で指定します。\n\n```javascript:gatsby-config.jsの\b中\n  plugins: [\n    {\n      resolve: `gatsby-plugin-typography`,\n      options: {\n        pathToConfigModule: `src/utils/typography`,\n      },\n    },\n  ],\n```\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n<br><hr>\n\n## 外部連携系\n\nブログなどからデータをひっぱってきてGraphQLで扱えるようにするプラグイン群です。様々ありますが、有名どころを以下に示します。各プラグインの使い方は、かなりがっつりしたものになるのでココでは省略します。\n\n* [gatsby-source-medium](https://www.gatsbyjs.org/packages/gatsby-source-medium)\n  * [Medium](https://medium.com/)の記事を引っ張ってきてGraphQLで扱えるようにする\n* [gatsby-source-wordpres](https://www.gatsbyjs.org/packages/gatsby-source-wordpres)\n  * [WordPress](https://ja.wordpress.org/)の記事を引っ張ってきてGraphQLで扱えるようにする\n* [gatsby-source-contentful](https://www.gatsbyjs.org/packages/gatsby-source-contentful)\n  * [contentful](https://www.contentful.com/)からデータを引っ張ってきてGraphQLで扱えるようにする\n\n\n<br><hr>\n\n### [gatsby-source-esa](https://www.gatsbyjs.org/packages/gatsby-source-esa)\n**[esa API](https://docs.esa.io/posts/102)を使って[esa.io](https://esa.io/)のデータを引っ張ってきてGraphQLで扱えるようにする**<br>\n\n#### 設定\n\n```javascript:gatsby-config.jsの一部\n  plugins: [\n    {\n      resolve: `gatsby-source-esa`,\n      options: {\n        // (必須)トークン\n        // https://[YOUR_TEAM_NAME].esa.io/user/applications からトークンを取得できます。\n        // なおオーナでないとトークンは取得できません\n        accessToken: `YOUR_PERSONAL_ACCESS_TOKEN`,\n        // (必須)チーム名\n        teamName: `YOUR_TEAM_NAME`,\n        // (任意)検索クエリ\n        // 詳細は https://docs.esa.io/posts/104 参照\n        // 例 : 'in:public' や 'wip:false in:public'　など\n        q: '',\n        // (任意)ベースカテゴリ\n        // 例 : 'public'\n        baseCategory: ''\n      }\n    }\n  ]\n```\n\n#### 使い方\nGraphQLで下記スキーマにて取得します。\n\n```graphql\n{\n  allEsaPost {\n    edges {\n      node {\n        number\n        name\n        body_md\n        body_html\n        category\n        relative_category\n        tags\n      }\n    }\n  }\n}\n```\n\n\n\n\n\n\n\n\n\n\n## まとめ\nもともと自分のブログで使っていたものも多数ありますが、\n調べてみると、いろいろ便利なプラグインを発見できました。\nこれでますますGatsbyが人気になることを願っています。\n","comments_count":2,"created_at":"2018-10-23T08:48:23+09:00","likes_count":12,"reactions_count":0,"tags":[{"name":"JavaScript"},{"name":"Node.js"},{"name":"React"},{"name":"gatsby"}],"updated_at":"2018-10-28T18:05:18+09:00","url":"https://qiita.com/Takumon/items/da8347f81a9f021b637f","user":{"id":"Takumon"}}}}